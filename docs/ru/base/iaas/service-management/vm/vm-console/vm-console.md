В аварийных ситуациях и при отсутствии [подключения к виртуальной машине](../vm-connect/vm-connect-nix#4_podklyuchites_k_vm) по сети используйте [VNC-консоль](#vnc-konsol) или просмотрите [логи сообщений ВМ](#logi_soobshcheniy_vm).

<info>

Информация о действиях пользователя с ВМ и об изменении ее состояния содержится в [журнале событий](../vm-manage#prosmotr_zhurnala_sobytiy) OpenStack.

</info>

## VNC-консоль

VNC-консоль — инструмент диагностики и управления виртуальными машинами, который работает в браузере. Воспользуйтесь VNC-консолью, если:

- виртуальная машина не имеет внешнего IP-адреса или не подключена к интернету;
- рекомендованные способы подключения к ВМ (по [SSH](../vm-connect/vm-connect-nix) или [RDP](../vm-connect/vm-connect-win)) не работают.

Доступ к VNC-консоли появляется сразу после запуска виртуальной машины. Это позволяет обнаружить сбои во время загрузки операционной системы.

Особенности работы с VNC-консолью:

- для ввода текста можно использовать только латиницу;
- буфер обмена в VNC-консоли недоступен, скопировать и вставить текст нельзя.

Откройте консоль в личном кабинете VK Cloud или используйте адрес, полученный через OpenStack CLI.

<tabs>
<tablist>
<tab>Личный кабинет</tab>
<tab>OpenStack CLI</tab>
</tablist>

<tabpanel>

1. [Перейдите](https://msk.cloud.vk.com/app/) в личный кабинет VK Cloud.
2. Перейдите в раздел **Облачные вычисления → Виртуальные машины**.
3. В списке виртуальных машин нажмите на имя нужной ВМ.
4. На странице ВМ перейдите на вкладку **Консоль**.
5. Если виртуальная машина не запущена, нажмите кнопку запуска на вкладке.

<info>

Используйте VNC-консоль на вкладке или нажмите кнопку **Открыть в новом окне**.

</info>

</tabpanel>

<tabpanel>

1. Убедитесь, что клиент OpenStack [установлен](/ru/tools-for-using-services/cli/openstack-cli#1_ustanovite_klient_openstack), и [пройдите аутентификацию](/ru/tools-for-using-services/cli/openstack-cli#3_proydite_autentifikaciyu) в проекте.
2. Получите ссылку на страницу с VNC-консолью.

   ```bash
   openstack console url show <ID виртуальной машины>
   ```

   Пример вывода:

   ```bash
   +-------+-------------------------------------------------------------------------------------+
   | Field | Value                                                                               |
   +-------+-------------------------------------------------------------------------------------+
   | type  | novnc                                                                               |
   | url   | https://infra.mail.ru:6080/vnc_auto.html?token=20224980-43eb-4535-85c7-310a18e27941 |
   +-------+-------------------------------------------------------------------------------------+
   ```

3. Используйте ссылку, чтобы открыть страницу с VNC-консолью в браузере.

   <info>

   Если время действия ссылки закончилось, выполните команду еще раз, чтобы получить новую ссылку.

   </info>

</tabpanel>
</tabs>

В интерфейсе личного кабинета и в отдельном окне доступны кнопки управления VNC-консолью:

- **Send CtrAltDel** — действие кнопки зависит от операционной системы ВМ (перезагрузка, вызов окна блокировки и т.д.).
- **Обновить сессию** (**Update Session**) — используйте для переподключения к VNC-консоли.

## Логи сообщений ВМ

В OpenStack реализована поддержка консоли, работающей через последовательный порт ВМ. Это позволяет просмотреть логи загрузки и другую диагностическую информацию вне зависимости от состояния операционной системы и доступа к ВМ по сети.

Если виртуальная машина была создана из пользовательского образа, настройте консоль. Для этого добавьте в GRUB параметры:

```bash
console=tty0 console=ttyS0,115200n8
```

<tabs>
<tablist>
<tab>OpenStack CLI</tab>
</tablist>

<tabpanel>

1. Убедитесь, что клиент OpenStack [установлен](/ru/tools-for-using-services/cli/openstack-cli#1_ustanovite_klient_openstack), и [пройдите аутентификацию](/ru/tools-for-using-services/cli/openstack-cli#3_proydite_autentifikaciyu) в проекте.

- Вывести все записи логов:

   ```bash
   openstack console log show <ID виртуальной машины>
   ```

- Вывести ограниченное количество записей:

   ```bash
   openstack console log show --lines <кол-во записей> <ID виртуальной машины>
  ```

</tabpanel>
</tabs>
