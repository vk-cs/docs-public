Система хранения данных на платформе VK Cloud организована с использованием сетевых дисков. Конфигурация основного диска задается на этапе [создания виртуальной машины](../vm/vm-create), дополнительные диски можно [создать](#sozdanie-diska) позже и [подключить](#podklyuchenie-diska-k-vm) к нужным ВМ. Для созданных дисков доступны операции [изменения размера](#izmenenie-razmera-diska) и [типа](#izmenenie-tipa-diska). Диски можно [перемещать между проектами](#peremeshchenie-diskov-mezhdu-proektami) и виртуальными машинами, [отключать от ВМ](#otklyuchenie_diska_ot_vm), [делать загрузочными](#izmenenie_atributa_zagruzochnyy) и не загрузочными. Диски, которые больше не используются, можно [удалить](#udalenie_diska).

## Создание диска

Создание HDD и SSD-дисков доступно по умолчанию во всех конфигурациях. Для создания дисков LL NVME [обратитесь в техподдержку](/ru/contacts) и запросите доступ к [высокопроизводительным конфигурациям](../../concepts/vm-concept#cpu_i_ram) и дискам. Подробнее о [типах дисков](../../concepts/vm-concept#diski) — в статье [Обзор сервиса Cloud Servers](../../concepts/vm-concept).

<tabs>
<tablist>
<tab>Личный кабинет</tab>
<tab>OpenStack CLI</tab>
</tablist>

<tabpanel>

1. [Перейдите](https://msk.cloud.vk.com/app/) в личный кабинет VK Cloud.
2. Откройте страницу с нужным списком дисков.

   - Все диски: перейдите в раздел **Облачные вычисления** → **Диски**.

   - Диски определенной виртуальной машины:

      1. Перейдите в раздел **Облачные вычисления** → **Виртуальные машины**.
      2. В списке виртуальных машин нажмите на имя ВМ, для которой нужно создать диск.
      3. На странице ВМ перейдите на вкладку **Диски**.

3. Над списком дисков нажмите кнопку **Создать диск**.
4. Укажите параметры диска:

   - **Название диска**: обязательное поле. При необходимости нажмите  **Добавить описание** и в появившемся поле введите текст.
   - **Источник**: выберите подходящую опцию для параметра:

      - **Пустой диск**: заполните параметры **Тип диска** и **Зона доступности**.
      - **Снимок диска**: в поле **Список снимков** выберите снимок, из которого нужно создать диск.
      - **Образ диска**: заполните параметры **Тип диска**, **Зона доступности** и **Образ диска**.
      - **Диск**: в поле **Диск для клонирования** выберите нужный диск.

   - **Размер диска**: укажите размер диска в гигабайтах.
   - **Загрузочный диск**: включите опцию, если необходимо сделать диск загрузочным.

      <info>

      Загрузочный диск можно использовать в качестве основного (root) диска ВМ или подключить к ВМ как дополнительный диск, с которого может быть загружена операционная система.

      </info>

   - **Подключить диск к инстансу**: если сразу после создания необходимо подключить диск к виртуальной машине, включите эту опцию и выберите нужную ВМ в поле **Выберите инстанс**.

5. Нажмите кнопку **Создать диск**.

</tabpanel>

<tabpanel>

1. Убедитесь, что клиент OpenStack [установлен](/ru/manage/tools-for-using-services/openstack-cli#1_ustanovite_klient_openstack), и [пройдите аутентификацию](/ru/manage/tools-for-using-services/openstack-cli#3_proydite_autentifikaciyu) в проекте.

2. Выберите в [таблице](../../concepts/vm-concept#diski) тип диска, определите его название в API и зону доступности, подходящую для размещения.

3. Просмотрите доступные типы дисков и скопируйте ID типа, соответствующий названию в API.

   ```bash
   openstack volume type list
   ```

4. Просмотрите зоны доступности и скопируйте имя выбранной зоны:

   ```bash
   openstack availability zone list --volume
   ```

5. Создайте диск определенного типа и размера в выбранной зоне доступности:

   ```bash
   openstack volume create --type <ID типа диска> --size <Размер> --availability-zone <Зона доступности диска> <Название диска>
   ```

   Дополнительные параметры команды:

   - `--image <ID образа>` — ID образа, из которого будет создан диск;
   - `--snapshot <ID снимка>` — ID снимка, из которого будет создан диск;
   - `--description <Описание>` — произвольное описание диска;
   - `--property <Ключ=Значение>` — пользовательские свойства диска;
   - `--bootable` — создать загрузочный диск.

</tabpanel>
</tabs>

## Увеличение размера диска с перезагрузкой ВМ

Ограничения, связанные с изменением размера диска ВМ на платформе VK Cloud:

- Размер диска нельзя уменьшить.
- Если у дисков с типом High IOPS SSD и Low Latency NVME есть снимки, увеличить размер этих дисков нельзя.

<tabs>

<tablist>
<tab>Личный кабинет</tab>
<tab>OpenStack CLI</tab>
</tablist>

<tabpanel>

1. [Перейдите](https://msk.cloud.vk.com/app/) в личный кабинет VK Cloud.
2. Откройте страницу с нужным списком дисков.

   - Все диски: перейдите в раздел **Облачные вычисления** → **Диски**.

   - Диски определенной виртуальной машины:

      1. Перейдите в раздел **Облачные вычисления** → **Виртуальные машины**.
      2. В списке виртуальных машин нажмите на имя ВМ, размер диска которой нужно увеличить.
      3. На странице ВМ перейдите на вкладку **Диски**.

3. Используйте один из способов, чтобы открыть окно изменения размера диска.

   - Через контекстное меню диска:

      1. Раскройте контекстное меню диска.
      2. Нажмите **Изменить размер диска**.

   - На странице диска:

      1. Нажмите на имя диска, размер которого нужно изменить.
      2. На странице диска перейдите на вкладку **Общая информация**.
      3. Над таблицей с параметрами диска нажмите кнопку **Изменить размер диска**.

3. В открывшемся окне укажите **Размер диска**.
4. Нажмите кнопку **Сохранить**.
5. [Перезагрузите](../vm/vm-manage#zapusk_ostanovka_perezagruzka_vm) ВМ.

</tabpanel>

<tabpanel>

1. Убедитесь, что клиент OpenStack [установлен](/ru/manage/tools-for-using-services/openstack-cli#1_ustanovite_klient_openstack), и [пройдите аутентификацию](/ru/manage/tools-for-using-services/openstack-cli#3_proydite_autentifikaciyu) в проекте.

2. Выведите список дисков:

   ```bash
   openstack volume list
   ```

3. Проверьте статус диска в колонке `Status`. Успешное расширение гарантируется только для дисков со статусом `available` или `in-use`.

4. Скопируйте ID диска.

5. Увеличьте диск, указав новый размер в гигабайтах.

   - Если диск отключен от ВМ (`Status`: `available`):

      ```bash
         openstack volume set --size <Размер> <ID диска>
      ```

   - Если диск подключен к ВМ (`Status`: `in-use`):

      ```bash
         cinder extend <ID диска> <Размер>
      ```

6. [Перезагрузите](../vm/vm-manage#zapusk_ostanovka_perezagruzka_vm) ВМ.

</tabpanel>
</tabs>

## Увеличение размера диска без перезагрузки ВМ

Чтобы изменить размер диска включенной ВМ без перезагрузки:

1. [Увеличьте](#uvelichenie_razmera_diska) размер диска в личном кабинете VK Cloud или через Openstack CLI, но не перезагружайте ВМ.
1. Увеличьте размер диска в операционной системе ВМ:

   <tabs>
   <tablist>
   <tab>Windows</tab>
   <tab>Linux</tab>
   </tablist>
   <tabpanel>

   1. Откройте средство управления дисками (diskmgmt.msc).
   1. В контекстном меню нужного раздела выберите **Расширить том**.
   1. [Увеличьте размер диска](https://learn.microsoft.com/ru-ru/windows-server/storage/disk-management/extend-a-basic-volume).

   </tabpanel>
   <tabpanel>

   Выполните команду:

   ```bash
   growpart /dev/vda 1 <пробел перед 1 важен>
   sudo resize2fs /dev/vda1
   ```

   </tabpanel>
   </tabs>

## Клонирование диска

<tabs>
<tablist>
<tab>Личный кабинет</tab>
<tab>OpenStack CLI</tab>
</tablist>
<tabpanel>

1. [Перейдите](https://msk.cloud.vk.com/app/) в личный кабинет VK Cloud.
2. Откройте страницу с нужным списком дисков.

   - Все диски: перейдите в раздел **Облачные вычисления** → **Диски**.
   - Диски определенной виртуальной машины:

      1. Перейдите в раздел **Облачные вычисления** → **Виртуальные машины**.
      2. В списке виртуальных машин нажмите на имя ВМ, для которой нужно клонировать диск.
      3. На странице ВМ перейдите на вкладку **Диски**.

3. Используйте один из способов, чтобы открыть окно клонирования диска.

   - Через контекстное меню диска:

      1. Раскройте контекстное меню нужного диска.
      2. Нажмите **Клонировать диск**.

   - На странице диска:

      1. Нажмите на имя диска, который нужно клонировать.
      2. На странице диска перейдите на вкладку **Общая информация**.
      3. Над таблицей с параметрами диска нажмите **Еще** и выберите опцию **Клонировать диск**.

4. На открывшейся странице укажите параметры нового диска.
5. Нажмите кнопку **Создать диск**.

</tabpanel>
<tabpanel>

1. Убедитесь, что клиент OpenStack [установлен](/ru/manage/tools-for-using-services/openstack-cli#1_ustanovite_klient_openstack), и [пройдите аутентификацию](/ru/manage/tools-for-using-services/openstack-cli#3_proydite_autentifikaciyu) в проекте.
1. [Определите](../../concepts/vm-concept#tipy_diskov_c23be93f):

   - нужный тип диска;
   - его название в API;
   - зону доступности, подходящую для размещения.

1. Просмотрите доступные типы дисков и скопируйте ID типа, соответствующий названию в API.

   ```bash
   openstack volume type list
   ```

1. Просмотрите зоны доступности и скопируйте имя нужной зоны:

   ```bash
   openstack availability zone list --volume
   ```

1. Клонируйте диск на основе существующего:

   ```bash
   openstack volume create --type <ID типа диска> --size <Размер> --availability-zone <Зона доступности диска> --source <ID диска> <Название диска>
   ```

</tabpanel>
</tabs>

## Изменение типа диска

Диски с типом HDD и SSD доступны по умолчанию во всех конфигурациях. Для использования дисков LL NVME [обратитесь в техподдержку](/ru/contacts) и запросите доступ к [высокопроизводительным конфигурациям](../../concepts/vm-concept#cpu_i_ram) и дискам. Подробнее о [типах дисков](../../concepts/vm-concept#diski) — в статье [Обзор сервиса Cloud Servers](../../concepts/vm-concept).

<tabs>

<tablist>
<tab>Личный кабинет</tab>
<tab>OpenStack CLI</tab>
</tablist>

<tabpanel>

1. [Перейдите](https://msk.cloud.vk.com/app/) в личный кабинет VK Cloud.
2. Откройте страницу с нужным списком дисков.

   - Все диски: перейдите в раздел **Облачные вычисления → Диски**.

   - Диски определенной виртуальной машины:

      1. Перейдите в раздел **Облачные вычисления → Виртуальные машины**.
      2. В списке виртуальных машин нажмите на имя ВМ, тип диска которой нужно изменить.
      3. На странице ВМ перейдите на вкладку **Диски**.

3. Используйте один из способов, чтобы открыть окно изменения типа диска.

   - Через контекстное меню диска:

      1. Раскройте контекстное меню диска.
      2. Нажмите **Изменить тип диска**.

   - На странице диска:

      1. Нажмите на имя диска, тип которого нужно изменить.
      2. На странице диска перейдите на вкладку **Общая информация**.
      3. Над таблицей с параметрами диска нажмите кнопку **Изменить тип диска**.

   <info>

   Если опция **Изменить тип диска** неактивна, [отключите диск](#otklyuchenie_diska_ot_vm) от ВМ.

   </info>

4. В открывшемся окне выберите **Тип диска** и нажмите кнопку **Подтвердить**.

</tabpanel>

<tabpanel>

1. Убедитесь, что клиент OpenStack [установлен](/ru/manage/tools-for-using-services/openstack-cli#1_ustanovite_klient_openstack), и [пройдите аутентификацию](/ru/manage/tools-for-using-services/openstack-cli#3_proydite_autentifikaciyu) в проекте.

2. Выберите в [таблице](../../concepts/vm-concept#diski) новый тип диска и определите его название в API.

3. Просмотрите список доступных типов дисков и скопируйте ID типа, соответствующий названию в API.

   ```bash
   openstack volume type list
   ```

4. Просмотрите список дисков и скопируйте ID диска, тип которого нужно изменить:

   ```bash
   openstack volume list --long
   ```

5. Измените тип диска:

   ```bash
   openstack volume set --type <ID типа> --retype-policy on-demand <ID диска>
   ```

</tabpanel>
</tabs>

## Изменение атрибута «загрузочный»

Сделайте диск загрузочным, чтобы использовать его в качестве основного (root) диска ВМ. Загрузочный диск также можно использовать как дополнительный диск ВМ для загрузки операционной системы.

Чтобы исключить возможность случайной загрузки с диска, сделайте его незагрузочным.

<tabs>

<tablist>
<tab>Личный кабинет</tab>
<tab>OpenStack CLI</tab>
</tablist>

<tabpanel>

1. [Перейдите](https://msk.cloud.vk.com/app/) в личный кабинет VK Cloud.
2. Откройте страницу с нужным списком дисков.

   - Все диски: перейдите в раздел **Облачные вычисления → Диски**.

   - Диски определенной виртуальной машины:

      1. Перейдите в раздел **Облачные вычисления → Виртуальные машины**.
      2. В списке виртуальных машин нажмите на имя ВМ.
      3. На странице ВМ перейдите на вкладку **Диски**.

3. Измените атрибут «загрузочный» одним из способов.

   - Через контекстное меню диска:

      1. Раскройте контекстное меню диска.
      2. Нажмите **Сделать диск загрузочным** (**Сделать диск не загрузочным**).

   - На странице диска:

      1. Нажмите на имя диска.
      2. На странице диска перейдите на вкладку **Общая информация**.
      3. Над таблицей с параметрами диска нажмите кнопку **Еще** и выберите **Сделать диск загрузочным** (**Сделать диск не загрузочным**).

4. В открывшемся окне нажмите кнопку **Подтвердить**.

</tabpanel>

<tabpanel>

1. Убедитесь, что клиент OpenStack [установлен](/ru/manage/tools-for-using-services/openstack-cli#1_ustanovite_klient_openstack), и [пройдите аутентификацию](/ru/manage/tools-for-using-services/openstack-cli#3_proydite_autentifikaciyu) в проекте.

2. Выполните нужную команду.

   - Сделать диск загрузочным:

      ```bash
      openstack volume set --bootable <ID диска>
      ```

   - Сделать диск не загрузочным:

      ```bash
      openstack volume set --non-bootable <ID диска>
      ```

3. Проверьте результат:

   ```bash
   openstack volume show <ID диска>
   ```

</tabpanel>
</tabs>

## Подключение диска к ВМ

<tabs>

<tablist>
<tab>Личный кабинет</tab>
<tab>OpenStack CLI</tab>
</tablist>

<tabpanel>

1. [Перейдите](https://msk.cloud.vk.com/app/) в личный кабинет VK Cloud.
2. Перейдите в раздел **Облачные вычисления → Диски**.
3. Найдите в списке диск, не подключенный к ВМ: значок слева от названия диска — синий, при наведении на него появляется надпись **Не подключен к инстансу**.
4. Используйте один из способов, чтобы открыть окно выбора виртуальной машины для подключения диска.

   - Через контекстное меню диска:

      1. Раскройте контекстное меню диска.
      2. Нажмите **Подключить к инстансу**.

   - На странице диска:

      1. Нажмите на имя диска, который нужно подключить к ВМ.
      2. На странице диска перейдите на вкладку **Общая информация**.
      3. Над списком дисков нажмите кнопку **Еще** и выберите **Подключить к инстансу**.

5. В открывшемся окне укажите виртуальную машину в поле **Выберите инстанс**.
6. Нажмите кнопку **Подключить диск**.

</tabpanel>

<tabpanel>

1. Убедитесь, что клиент OpenStack [установлен](/ru/manage/tools-for-using-services/openstack-cli#1_ustanovite_klient_openstack), и [пройдите аутентификацию](/ru/manage/tools-for-using-services/openstack-cli#3_proydite_autentifikaciyu) в проекте.

2. Выведите список дисков и скопируйте ID диска:

   ```bash
   openstack volume list
   ```

2. Выведите список виртуальных машин и скопируйте ID виртуальной машины, к которой нужно подключить диск:

   ```bash
   openstack server list
   ```

3. Подключите диск:

   ```bash
   openstack server add volume <ID виртуальной машины> <ID диска>
   ```

4. Просмотрите информацию о диске, чтобы проверить результат (поле `attachments`):

   ```bash
   openstack volume show <ID диска>
   ```

</tabpanel>
</tabs>

## Отключение диска от ВМ

<warn>

Для отключения основного (root) диска ВМ используйте опцию [Замена основного (root) диска](#zamena_osnovnogo_root_diska).

</warn>

<tabs>

<tablist>
<tab>Личный кабинет</tab>
<tab>OpenStack CLI</tab>
</tablist>

<tabpanel>

1. [Перейдите](https://msk.cloud.vk.com/app/) в личный кабинет VK Cloud.
2. Откройте страницу с нужным списком дисков.

   - Все диски: перейдите в раздел **Облачные вычисления** → **Диски**.

   - Диски определенной виртуальной машины:

      1. Перейдите в раздел **Облачные вычисления → Виртуальные машины**.
      2. В списке виртуальных машин нажмите на имя ВМ, от которой нужно отключить диск.
      3. На странице ВМ перейдите на вкладку **Диски**.

3. Отключите диск от ВМ одним из способов.

   - Через контекстное меню диска:

      1. Раскройте контекстное меню диска.
      2. Нажмите **Отключить от инстанса**.

   - На странице диска:

      1. Нажмите на имя диска, который нужно отключить от ВМ.
      2. На странице диска перейдите на вкладку **Общая информация**.
      3. Над списком дисков нажмите кнопку **Еще** и выберите **Отключить от инстанса**.

4. В открывшемся окне проверьте название диска и нажмите кнопку **Подтвердить**.

</tabpanel>

<tabpanel>

1. Убедитесь, что клиент OpenStack [установлен](/ru/manage/tools-for-using-services/openstack-cli#1_ustanovite_klient_openstack), и [пройдите аутентификацию](/ru/manage/tools-for-using-services/openstack-cli#3_proydite_autentifikaciyu) в проекте.

2. Выведите список дисков и скопируйте ID диска:

   ```bash
   openstack volume list
   ```

2. Выведите список виртуальных машин и скопируйте ID виртуальной машины, от которой нужно отключить диск:

   ```bash
   openstack server list
   ```

3. Отключите диск:

   ```bash
   openstack server remove volume <ID виртуальной машины> <ID диска>
   ```

4. Просмотрите информацию о диске, чтобы проверить результат (поле `attachments`):

   ```bash
   openstack volume show <ID диска>
   ```

</tabpanel>
</tabs>

## Замена основного (root) диска

Перед заменой основного диска [остановите ВМ](../vm/vm-manage#zapusk_ostanovka_perezagruzka_vm).

<tabs>

<tablist>
<tab>Личный кабинет</tab>
<tab>OpenStack CLI</tab>
</tablist>

<tabpanel>

1. [Перейдите](https://msk.cloud.vk.com/app/) в личный кабинет VK Cloud.
2. [Отключите от ВМ](#otklyuchenie_diska_ot_vm) диск, который будет использован для замены основного.
3. При необходимости [клонируйте](#klonirovanie_diska) целевой диск.
4. Откройте страницу с нужным списком дисков.

   - Все диски: перейдите в раздел **Облачные вычисления → Диски**.

   - Диски определенной виртуальной машины:

      1. Перейдите в раздел **Облачные вычисления → Виртуальные машины**.
      2. В списке виртуальных машин нажмите на имя ВМ, основной диск которой нужно заменить.
      3. На странице ВМ перейдите на вкладку **Диски**.

5. Используйте один из способов, чтобы открыть окно замены диска.

   - Через контекстное меню диска:

      1. Раскройте контекстное меню диска.
      2. Нажмите **Заменить root-диск**.

   - На странице диска:

      1. Нажмите на имя диска, который нужно заменить.
      2. На странице диска перейдите на вкладку **Общая информация**.
      3. Над списком дисков нажмите кнопку **Еще** и выберите **Заменить root-диск**.

6. В открывшемся окне выберите **Новый root-диск** и нажмите кнопку **Заменить**.

   <warn>

   Если нужного диска нет в списке, проверьте, что он [отключен от ВМ](#otklyuchenie_diska_ot_vm).

   </warn>

</tabpanel>

<tabpanel>

1. Убедитесь, что клиент OpenStack [установлен](/ru/manage/tools-for-using-services/openstack-cli#1_ustanovite_klient_openstack), и [пройдите аутентификацию](/ru/manage/tools-for-using-services/openstack-cli#3_proydite_autentifikaciyu) в проекте.

2. Получите [токен доступа](/additionals/cases/case-keystone-token).
3. Просмотрите список виртуальных машин и скопируйте ID виртуальной машины, основной диск которой нужно заменить:

   ```bash
   openstack server list
   ```

3. Просмотрите список дисков:

   ```bash
   openstack volume list --long
   ```

4. Проверьте параметры диска, который выбран на замену основному:

   - Диск отключен от ВМ (`Status`: `available`). Если нет, [отключите диск](#otklyuchenie_diska_ot_vm).
   - Диск является загрузочным (`Bootable`: `true`). Если нет, [сделайте загрузочным](#izmenenie_atributa_zagruzochnyy).

5. Скопируйте ID выбранного диска.
6. Выполните команду для замены основного диска:

   ```bash

   curl -g -i -X POST https://infra.mail.ru:8774/v2.1/servers/<ID виртуальной машины>/action \
   -H "Accept: application/json" \
   -H "Content-Type: application/json" \
   -H "User-Agent: python-cinderclient" \
   -H "X-Auth-Token: <Токен доступа>" \
   -d '{"replaceRoot": {"volume_id": "<ID заменяющего диска>"}}'

   ```

</tabpanel>
</tabs>

## Перемещение дисков между проектами

<tabs>

<tablist>
<tab>OpenStack CLI</tab>
</tablist>

<tabpanel>

1. Убедитесь, что клиент OpenStack [установлен](/ru/manage/tools-for-using-services/openstack-cli#1_ustanovite_klient_openstack), и [пройдите аутентификацию](/ru/manage/tools-for-using-services/openstack-cli#3_proydite_autentifikaciyu) в проекте.

2. Авторизуйтесь в проекте, из которого нужно переместить диск.
3. [Отключите от ВМ](#otklyuchenie_diska_ot_vm) диск, который нужно переместить.
4. Просмотрите список дисков:

   ```bash
   openstack volume list --long
   ```

5. Убедитесь, что диск отключен от ВМ (`Status`: `available`).
6. Скопируйте ID диска.
7. Создайте запрос на перемещение диска:

   ```bash
   openstack volume transfer request create <ID диска>
   ```

8. Скопируйте значения `auth_key` и `id`.
9. Просмотрите список дисков и убедитесь, что статус перемещаемого диска изменился на `awaiting-transfer`:

   ```bash
   openstack volume list
   ```

10. Авторизуйтесь в проекте, в который нужно переместить диск.
11. Переместите диск:

      ```bash
      openstack volume transfer request accept --auth-key <auth_key> <id>
      ```

12. Убедитесь, что диск появился в проекте:

      ```bash
      openstack volume show <ID диска>
      ```

**Дополнительные команды для работы с запросами на перенос диска**

- Просмотреть список запросов на перенос:

   ```bash
   openstack volume transfer request list
   ```

- Удалить запрос на перенос:

   ```bash
   openstack volume transfer request delete <ID запроса>
   ```

</tabpanel>
</tabs>

## Удаление диска

Перед удалением [отключите диск](#otklyuchenie_diska_ot_vm) от ВМ.

<err>

При удалении диска будут удалены все его снимки.

</err>

<tabs>

<tablist>
<tab>Личный кабинет</tab>
<tab>OpenStack CLI</tab>
</tablist>

<tabpanel>

1. [Перейдите](https://msk.cloud.vk.com/app/) в личный кабинет VK Cloud.
2. Откройте страницу с нужным списком дисков.

   - Все диски: перейдите в раздел **Облачные вычисления → Диски**.

   - Диски определенной виртуальной машины:

      1. Перейдите в раздел **Облачные вычисления → Виртуальные машины**.
      2. В списке виртуальных машин нажмите на имя ВМ, диск которой нужно удалить.
      3. На странице ВМ перейдите на вкладку **Диски**.

3. Удалите диск одним из способов.

   - С помощью групповых операций — для нескольких дисков:

      1. Выберите флажками диски, которые нужно удалить.
      2. Над списком дисков нажмите кнопку **Удалить диск**.

   - Через контекстное меню диска:

      1. Раскройте контекстное меню диска.
      2. Нажмите **Удалить диск**.

   - На странице диска:

      1. Нажмите на имя диска, который нужно удалить.
      2. На странице диска перейдите на вкладку **Общая информация**.
      3. Справа над таблицей с параметрами диска нажмите на значок корзины.

4. В открывшемся окне проверьте имя диска и нажмите кнопку **Подтвердить**.

</tabpanel>

<tabpanel>

1. Убедитесь, что клиент OpenStack [установлен](/ru/manage/tools-for-using-services/openstack-cli#1_ustanovite_klient_openstack), и [пройдите аутентификацию](/ru/manage/tools-for-using-services/openstack-cli#3_proydite_autentifikaciyu) в проекте.

2. Выведите список дисков с помощью команды `openstack volume list` и проверьте его статус: если диск подключен к ВМ (`Status`: `in-use`), [отключите его](#otklyuchenie_diska_ot_vm).

3. Скопируйте ID диска.

4. Удалите диск.

   ```bash
      openstack volume delete <ID диска>
   ```

</tabpanel>
</tabs>

## Снимки диска

Снимок диска — это файл, в котором хранится копия диска, сделанная в определенный момент времени. Снимок можно использовать для создания новой виртуальной машины или нового диска.

### Создание снимка

<tabs>

<tablist>
<tab>Личный кабинет</tab>
<tab>OpenStack CLI</tab>
</tablist>

<tabpanel>

1. [Перейдите](https://msk.cloud.vk.com/app/) в личный кабинет VK Cloud.
2. Откройте страницу с нужным списком дисков.

   - Все диски: перейдите в раздел **Облачные вычисления** → **Диски**.

   - Диски определенной виртуальной машины:

      1. Перейдите в раздел **Облачные вычисления** → **Виртуальные машины**.
      2. В списке виртуальных машин нажмите на имя ВМ, снимок диска для которой планируется создать.
      3. На странице ВМ перейдите на вкладку **Диски**.

3. Используйте один из способов, чтобы открыть окно создания снимка диска.

   - Через контекстное меню диска:

      1. Раскройте контекстное меню диска.
      2. Нажмите **Создать снимок**.

   - На странице диска:

      1. Нажмите на имя диска, для которого нужно создать снимок.
      2. На странице диска перейдите на вкладку **Снимки диска**.
      3. Над списком снимков нажмите кнопку **Создать снимок**.

5. В открывшемся окне укажите параметры:

   - **Название снимка диска**.
   - **Исходный диск**.

6. Нажмите **Создать снимок**.

</tabpanel>

<tabpanel>

1. Убедитесь, что клиент OpenStack [установлен](/ru/manage/tools-for-using-services/openstack-cli#1_ustanovite_klient_openstack), и [пройдите аутентификацию](/ru/manage/tools-for-using-services/openstack-cli#3_proydite_autentifikaciyu) в проекте.

2. Выведите список дисков:

   ```bash
   openstack volume list
   ```

3. Скопируйте ID нужного диска.

4. Создайте снимок диска.

   - Если диск отключен от ВМ (`Status`: `available`):

      ```bash
         openstack volume snapshot create --volume <ID диска> <Название снимка>
      ```

   - Если диск подключен к ВМ (`Status`: `in-use`):

      ```bash
         openstack volume snapshot create --force --volume <ID диска> <Название снимка>
      ```

</tabpanel>
</tabs>

### Использование снимков

<tabs>

<tablist>
<tab>Личный кабинет</tab>
<tab>OpenStack CLI</tab>
</tablist>

<tabpanel>

1. [Перейдите](https://msk.cloud.vk.com/app/) в личный кабинет VK Cloud.
2. Откройте страницу с нужным списком дисков.

   - Все диски: перейдите в раздел **Облачные вычисления** → **Диски**.

   - Диски определенной виртуальной машины:

      1. Перейдите в раздел **Облачные вычисления** → **Виртуальные машины**.
      2. В списке виртуальных машин нажмите на имя ВМ.
      3. На странице ВМ перейдите на вкладку **Диски**.

3. Откройте страницу со списком снимков одним из способов:

   - Через контекстное меню диска:

      1. Раскройте контекстное меню диска.
      2. Нажмите **Список снимков**.

   - На странице диска:

      1. Нажмите на имя диска, снимки которого нужно просмотреть.
      2. На странице диска перейдите на вкладку **Снимки диска** или на вкладке **Общая информация** нажмите кнопку **Еще** и выберите **Список снимков**.

4. Раскройте контекстное меню снимка и выберите нужную опцию:

   - **Создать инстанс ВМ** — для перехода на страницу создания виртуальной машины.
   - **Создать диск** — для перехода на страницу создания диска.
   - **Удалить снимок** — для удаления снимка.

      <info>

      Для удаления нескольких снимков выберите снимки флажками и нажмите кнопку **Удалить снимок**.

      </info>

</tabpanel>

<tabpanel>

1. Убедитесь, что клиент OpenStack [установлен](/ru/manage/tools-for-using-services/openstack-cli#1_ustanovite_klient_openstack), и [пройдите аутентификацию](/ru/manage/tools-for-using-services/openstack-cli#3_proydite_autentifikaciyu) в проекте.

2. Выполните нужную команду.

   - Вывести список снимков диска:

      ```bash
      openstack volume snapshot list --volume <ID диска> 
      ```

   - Вывести список снимков дисков всего проекта:

      ```bash
      openstack volume snapshot list --project <ID проекта>
      ```

   - Изменить свойства снимка:

      ```bash
      openstack volume snapshot set <свойство> <ID снимка>
      ```

      Доступные свойства:

     - `--name` — название;
     - `--description` — описание;
     - `--property` — данные в формате ключ=значение;
     - `--no-property` — удалить дополнительные значения.

   - Удалить снимок диска:

      ```bash
      openstack volume snapshot delete <ID снимка>
      ```

</tabpanel>
</tabs>
