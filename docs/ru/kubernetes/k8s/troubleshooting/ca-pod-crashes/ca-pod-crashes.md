При попытке подключения к OpenStack или API Kubernetes под [агента автоматического масштабирования](/ru/kubernetes/k8s/concepts/architecture#vozmozhnosti_masshtabirovaniya_klastera) (Cluster Autoscaler) находится в статусе `CrashLoopBackOff`, из-за чего не проходит аутентификация.

Проблема возникает, если в манифесте пода агента автоматического масштабирования не указаны параметры, требующиеся для аутентификации. Манифест создается автоматически, и отсутствие в нем параметров может быть вызвано различными причинами. Не изменяйте манифест самостоятельно, устраните проблему через техническую поддержку, передав детальную информацию о появляющихся ошибках.

### Решение

1. Выведите логи пода агента автоматического масштабирования в пространстве имен `kube-system`:

   ```console
   kubectl logs <ИМЯ_ПОДА> -n kube-system -p
   ```
1. Проверьте логи на наличие возможных ошибок. 

   - Если у пода в манифесте не указан путь к файлу `cloud-config` или этот файл не существует, в логах будут ошибки следующего вида:

      ```console
      You must provide a password to authenticate
      ```
   - Если у пода указаны некорректные данные для аутентификации, в логах будут ошибки следующего вида:

      ```console
      Authentication failed
      ```
   - Если у пода в манифесте не указан параметр `Service Account: cluster-autoscaler`, в логах будут ошибки следующего вида: 
   
      ```console
      Failed to get nodes from apiserver: nodes is forbidden: User "system:serviceaccount:kube-system:default" cannot list resource "nodes" in API group "" at the cluster scope
      ```   
     
1. Если логи указывают на ошибку с отсутствием параметра `Service Account: cluster-autoscaler`, проведите дополнительную диагностику:
   
   1. Выполните команду, чтобы вывести манифест пода агента автоматического масштабирования:

      ```console
      kubectl describe pod <ИМЯ_ПОДА> -n kube-system
      ```
   1. Проверьте, есть ли в выводе манифеста следующая строка:

      ```console
      Service Account: cluster-autoscaler
      ```
      Если этой строки нет, укажите это в обращении в техническую поддержку.

1. Обратитесь в [техническую поддержку](/ru/contacts) с указанием обнаруженных ошибок. 
