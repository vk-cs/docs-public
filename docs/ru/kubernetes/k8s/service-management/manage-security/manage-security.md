В кластере Cloud Containers вы можете управлять [политиками безопасности](../../concepts/security-policies) через личный кабинет VK Cloud. Это служит альтернативой работе с соответствующими политикам ресурсами [Gatekeeper](../../reference/gatekeeper) напрямую, например, с помощью `kubectl`.

Эта функциональность доступна в кластерах Cloud Containers версий 1.23 и выше. Чтобы получить такие же возможности для более старых кластеров, [обновите](../update) их до актуальной версии.

## Просмотр политик безопасности

1. [Перейдите](https://msk.cloud.vk.com/app/) в личный кабинет VK Cloud.
1. Выберите проект, где находится нужный кластер.
1. Перейдите в раздел **Контейнеры → Кластеры Kubernetes**.
1. Нажмите на имя нужного кластера.
1. Перейдите на вкладку **Безопасность кластера**.

Для политик, перечисленных на этой вкладке, приводится следующая информация:

- Статус политики ([включена или выключена](#vklyuchenie_i_vyklyuchenie_politiki_bezopasnosti)) рядом с ее названием.
- Пространство имен, в рамках которого действует политика (либо все пространства имен, либо конкретное пространство имен).
- Значения [настроек политики](../../concepts/security-policies#dostupnye_politiki_bezopasnosti_i_ih_nastroyki).

В кластере могут существовать несколько одинаковых политик с разными настройками для разных пространств имен.

## Добавление политики безопасности

1. [Перейдите](https://msk.cloud.vk.com/app/) в личный кабинет VK Cloud.
1. Выберите проект, где находится нужный кластер.
1. Перейдите в раздел **Контейнеры → Кластеры Kubernetes**.
1. Нажмите на имя нужного кластера.
1. Перейдите на вкладку **Безопасность кластера**.
1. Нажмите кнопку **Добавить политику безопасности**.
1. Выберите из выпадающего списка политику безопасности.
1. Выберите из выпадающего списка пространство имен, в рамках которого будет применена выбранная политика.

   Конфигурация политик в кластере влияет на то, какие пространства имен можно выбрать при изменении политики:

   - Если политика — единственная в кластере и нет других аналогичных политик, то можно выбрать все пространства имен вместо конкретного пространства имен и наоборот.
   - Если в кластер уже добавлена хотя бы одна аналогичная политика для конкретных пространств имен, то выбрать все пространства имен невозможно.

1. Задайте [настройки политики](../../concepts/security-policies#dostupnye_politiki_bezopasnosti_i_ih_nastroyki).
1. Нажмите кнопку **Добавить политику безопасности**.

   Начнется реконфигурация кластера. Процесс может занять некоторое время.

   Добавленная политика автоматически включится и начнет действовать. Политику можно [выключить](#vklyuchenie_i_vyklyuchenie_politiki_bezopasnosti) после ее создания, если это необходимо.

## Включение и выключение политики безопасности

<warn>

Не рекомендуется выключать [политики безопасности по умолчанию](../../concepts/addons-and-settings/settings#prednastroennye_shablony_i_ogranicheniya_gatekeeper): это снизит безопасность кластера.

VK Cloud не несет ответственность за проблемы с кластером, напрямую или косвенно возникшие из-за указанных действий.

</warn>

Это групповая операция: при необходимости можно включить или выключить сразу несколько политик, выбрав их с помощью флажков.

Вы можете управлять работой отдельных политик в кластере, включая и выключая их:

1. [Перейдите](https://msk.cloud.vk.com/app/) в личный кабинет VK Cloud.
1. Выберите проект, где находится нужный кластер.
1. Перейдите в раздел **Контейнеры → Кластеры Kubernetes**.
1. Нажмите на имя нужного кластера.
1. Перейдите на вкладку **Безопасность кластера**.
1. Выполните одно из действий для нужной политики:

   - Выберите с помощью флажка политику, затем нажмите кнопку **Включить** или **Отключить**.
   - Нажмите ![ ](/ru/assets/more-icon.svg "inline") для политики узлов и выберите пункт **Включить** или **Выключить**.

   Начнется реконфигурация кластера. Процесс может занять некоторое время.

## Редактирование политики безопасности

<warn>

Не рекомендуется редактировать [политики безопасности по умолчанию](../../concepts/addons-and-settings/settings#prednastroennye_shablony_i_ogranicheniya_gatekeeper): это снизит безопасность кластера.

VK Cloud не несет ответственность за проблемы с кластером, напрямую или косвенно возникшие из-за указанных действий.

</warn>

1. [Перейдите](https://msk.cloud.vk.com/app/) в личный кабинет VK Cloud.
1. Выберите проект, где находится нужный кластер.
1. Перейдите в раздел **Контейнеры → Кластеры Kubernetes**.
1. Нажмите на имя нужного кластера.
1. Перейдите на вкладку **Безопасность кластера**.
1. Нажмите ![ ](/ru/assets/more-icon.svg "inline") для нужной политики и выберите пункт **Редактировать**.
1. При необходимости выберите из выпадающего списка другое пространство имен.

   Конфигурация политик в кластере влияет на то, какие пространства имен можно выбрать при изменении политики:

   - Если политика — единственная в кластере и нет других аналогичных политик, то можно выбрать все пространства имен вместо конкретного пространства имен и наоборот.
   - Если в кластер уже добавлена хотя бы одна аналогичная политика для конкретных пространств имен, то выбрать все пространства имен невозможно.

1. При необходимости измените [настройки политики](../../concepts/security-policies#dostupnye_politiki_bezopasnosti_i_ih_nastroyki).
1. Нажмите кнопку **Сохранить**.

   Начнется реконфигурация кластера. Процесс может занять некоторое время.

## Управление синхронизацией политик безопасности с кластером

Вы можете управлять [синхронизацией политик](../../concepts/security-policies#rabota_s_politikami_bezopasnosti_cherez_lichnyy_kabinet) с кластером:

1. [Перейдите](https://msk.cloud.vk.com/app/) в личный кабинет VK Cloud.
1. Выберите проект, где находится нужный кластер.
1. Перейдите в раздел **Контейнеры → Кластеры Kubernetes**.
1. Нажмите на имя нужного кластера.
1. Перейдите на вкладку **Безопасность кластера**.
1. Включите или выключите опцию **Синхронизация всех политик с кластером**. При выключении синхронизации подтвердите операцию.

   По умолчанию синхронизация выключена.

   Не включайте синхронизацию, если вы планируете самостоятельно создавать ограничения или шаблоны Gatekeeper для реализации сторонних политик безопасности. Примеры работы со сторонними политиками безопасности смотрите в разделе [Использование Gatekeeper](../../how-to-guides/gatekeeper).

## Удаление политики безопасности

<warn>

Не рекомендуется удалять [политики безопасности по умолчанию](../../concepts/addons-and-settings/settings#prednastroennye_shablony_i_ogranicheniya_gatekeeper): это снизит безопасность кластера.

VK Cloud не несет ответственность за проблемы с кластером, напрямую или косвенно возникшие из-за указанных действий.

</warn>

Это групповая операция: при необходимости можно удалить сразу несколько политик, выбрав их с помощью флажков.

Чтобы удалить политику:

1. [Перейдите](https://msk.cloud.vk.com/app/) в личный кабинет VK Cloud.
1. Выберите проект, где находится нужный кластер.
1. Перейдите в раздел **Контейнеры → Кластеры Kubernetes**.
1. Нажмите на имя нужного кластера.
1. Перейдите на вкладку **Безопасность кластера**.
1. Выполните одно из действий для нужной политики:

   - Выберите с помощью флажка политику, затем нажмите кнопку **Удалить**.
   - Нажмите ![ ](/ru/assets/more-icon.svg "inline") для политики и выберите пункт **Удалить**.

1. Нажмите кнопку **Подтвердить**.
