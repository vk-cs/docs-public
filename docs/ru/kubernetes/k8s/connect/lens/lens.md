[Lens](https://k8slens.dev/) — это платформа для визуализации и мониторинга Kubernetes кластеров.  Она предоставляет удобный интерфейс для просмотра состояния ресурсов, событий, метрик и других данных, связанных с кластером.

## Подготовительные шаги

1. [Создайте](../../instructions/create-cluster) кластер Kubernetes, к которому нужно подключиться, или выберите нужный кластер из списка в [личном кабинете](https://msk.cloud.vk.com/app/) на странице **Контейнеры → Кластеры Kubernetes**.
1. На хосте, с которого планируется подключаться к кластеру, [установите Lens](https://docs.k8slens.dev/getting-started/install-lens/), если этого еще не сделано.
1. Убедитесь, что [активирован доступ по API](/ru/tools-for-using-services/api/rest-api/enable-api#aktivaciya_dostupa_po_api).
1. Установите плагин `client-keystone-auth` для подключения к кластеру с использованием [Single Sign-On (SSO)](../../concepts/access-management):

   {include(/ru/_includes/_client-keystone-auth.md)}

## Подключение к кластеру

{include(/ru/_includes/_kubeconfig.md)[tags=novariables]}

1. Укажите пароль для доступа к кластеру одним из способов:

   <tabs>
   <tablist>
   <tab>kubeconfig</tab>
   <tab>Временная переменная окружения</tab>
   <tab>Постоянная переменная окружения</tab>
   </tablist>
   <tabpanel>

   Этот способ позволяет указать пароль для подключения к конкретному кластеру.

   Укажите пароль в файле конфигурации кластера:

      1. Откройте файл `kubernetes-cluster-1234_kubeconfig.yaml`.
      1. Снимите комментарий со строк:

         ```yaml
         #- name: "OS_PASSWORD"
         #  value: "put your password here"
         ```
      1. Укажите свой пароль для авторизации в личном кабинете VK Cloud.
   
   </tabpanel>
   <tabpanel>
   
   Этот способ позволяет указать пароль в сессии терминала. Пароль может использоваться к нескольким кластерам, но только на время работы сессии.
   
   Откройте сессию терминала и укажите пароль в консоли:
      
      <tabs>
      <tablist>
      <tab>Windows</tab>
      <tab>Linux</tab>
      </tablist>
      <tabpanel>
   
      ```console
      $env:OS_PASSWORD = "<ПАРОЛЬ>"
      ```
   
      Здесь `<ПАРОЛЬ>` — ваш пароль для авторизации в личном кабинете VK Cloud.

      </tabpanel>
      <tabpanel>

      ```console
      export OS_PASSWORD=<ПАРОЛЬ>
      ```

      Здесь `<ПАРОЛЬ>` — ваш пароль для авторизации в личном кабинете VK Cloud.

      </tabpanel>
      </tabs>
   
   </tabpanel>
   <tabpanel>

   Этот способ позволяет указать пароль в постоянных переменных пользователя. Пароль может использоваться для подключения к нескольким кластерам, независимо от сессии терминала.

      <tabs>
      <tablist>
      <tab>Windows</tab>
      <tab>Linux</tab>
      <tab>MacOS</tab>
      </tablist>
      <tabpanel>

      1. На хосте, с которого планируется подключение к кластеру, откройте **Пуск** → **Параметры**.
      1. Выберите в строке поиска **Изменение переменных среды текущего пользователя**. 
      1. В окне **Переменные среды пользователя** добавьте новую переменную:
   
         - **Имя**: `OS_PASSWORD`;
         - **Значение**: ваш пароль для авторизации в личном кабинете VK Cloud.
   
      </tabpanel>
      <tabpanel>
   
      1. Откройте файл `~/.bashrc`.
      1. Добавьте в файл строку:
      
         ```console
         export OS_PASSWORD=<ПАРОЛЬ> 
         ```

         Здесь `<ПАРОЛЬ>` — ваш пароль для авторизации в личном кабинете VK Cloud.
      
      1. Сохраните изменения.

      </tabpanel>
      <tabpanel>

      1. Откройте файл `.bashrc` или `.zshrc`.
      1. Добавьте в файл строку:

         ```console
         export OS_PASSWORD=<ПАРОЛЬ> 
         ```

         Здесь `<ПАРОЛЬ>` — ваш пароль для авторизации в личном кабинете VK Cloud.
      
      </tabpanel>
      </tabs>

   </tabpanel>
   </tabs>

1. Запустите Lens и перейдите в раздел **Catalog**.

   <warn>

   Если вы добавили пароль во временные переменные окружения, то запускать Lens нужно из той же сессии терминала командой `lens-desktop`.

   </warn>
   
1. Подключитесь к кластеру одним из способов:

   - Если настроена синхронизация с директорией, где хранится kubeconfig, кластер будет автоматически добавлен в список.
   - Если синхронизация не настроена: запустите синхронизацию с kubeconfig и выберите файл, загруженный ранее из личного кабинета VK Cloud. 

После подключения откроется страница кластера.