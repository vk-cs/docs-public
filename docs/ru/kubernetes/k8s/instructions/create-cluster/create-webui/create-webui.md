Далее описывается создание кластера Kubernetes первого поколения из личного кабинета. Рекомендуется [создавать](/ru/kubernetes/k8s/instructions/create-cluster/create-webui-gen-2) кластеры второго поколения: они отличаются улучшенной производительностью и стабильностью.

Также вы можете создать кластер первого поколения [с помощью Terraform](../create-terraform).

{note:warn}

При создании кластера для него будет создан [сервисный балансировщик нагрузки](/ru/networks/balancing/concepts/load-balancer#tipy_balansirovshchikov_nagruzki). Использование балансировщика [тарифицируется](/ru/networks/vnet/tariffication).

{/note}

## Перед созданием кластера

1. Ознакомьтесь с доступными ресурсами и [квотами](/ru/tools-for-using-services/account/concepts/quotasandlimits#k8s) для [региона](/ru/tools-for-using-services/account/concepts/regions), в котором планируется создать кластер. Для разных регионов могут быть настроены разные квоты.

   Если вы хотите увеличить квоты, напишите в [техническую поддержку](/ru/contacts).

1. Запустите мастер создания кластера:

   1. [Перейдите](https://msk.cloud.vk.com/app/) в личный кабинет VK Cloud.
   1. Выберите [проект](/ru/tools-for-using-services/account/concepts/projects), в котором будет размещен кластер.
   1. Перейдите в раздел **Контейнеры** → **Кластеры Kubernetes**.
   1. Нажмите кнопку **Добавить** или **Создать кластер**, если в проекте еще не создано ни одного кластера.
   1. Выберите опцию **Поколение 1** и нажмите кнопку **Продолжить**.

## 1. Настройте кластер

1. Задайте настройки кластера:

   - **Имя кластера**: должно начинаться с буквы. Может состоять только из латинских строчных букв, цифр и дефисов `-` в качестве разделителя.

   - **Тип кластера**:

     - **Стандартный**: все master-узлы кластера будут располагаться в одной [зоне доступности](/ru/start/concepts/architecture#az). Отказоустойчивость обеспечиваетя на уровне зоны.
     - **Региональный**: master-узлы кластера будут располагаться в каждой из трех зон доступности, что позволяет сохранить управление даже при отказе одной из зон. Общее количество master-узлов — 3 или более.

   - **Версия Kubernetes**: выберите одну из доступных [версий Kubernetes](/ru/kubernetes/k8s/concepts/versions/version-support).
   
   - **Зона доступности**: выберите [зону доступности](/ru/start/concepts/architecture#az) для узлов. Для регионального кластера автоматически выбраны все три зоны доступности, изменить выбор нельзя.
   
1. Задайте настройки master-узлов:

   - **Категория виртуальной машины**: выберите [категорию](/ru/computing/iaas/concepts/vm/flavor) предустановленных конфигураций ВМ.

   - **Тип виртуальной машины Master**: [шаблон виртуальной машины](../../../concepts/flavors#shablony_konfiguracii) для master-узлов.

      Шаблоны с высокопроизводительными CPU доступны по запросу в службу поддержки. Подробнее в разделе [Доступные вычислительные ресурсы](../../../concepts/flavors#shablony_konfiguracii).

   - **Тип Master-диска**: [тип хранилища](../../../concepts/storage#supported_storage_types), который будет использоваться узлами. Выбранный тип диска влияет на производительность кластера.

   - **Количество узлов Master**: выберите `1`, `3` или `5` в зависимости от того, насколько отказоустойчивый кластер вы хотите создать. Рекомендуется создавать кластеры с тремя или пятью master-узлами, так как один узел не обеспечивает отказоустойчивость кластера на уровне master-узлов. Для регионального кластера автоматически указано значение `3`, но можно увеличить его до `5`.

     Подробнее о топологиях и возможных конфигурациях кластера в разделе [Архитектура сервиса](../../../concepts/architecture#cluster_topology).

   - **Размер диска на Master‑узле**: чем больше размер диска, тем выше его производительность в некоторых дисковых операциях.

1. Задайте настройки сети:

   - **Сеть**: выберите сеть и подсеть кластера, в которой будут размещаться master- и worker-узлы кластера. Если нужных сети и подсети нет в списке, [создайте](/ru/networks/vnet/instructions/net#sozdanie_seti) их.
       
      {note:info}
       
     Чтобы создать кластер без доступа в интернет, выберите в списке сеть с подключенным [Shadow port](/ru/networks/vnet/concepts/ips-and-inet#shadow_port).
       
      {/note}
       
   - **Использовать сеть Load Balancer**: включите эту опцию, чтобы для создаваемых кластером балансировщиков нагрузки использовалась отдельная подсеть в выбранной сети. Если нужной подсети нет в списке, [создайте](/ru/networks/vnet/instructions/net#sozdanie_podseti) ее.
     
      По умолчанию опция отключена, и балансировщики нагрузки используют ту же подсеть, что и узлы кластера.

   - **Использовать подсеть пода**: включите эту опцию, чтобы задать подсеть, которую будут использовать поды для коммуникации между собой.

      По умолчанию поды используют подсеть `10.100.0.0./16` для коммуникации. Если такая подсеть уже существует в сети кластера, задайте другую подсеть, не входящую в сеть кластера, которую будут использовать поды. Это необходимо, чтобы не было пересечений адресного пространства.

   - **Назначить внешний IP**: включите эту опцию, чтобы API-эндпоинту кластера и предустановленному Ingress-контроллеру (если он выбран на предыдущем шаге) были назначены внешние IP-адреса. В противном случае IP-адреса будут назначены из подсети кластера.

     По умолчанию опция включена, что позволяет получить доступ к кластеру и Ingress-контроллеру из интернета.

1. Задайте прочие настройки:

   - **Доверенные Docker Registry**: добавьте адреса реестров Docker в список доверенных, чтобы при подключении к ним выключить проверку подлинности HTTPS-соединения.

     Это пригодится, если реестр Docker использует самоподписанный SSL- или TLS-сертификат, подлинность которого не может быть подтверждена кластером.

     Подробнее об отключении проверки подлинности в [документации Docker](https://docs.docker.com/registry/insecure/#deploy-a-plain-http-registry), описание настройки `insecure-registries`.

   - **Включить мониторинг**: включите эту опцию, чтобы установить в кластер агент сбора метрик.

     По умолчанию опция включена и позволяет отслеживать состояние кластера, [используя сервис Мониторинг VK Cloud](/ru/monitoring-services/monitoring/instructions/mon-setup-new).

1. Нажмите кнопку **Следующий шаг**.

## 2. Настройте группы узлов

1. Задайте [настройки](../../helpers/node-group-settings) для группы worker-узлов.

1. (Опционально) Добавьте еще одну или несколько групп worker-узлов, нажав кнопку **Добавить группу узлов**, и [настройте](../../helpers/node-group-settings) их.

1. (Опционально) Удалите ненужные группы узлов, нажав кнопку **Удалить группу узлов** под соответствующей группой.

1. Нажмите кнопку **Создать кластер**.

   Начнется создание кластера Kubernetes. Этот процесс может занять длительное время, в зависимости от размеров кластера.

## Что дальше?

- [Настройте окружение](../../../connect) на хосте, с которого планируется подключаться к кластеру.
- [Познакомьтесь со сценариями использования](../../../how-to-guides) кластера.
- [Познакомьтесь с концепциями](../../../concepts) сервиса Cloud Containers.
