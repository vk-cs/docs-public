Данная статья описывает установку стека LAMP на операционную систему семейства Linux - openSUSE 42.3.

Стек LAMP включает в себя операционную систему семейства Linux, веб-сервер Apache, систему управления базами данных MySQL и серверный язык сценариев для обработки динамического контента PHP. Все это необходимо для поддержки динамических сайтов и веб-приложений.

## Как сэкономить время на установке стека LAMP

Вы можете получить готовый стек LAMP на Ubuntu 18.04 в виде [настроенной виртуальной машины VK Cloud](https://mcs.mail.ru/app/services/marketplace/). При регистрации вы получаете бесплатный бонусный счет, которого достаточно, чтобы тестировать сервер несколько дней.

Чтобы узнать больше о LAMP в магазине приложений, перейдите в [Центр помощи](https://mcs.mail.ru/help/quick-start/-lamp-stack-apachephp).

#### Требования

- Операционная система openSUSE версии 42.3.
- Пользователь с доступом к команде sudo.

## Подготовка к установке стека LAMP

Перед установкой стека LAMP:

1.  Откройте окно терминала.
2.  Обновите репозиторий и установочные пакеты, выполнив команду:

```
sudo zypper update
```

В процессе выполнения данной команды введите дополнительный аргумент, отвечающий за метод доверия к подписанному ключу безопасности:

![](./assets/1554622498215-1554622498215-png)

- Если вы по каким-либо причинам хотите отклонить данный ключ и отменить обновление, введите **r**.
- Если вы доверяете данному ключу только на время текущего обновления, введите **t**.
- Если данный ключ будет всегда использоваться при обновлении репозитория или установочных пакетов, введите **a** (в большинстве случаев данный вариант является предпочтительным).

Для запуска обновления, введите **y**:

![](./assets/1554622498495-1554622498495-png)

3.  Установите текстовый редактор Nano, выполнив команду:

```
sudo zypper install nano
```

Чтобы установить редактор, введите **y**.

## Установка и настройка веб-сервера Apache

Чтобы установить и выполнить первичную настройку веб-сервера Apache:

1.  Откройте окно терминала.
2.  Установите веб-сервер Apache, выполнив команду:

```
sudo zypper install apache2
```

Чтобы установить веб-сервер, введите **y**.

3.  Запустите веб-сервер Apache в качестве службы, выполнив команду:

```
sudo systemctl start apache2
```

4.  Чтобы при перезагрузке операционной системы запуск веб-сервера Apache в качестве службы выполнялся автоматически, выполните команду:

```
sudo systemctl enable apache2
```

5.  Для проверки конфигурации веб-сервера Apache выполните команду:

```
sudo apachectl configtest
```

В случае отсутствия ошибок отобразится строка:

```
Syntax OK
```

6.  Для проверки доступа к веб-серверу Apache:

- Создайте файл index.html, выполнив команду:

```
sudo nano /srv/www/htdocs/index.html
```

- В файл index.html добавьте следующие строки:

```
<html> 
<body> 
  <h1> Test access</h1> 
</body> 
</html>
```

- Сохраните изменения в файле, используя сочетание клавиш CTRL+O.
- Завершите редактирование, используя сочетание клавиш CTRL+X.
- Запустите веб-браузер и в адресной строке введите внешний IP-адрес веб-сервера Apache.

Если установка веб-сервера Apache прошла успешно, откроется страница, содержащая следующую строку:

![](./assets/1554625419224-1554625419224-png)

## Установка СУБД MySQL (mariadb)

Чтобы установить и настроить СУБД MySQL:

1.  Откройте окно терминала.
2.  Установите сервер MySQL, выполнив команду:

```
sudo zypper install mariadb mariadb-client mariadb-tools
```

Чтобы установить сервер MySQL, введите **y**.

3.  Чтобы просмотреть справочную информацию, по завершении установки сервера MySQL введите **y**:

![](./assets/1554625522460-1554625522460-png)

4.  Запустите MySQL в качестве службы, выполнив команду:

```
sudo systemctl start mysql.service
```

5.  Чтобы при перезагрузке операционной системы запуск MySQL в качестве службы выполнялся автоматически, выполните команду:

```
sudo systemctl enable mysql.service
```

6.  Для внесения изменений в конфигурацию сервера СУБД MySQL используйте команду:

```
sudo mysql_secure_installation
```

Данная команда запускает сценарий повышения безопасности сервера СУБД MySQL. Для настройки безопасности:

- Укажите пароль для учетной записи root.

<warn>

**Внимание**

Рекомендуется указывать надежный пароль, который содержит не менее 8 символов, включающих по крайней мере одну заглавную букву, одну строчную букву, одну цифру и один специальный символ.

</warn>

Пользователь root в данном случае относится исключительно к СУБД MySQL и не является учетной записью ОС.

- При необходимости удалите анонимные (anonymous) учетные записи, которые создаются при установке СУБД MySQL:
  - Ответьте Y(es) для удаления анонимных учетных записей.
  - Ответьте N(o), если удаление анонимных учетных записей не требуется.

Данные учетные записи предназначены только для тестирования БД и в большинстве случаев могут быть удалены.

- При необходимости запретите предоставление удаленного доступа к базам СУБД MySQL для учетной записи root:
  - Ответьте Y(es) для отключения возможности удаленного доступа.
  - Ответьте N(o), для разрешения удаленного доступа.
- При необходимости удалите тестовую базу (Test):
  - Ответьте Y(es) для удаления базы Test.
  - Ответьте N(o), если удаление базы Test не требуется.

Данная база создается при установке сервера СУБД MySQL и предназначена для тестирования. Удаление базы Test не влияет на работу системы.

- В ответ на запрос на внесение изменений в СУБД MySQL и перезагрузку привилегий доступа к таблицам:
  - Ответьте Y(es) для внесения изменений и перезагрузки.
  - Ответьте N(o), если внесение изменений и перезагрузка не требуются.

## Установка PHP

Для установки PHP:

1.  Откройте окно терминала.
2.  Установите PHP, выполнив команду:

```
sudo zypper install php7 php7-mysql apache2-mod_php7
```

Чтобы установить PHP, введите **y**.

3.  Активируйте модуль PHP, выполнив команду:

```
sudo a2enmod php7
```

4.  Перезагрузите веб-сервер Apache, выполнив команду:

```
sudo systemctl restart apache2
```

5.  Убедитесь, что веб-сервер Apache корректно отображает скрипты PHP. Для этого:

- Создайте файл info.php, выполнив команду:

```
sudo nano /srv/www/htdocs/info.php
```

- В файл info.php поместите текст:

```
<?php
    phpinfo();
?>
```

- Сохраните внесенные изменения, используя сочетание клавиш CTRL+O.
- Завершите редактирование, используя сочетание клавиш CTRL+X.
- В адресной строке браузера к адресу веб-сервера добавьте строку:

```
/info.php
```

В результате должна отобразиться примерно следующая страница:

![](./assets/1554626348295-1554626348295-png)

<warn>

**Внимание**

В целях безопасности после проверки системы рекомендуется удалить файл info.php, выполнив команду:

```
sudo rm /srv/www/htdocs/info.php
```

</warn>

## **Обратная связь**

Возникли проблемы или остались вопросы? [Напишите нам, мы будем рады вам помочь](https://mcs.mail.ru/help/contact-us).
