## Установка

1. Перейдите в раздел «Магазин приложений» → «Сети».
2. Нажмите «Установить».
3. Укажите нужные параметры виртуальной машины — имя приложения, тип виртуальной машины, тип и размер диска, зону доступности.
4. Выберите ключ для доступа по SSH.

<warn>
Убедитесь, что у вас есть ранее созданный и сохраненный на компьютере ключ доступа по SSH. Если такого нет, то выберете «Создать новый ключ». На ваш компьютер скачается файл с расширением *.pem.
</warn>

5. Нажмите «Следующий шаг».
6. Укажите дополнительные параметры конфигурации OpenVPN сервера:

- Логин клиента;
- Маршрутизируемая подсеть;
- Подсеть OpenVPN.

7. Нажмите «Установить».

## Настройка

После установки откроется карточка приложения с параметрами подключения:

- URL доступа к OpenVPN серверу по SSH;
- Пароль клиента;
- Клиентский конфигурационный файл.

<info>

Для безопасности рекомендуем сразу сменить пароль.

</info>

### Подключение к инстансу

Для начала нужно подключиться к инстансу с сервером OpenVPN по SSH. «SSH доступа к Openvpn» указан в параметрах приложения, скопируйте его и выполните команду:

```bash
ssh -i /path/to/key ubuntu@addressofserver
```

### Смена пароля

Для смены пароля существующего пользователя воспользуйтесь командой:

```bash
sudo passwd client_name
```

Далее введите новый пароль дважды.

### Добавление пользователя

Для добавления нового пользователя воспользуйтесь командой:

```bash
sudo useradd newuser
```

Смените пароль командой в пункте выше.

Обязательно добавьте нового пользователя в группу openvpn, выполнив команду:

```bash
sudo usermod -a -G openvpn newuser
```

### Удаление пользователя

Чтобы удалить пользователя, воспользуйтесь командой:

```bash
sudo userdel usertodelete
```

Больше информации по изменению конфигурации OpenVPN сервера [здесь](https://openvpn.net/community-resources/expanding-the-scope-of-the-vpn-to-include-additional-machines-on-either-the-client-or-server-subnet/).

## Использование OpenVPN

Установите приложение OpenVPN-клиент, например, [OpenVPN Connect](https://openvpn.net/vpn-client/).
Инструкции по установке:

- [Windows](https://openvpn.net/client-connect-vpn-for-windows/)
- [MacOS](https://openvpn.net/client-connect-vpn-for-mac-os/)
- [Linux](https://openvpn.net/openvpn-client-for-linux/)

Если вы используете MacOS или Linux, скопируйте значение параметра «Клиентский конфигурационный файл» и сохраните его в директории /etc/openvpn/. Если используете Windows ОС, то сохраните в директории \Program Files\OpenVPN\config\/.

Название файла может быть любым, но обязательно должно иметь постфикс .ovpn, например, mcs_openvpn_client.ovpn.

В этом файле хранится конфигурация OpenVPN клиента, а также содержит:

- сертификат сертификационного центра;
- сертификат клиента;
- ключ клиента;
- ключ шифрования начала сессии.

Для подключения к OpenVPN серверу с данным конфигурационным файлом потребуется ввести логин и пароль.
