VPN позволяет организовать туннель между одной или несколькими подсетями в VK Cloud и внешней сетью клиента. Это может быть полезно в ситуациях, когда нужно:

- подключить сеть компании к облачной сети (например, чтобы иметь доступ к инфраструктуре VK Cloud);
- организовать защищенный канал для управления инфраструктурой VK Cloud (например, для использования telnet совместно с виртуальными машинами).

Сервис VPN основан на [StrongSwan](https://www.strongswan.org) и позволяет организовывать IPsec-туннели. Чтобы связать клиентские подсети и облачные подсети:

1. Подключите к маршрутизатору все облачные сети, к которым нужно организовать доступ через VPN.

1. Настройте для этого маршрутизатора доступ к внешней сети, чтобы появилась возможность использовать его интерфейсы `SNAT`.

1. Пропишите статические маршруты до нужных клиентских подстей для каждой подключенной подсети.

   Пропишите статические маршруты в настройках для каждой облачной подсети, которая должна быть доступна через VPN. Это необходимо, так как VPN VK Cloud получает доступ к клиентским подсетям через интерфейс `SNAT`:

   ```text
   <адрес клиентской подсети 1> - <адрес интерфейса SNAT в облачной подсети>

   ...
   
   <адрес клиентской подсети N> - <адрес интерфейса SNAT в облачной подсети>
   ```

1. Укажите при настройке VPN-подключения в VK Cloud маршрутизатор, за которым находятся облачные подсети, к которым нужно организовать доступ через VPN.

1. Настройте VPN на стороне клиента, принимая во внимание конфигурацию сервера IPsec VPN VK Cloud, который:

   - работает в режиме `main`;
   - поддерживает только авторизацию по pre-shared key;
   - поддерживает ограниченный набор групп Диффи-Хеллмана.
