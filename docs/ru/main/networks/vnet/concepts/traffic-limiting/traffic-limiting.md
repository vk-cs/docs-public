## Использование IP Source Guard

Для портов OpenStack можно указать список IP-адресов, которые будут использоваться [IP Source Guard](http://xgu.ru/wiki/IP_Source_Guard).
Через порт будет отправлен только тот трафик, IP-адрес источника которого содержится в этом списке. Это помогает защититься от атак с подменой IP-адреса.

Например, можно разрешить:

- Только трафик с виртуальной машины, которая использует порт OpenStack.
- Весь трафик, который проходит через виртуальную машину (`0.0.0.0\0`). Это может быть полезно, когда виртуальная машина участвует в обработке трафика и является промежуточным узлом сети (например, роутером, файерволом или VPN-шлюзом).

## Использование файервола и групп безопасности

С помощью файервола можно ограничивать трафик в виртуальных сетях.

Файервол обрабатывает трафик в соответствии с заданными группами безопасности. Эти группы содержат правила обработки входящего и исходящего трафика и работают по принципу «все, что не разрешено, запрещено». Одну или несколько групп безопасности можно назначить:

- в [личном кабинете](https://mcs.mail.ru/app/) VK Cloud (только на порты OpenStack, с которыми связаны виртуальные машины);
- с помощью OpenStack CLI (на любые порты OpenStack).

Можно как создавать свои группы безопасности, так и использовать преднастроенные группы, которые нельзя изменить.

Для корректной работы групп безопасности:

- Либо используйте их в комбинации с группой безопасности `default`, разрешающей любой исходящий трафик.

  Это касается как преднастроенных, так и пользовательских групп безопасности.

- Либо настройте для них не только входящие, но и исходящие правила.

## Преднастроенные группы безопасности

<warn>

Группы **ssh**, **ssh+www** и **all** становятся доступны после [создания виртуальной машины](/ru/base/iaas/instructions/vm/vm-create/) с такими группами.

</warn>

<tabs>
<tablist>
<tab>default</tab>
<tab>ssh</tab>
<tab>ssh+www</tab>
<tab>rdp</tab>
<tab>rdp+www</tab>
<tab>all</tab>
</tablist>
<tabpanel>

Группа безопасности по умолчанию. Эта группа назначается на все создаваемые в рамках сети порты OpenStack, в том числе:

- порты, к которым подключаются виртуальные машины и другие сервисы платформы;
- служебные порты, которые создаются, например, для роутера или балансировщика нагрузки.

<info>

При использовании OpenStack CLI возможно создать порт OpenStack:

- либо с группами безопасности, которые отличаются от группы по умолчанию;
- либо вообще без группы безопасности.

</info>

Разрешены:

- любой исходящий трафик;
- любой входящий трафик в пределах группы безопасности.

</tabpanel>
<tabpanel>

Группа безопасности, разрешающая SSH-трафик.

Разрешен входящий трафик с любых IP-адресов на TCP-порт `22`.

</tabpanel>
<tabpanel>

Группа безопасности, разрешающая SSH- и HTTP(S)-трафик.

Разрешен входящий трафик с любых IP-адресов на TCP-порты:

- `22`
- `80`
- `443`

</tabpanel>
<tabpanel>

Группа безопасности, разрешающая RDP-трафик.

Разрешен входящий трафик с любых IP-адресов на TCP-порт `3389`.

</tabpanel>
<tabpanel>

Группа безопасности, разрешающая RDP- и HTTP(S)-трафик.

Разрешен входящий трафик с любых IP-адресов на TCP-порты:

- `3389`
- `80`
- `443`

</tabpanel>
<tabpanel>

Разрешен любой входящий трафик с любых IP-адресов.

</tabpanel>
</tabs>
