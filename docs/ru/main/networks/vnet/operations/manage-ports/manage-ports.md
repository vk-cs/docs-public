Вы можете управлять портами OpenStack: просматривать порты, добавлять, редактировать и удалять их.

<warn>

- Все перечисленные ниже операции недоступны в сети `ext-net`.
- Нельзя управлять портами устройства `SNAT`.

</warn>

## Просмотр списка портов и информации о них

<tabs>
<tablist>
<tab>Личный кабинет</tab>
<tab>OpenStack CLI</tab>
</tablist>
<tabpanel>

1. Перейдите в [личный кабинет](https://mcs.mail.ru/app/) VK Cloud.
1. Выберите проект и регион.
1. Перейдите в раздел **Виртуальные сети** → **Сети**.
1. Нажмите на имя нужной сети, затем на имя нужной подсети.
1. Перейдите на вкладку **Порты**.

   Будет отображен список портов.

1. Нажмите на имя нужного порта.

   Будет отображена информация о нем.

</tabpanel>
<tabpanel>

1. Убедитесь, что OpenStack CLI [установлен](../../../../base/account/project/cli/setup) и вы можете [авторизоваться](../../../../base/account/project/cli/authorization) в нем.

1. Чтобы посмотреть список всех портов, выполните команду:

   ```bash
   openstack port list
   ```

1. Чтобы посмотреть список всех портов в подсети:

   1. Выполните команду для получения идентификаторов и имен подсетей:

      ```bash
      openstack subnet list
      ```

   1. Выполните команду:

      ```bash
      openstack port list --fixed-ip subnet=<имя или идентификатор подсети>
      ```

1. Чтобы посмотреть подробную информацию о порте, выполните команду, подставив идентификатор или имя порта, полученные ранее:

   ```bash
   openstack port show <идентификатор или имя порта>
   ```

Подробная информация о командах и их аргументах в [справке OpenStack CLI](https://docs.openstack.org/python-openstackclient/latest/cli/command-objects/port.html).

</tabpanel>
</tabs>

## Добавление порта

<tabs>
<tablist>
<tab>Личный кабинет</tab>
<tab>OpenStack CLI</tab>
</tablist>
<tabpanel>

1. Перейдите в [личный кабинет](https://mcs.mail.ru/app/) VK Cloud.
1. Выберите проект и регион.
1. Перейдите в раздел **Виртуальные сети** → **Сети**.
1. Нажмите на имя нужной сети, затем на имя нужной подсети.
1. Перейдите на вкладку **Порты**.
1. Нажмите кнопку **Добавить порт**.
1. Задайте параметры порта:

   - имя порта,
   - (опционально) DNS-имя порта,
   - IP-адрес порта.

1. Нажмите кнопку **Создать порт**.

</tabpanel>
<tabpanel>

1. Убедитесь, что OpenStack CLI [установлен](../../../../base/account/project/cli/setup) и вы можете [авторизоваться](../../../../base/account/project/cli/authorization) в нем.

1. Выполните команду:

   ```bash
   openstack port create <имя порта> --network <имя или идентификатор сети> --fixed-ip subnet=<имя или идентификатор подсети>,ip-address=<IP-адрес порта>
   ```

Подробная информация о команде и ее аргументах в [справке OpenStack CLI](https://docs.openstack.org/python-openstackclient/latest/cli/command-objects/port.html).

</tabpanel>
</tabs>

## Включение или выключение порта

### Включение порта

<tabs>
<tablist>
<tab>Личный кабинет</tab>
<tab>OpenStack CLI</tab>
</tablist>
<tabpanel>

Это групповая операция: при необходимости можно включить сразу несколько выключенных портов, выбрав их с помощью флажков.

1. Перейдите в [личный кабинет](https://mcs.mail.ru/app/) VK Cloud.
1. Выберите проект и регион.
1. Перейдите в раздел **Виртуальные сети** → **Сети**.
1. Нажмите на имя нужной сети, затем на имя нужной подсети.
1. Перейдите на вкладку **Порты**.
1. Выключите порт одним из способов:

   - С помощью флажков:

     1. Выберите с помощью флажка нужный порт.
     1. Нажмите кнопку **Включить порт**.
     1. Подтвердите выполнение операции.

   - С помощью меню:

     1. Раскройте меню нужного порта и выберите пункт **Включить порт**.
     1. Подтвердите выполнение операции.

</tabpanel>
<tabpanel>

1. Убедитесь, что OpenStack CLI [установлен](../../../../base/account/project/cli/setup) и вы можете [авторизоваться](../../../../base/account/project/cli/authorization) в нем.

1. [Получите имя или идентификатор](#posmotret-spisok-portov-i-informaciyu-o-nih) нужного порта.

1. Выполните команду:

   ```bash
   openstack port set <имя или идентификатор порта> --enable
   ```

Подробная информация о команде и ее аргументах в [справке OpenStack CLI](https://docs.openstack.org/python-openstackclient/latest/cli/command-objects/port.html).

</tabpanel>
</tabs>

### Выключение порта

Выключенный порт не пропускает никакой трафик.

<tabs>
<tablist>
<tab>Личный кабинет</tab>
<tab>OpenStack CLI</tab>
</tablist>
<tabpanel>

Это групповая операция: при необходимости можно выключить сразу несколько включенных портов, выбрав их с помощью флажков.

1. Перейдите в [личный кабинет](https://mcs.mail.ru/app/) VK Cloud.
1. Выберите проект и регион.
1. Перейдите в раздел **Виртуальные сети** → **Сети**.
1. Нажмите на имя нужной сети, затем на имя нужной подсети.
1. Перейдите на вкладку **Порты**.
1. Выключите порт одним из способов:

   - С помощью флажков:

     1. Выберите с помощью флажка нужный порт.
     1. Нажмите кнопку **Выключить порт**.
     1. Подтвердите выполнение операции.

   - С помощью меню:

     1. Раскройте меню нужного порта и выберите пункт **Выключить порт**.
     1. Подтвердите выполнение операции.

</tabpanel>
<tabpanel>

1. Убедитесь, что OpenStack CLI [установлен](../../../../base/account/project/cli/setup) и вы можете [авторизоваться](../../../../base/account/project/cli/authorization) в нем.

1. [Получите имя или идентификатор](#posmotret-spisok-portov-i-informaciyu-o-nih) нужного порта.

1. Выполните команду:

   ```bash
   openstack port set <имя или идентификатор порта> --disable
   ```

Подробная информация о команде и ее аргументах в [справке OpenStack CLI](https://docs.openstack.org/python-openstackclient/latest/cli/command-objects/port.html).

</tabpanel>
</tabs>

## Редактирование порта

<tabs>
<tablist>
<tab>Личный кабинет</tab>
<tab>OpenStack CLI</tab>
</tablist>
<tabpanel>

1. Перейдите в [личный кабинет](https://mcs.mail.ru/app/) VK Cloud.
1. Выберите проект и регион.
1. Перейдите в раздел **Виртуальные сети** → **Сети**.
1. Нажмите на имя нужной сети, затем — на имя нужной подсети.
1. Перейдите на вкладку **Порты**.
1. Раскройте меню нужного порта и выберите пункт **Редактировать**.
1. Задайте параметры порта:

   - имя порта,
   - DNS-имя порта,
   - IP-адрес порта.

1. Нажмите кнопку **Сохранить изменения**.

</tabpanel>
<tabpanel>

1. Убедитесь, что OpenStack CLI [установлен](../../../../base/account/project/cli/setup) и вы можете [авторизоваться](../../../../base/account/project/cli/authorization) в нем.

1. [Получите имя или идентификатор](#posmotret-spisok-portov-i-informaciyu-o-nih) нужного порта.

1. Измените параметры порта:

   - Имя порта:

     ```bash
     openstack port set <имя или идентификатор порта> --name <новое имя>
     ```

   - DNS-имя порта:

     ```bash
     openstack port set <имя или идентификатор порта> --dns-name <новое доменное имя>
     ```

   - IP-адрес порта:

     ```bash
     openstack port set <имя или идентификатор порта> --no-fixed-ip --fixed-ip subnet=<имя или идентификатор подсети>,ip-address=<новый IP-адрес порта>
     ```

Подробная информация о командах и их аргументах в [справке OpenStack CLI](https://docs.openstack.org/python-openstackclient/latest/cli/command-objects/port.html).

</tabpanel>
</tabs>

## Настройка IP Source Guard для порта

Этот механизм позволяет разрешать выход с порта только того трафика, для которого IP-адрес источника содержится в списке `allowed-address`.

<tabs>
<tablist>
<tab>OpenStack CLI</tab>
</tablist>
<tabpanel>

1. Убедитесь, что OpenStack CLI [установлен](../../../../base/account/project/cli/setup) и вы можете [авторизоваться](../../../../base/account/project/cli/authorization) в нем.

1. [Получите имя или идентификатор](#posmotret-spisok-portov-i-informaciyu-o-nih) нужного порта.

1. Чтобы добавить один IP-адрес источника, выполните команду:

   ```bash
   openstack port set <имя или идентификатор порта> --allowed-address ip-address=<IP-адрес>
   ```

   Если необходимо добавить еще несколько IP-адресов, повторите эту команду для каждого из них.

1. Чтобы удалить один IP-адрес источника, выполните команду:

   ```bash
   openstack port unset <имя или идентификатор порта> --allowed-address ip-address=<IP-адрес>
   ```

   Если необходимо удалить еще несколько IP-адресов, повторите эту команду для каждого их них.

Подробная информация о командах и их аргументах в [справке OpenStack CLI](https://docs.openstack.org/python-openstackclient/latest/cli/command-objects/port.html).

</tabpanel>
</tabs>

## Удаление порта

<info>

Невозможно удалить порт, если он используется маршрутизатором.

</info>

<tabs>
<tablist>
<tab>Личный кабинет</tab>
<tab>OpenStack CLI</tab>
</tablist>
<tabpanel>

Это групповая операция: при необходимости можно удалить сразу несколько портов, выбрав их с помощью флажков.

1. Перейдите в [личный кабинет](https://mcs.mail.ru/app/) VK Cloud.
1. Выберите проект и регион.
1. Перейдите в раздел **Виртуальные сети** → **Сети**.
1. Нажмите на имя нужной сети, затем на имя нужной подсети.
1. Перейдите на вкладку **Порты**.
1. Удалите порт одним из способов:

   - С помощью флажков:

     1. Выберите с помощью флажка нужный порт.
     1. Нажмите кнопку **Удалить порт**.
     1. Подтвердите выполнение операции.

   - С помощью меню:

     1. Раскройте меню нужного порта и выберите пункт **Удалить порт**.
     1. Подтвердите выполнение операции.

</tabpanel>
<tabpanel>

1. Убедитесь, что OpenStack CLI [установлен](../../../../base/account/project/cli/setup) и вы можете [авторизоваться](../../../../base/account/project/cli/authorization) в нем.

1. [Получите имя или идентификатор](#posmotret-spisok-portov-i-informaciyu-o-nih) нужного порта.

1. Выполните команду:

   ```bash
   openstack port delete <имя или идентификатор порта>
   ```

Подробная информация о команде и ее аргументах в [справке OpenStack CLI](https://docs.openstack.org/python-openstackclient/latest/cli/command-objects/port.html).

</tabpanel>
</tabs>
