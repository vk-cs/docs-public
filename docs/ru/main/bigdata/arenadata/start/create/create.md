Создание кластера Arenadata Hadoop включает в себя следующие шаги:

1. Выбор версии дистрибутива Arenadata Hadoop.
2. Настройка сетевой конфигурации кластера и выбор устанавливаемых компонентов дистрибутива Arenadata Hadoop.
3. Настройка виртуального аппаратного обеспечения нод кластера.
4. Выбор компонентов, устанавливаемых на ноды кластера.
5. Настройка доступа к выбранным компонентам кластера Arenadata Hadoop.

## Выбор версии дистрибутива Arenadata Hadoop

Для создания кластера Arenadata Hadoop перейдите в раздел «Большие данные» → «Кластеры». Нажмите «Добавить кластер».

При нажатии на кнопку в окне откроется конфигуратор кластера, состоящий из нескольких этапов, в результате определяющий параметры создаваемого кластера.

На всех этапах конфигуратор информирует о стоимости создаваемого кластера, дополнительных возможностях, а также позволяет обратиться в поддержку в случае возникновения вопросов.

На первом этапе создания, необходимо выбрать желаемую конфигурацию кластера. Преднастроенные типы сред отличаются параметрами масштабирования и активированными расширениями:

- ADH Community
- ADH Enterprise

Подробнее о различиях между Community и Enterprise версиями можно узнать из [статьи](../../bigdata/arenadata/concepts/enterprise).

После выбора нажмите «Следующий шаг» для перехода к настройке сетевой конфигурации кластера и выбора устанавливаемых компонентов дистрибутива Arenadata Hadoop.

## Настройка сетевой конфигурации и выбор компонентов

На этом этапе создания, необходимо указать некоторые параметры кластера. Мастер создания отражает следующие поля конфигурации:

| Параметр | Описание |
| --- | --- |
| Имя кластера | Отображаемое имя кластера. Также задает hostname в ОС. |
| Зона доступности	| Выбор датацентра, где будет запущен инстанс. |
| Сеть | Создание кластера в существующей сети или создать новую. |
| Назначить внешний IP | Назначает плавающий IP. |
| Настройка кластера | Выбор компонентов ADH для установки на кластер. Доступен выбор из преднастроенных шаблонов, либо выбор компонентов вручную. Рекомендуется выбрать один из преднастроенных шаблонов настройки кластера, подходящий для вашей работы. Во время дальнейшей настройки будет предоставлена возможность поменять список компонентов более гибко.|

<warn>

Для некоторых шаблонов необходимо наличие доступа к специальному флейвору виртуальных машин. Для получения доступа, обратитесь в [службу поддержки](/ru/contacts).

</warn>

После выбора нажмите «Следующий шаг» для перехода к настройке виртуального аппаратного обеспечения нод кластера.

## Настройка виртуального аппаратного обеспечения кластера

На этом этапе создания, необходимо указать некоторые параметры нод кластера. Мастер создания отражает следующие поля конфигурации:

| Поле           | Описание |
|--------------------------------------|----------------------------------------|
| Тип инстанса        | Конфигурация узла — количество CPU и оперативной памяти. |
| Количество узлов  | Количество машин. Указывается отдельно для узлов Master и Worker. |
| Количество дисков на один узел | Количество дисков на узле. Задаётся отдельно для каждого узла. Максимальное значение — 8. |
| Размер диска | Объем диска на узлах. Предельные значения — от 500 до 2000 Гб. |
| Тип диска  | Тип дисков (HDD/SSD). |
| Подключить monitoring-узел | Подключить Arenadata Monitoring bundle. Подробнее о функциональности можно узнать на [сайте Arenadata](https://docs.arenadata.io/mon/ru/index.html). |
| Подключить edge-узел | Подключить узел с UI сервисов, добавленных на кластер. |
| HA Cluster | Подключение High-Availability кластера. Данная услуга производится в ручном режиме специалистами техподдержки VK Cloud. Запрос производится в [чате техподдержки](/ru/contacts). |
| Автомасштабирование дисков | Включение функции автоматического расширения дискового пространства на узлах кластера. |

После выбора, нажмите «Следующий шаг» для перехода к выбору компонентов, устанавливаемых на ноды кластера.

## Выбор компонентов для нод кластера Arenadata Hadoop

На этом этапе создания предоставляется опция гибкой настройки компонентов, которые будут установлены на кластер.

Если на предыдущих шагах вы выбрали шаблон с предустановленным списком компонентов, здесь можно увидеть детали о том, какие именно модули будут установлены.

Также существует возможность вручную выбрать компоненты, устанавливаемые на узлы. Для этого выберите «Продвинутая» среди вариантов установки компонентов, а затем перетащите необходимые компоненты из списка справа на узлы вашей конфигурации Arenadata Hadoop.

После выбора нажмите «Следующий шаг» для перехода к настройке доступа к кластеру.

## Настройка доступа к компонентам кластера Arenadata Hadoop

На этом этапе создания задаются пароли, которые будут использоваться для получения доступа при подключении к кластеру.

Список настроек зависит от списка компонентов, которые вы выбрали для установки на кластер. Однако, пароли для Airflow DB Root и Airflow DB обязательны для любых конфигураций кластера. Пароль для SQL возможно поменять только через edge-узел.

Заполнив все настройки, нажмите «Создать кластер» для создания кластера.
