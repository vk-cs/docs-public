Для авторизации в платформе VK Cloud используется токен доступа. Он передается в параметре каждого API-запроса.

Есть два способа получения токена доступа:

- OAuth — генерация пары токенов: токена доступа и токена обновления (`refresh token`).
- Сервисный токен — генерация токена, не ограниченного по времени использования.

<warn>

Чтобы повысить безопасность аккаунта, используйте OAuth-токены. Для авторизации с помощью OAuth используется пара токенов вместо одного, и токен доступа действителен только час.

</warn>

## Получение OAuth-токенов

1. [Перейдите](https://mcs.mail.ru/app/) в личный кабинет VK Cloud.
1. Выберите [проект](../../../../../base/account/concepts/projects).
1. Перейдите в раздел **AI API** → **Vision API**. Откроется страница с информацией, необходимой для получения токенов:
   - **OAuth endpoint**: адрес для запросов на получение OAuth-токенов;
   - **OAuth Идентификатор клиента**: идентификатор аккаунта, который необходимо передать в параметре `client_id` запроса;
   - **OAuth Секретный ключ**: ключ, который необходимо передать в `client_secret` параметре запроса.
1. Сгенерируйте токены:

   ```bash
   curl -X POST --location 'https://mcs.mail.ru/auth/oauth/v1/token' \
   --header 'Content-Type: application/json' \
   --data '{
   "client_id":"<OAuth Идентификатор клиента>",
   "client_secret": "<OAuth Секретный ключ>",
   "grant_type":"client_credentials"
   }'
   ```

В ответе сервера будут два токена:

- `access_token`: токен доступа для использования в API-запросах к сервису. Он может быть использован многократно, но действителен в течение одного часа. Когда время жизни токена истечет, необходимо будет сгенерировать новый. В проекте одновременно активными могут быть не более 25 токенов доступа.
- `refresh_token`: токен обновления для генерации нового токена доступа. В проекте одновременно активными могут быть не более 25 токенов обновления. Каждый токен обновления может сгенерировать любое количество токенов доступа, но не более 25 единовременно активных.

<warn>

Сохраните токен обновления (`refresh_token`). Если он утерян, восстановить его будет невозможно.

</warn>

### Обновление токена доступа

Чтобы сгенерировать новый токен доступа с помощью токена обновления, выполните команду:

```bash
curl -X POST --location 'https://mcs.mail.ru/auth/oauth/v1/token' \
--header 'Content-Type: application/json' \
--data '{
"client_id":"<OAuth Идентификатор клиента>",
"refresh_token":"<токен обновления>",
"grant_type":"refresh_token"
}'
```

Здесь `client_id` и `refresh_token` получены на этапе генерации [OAuth-токенов](../auth-vision#poluchenie_oauth_tokenov).

## Получение  сервисного токена

1. [Перейдите](https://mcs.mail.ru/app/) в личный кабинет VK Cloud.
1. Выберите [проект](../../../../../base/account/concepts/projects).
1. Перейдите в раздел **AI API** → **Vision API**.
1. Нажмите **Добавить сервисный токен**.
1. В открывшемся окне выберите тип задач, для которых будет использоваться токен.
1. Нажмите **Создать**. Новый токен появится в списке сервисных токенов.
