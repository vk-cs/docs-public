<warn>

Перед выполнением любой операции с кластером из Terraform ознакомьтесь с информацией в разделе [Использование Terraform](../helpers/terraform-howto#osobennosti-ispolzovaniya-terraform-dlya-upravleniya-servisom-konteynerov).

</warn>

## Запустить или остановить кластер

### Запустить кластер

<tabs>
<tablist>
<tab>Личный кабинет</tab>
</tablist>
<tabpanel>

Это групповая операция: при необходимости можно запустить сразу несколько остановленных кластеров, выбрав их с помощью флажков.

Для запуска кластера:

1. Перейдите в [личный кабинет](https://mcs.mail.ru/app/) VK Cloud.
1. Выберите проект и регион, где находится нужный кластер.
1. Перейдите в раздел **Контейнеры** → **Кластеры Kubernetes**.
1. Выберите с помощью флажка нужный кластер.
1. Нажмите кнопку **Запустить**.
1. Подтвердите выполнение операции.

</tabpanel>
</tabs>

### Остановить кластер

<tabs>
<tablist>
<tab>Личный кабинет</tab>
</tablist>
<tabpanel>

Это групповая операция: при необходимости можно остановить сразу несколько активных кластеров, выбрав их с помощью флажков.

Для остановки кластера:

1. Перейдите в [личный кабинет](https://mcs.mail.ru/app/) VK Cloud.
1. Выберите проект и регион, где находится нужный кластер.
1. Перейдите в раздел **Контейнеры** → **Кластеры Kubernetes**.
1. Выберите с помощью флажка нужный кластер.
1. Нажмите кнопку **Остановить**.
1. Подтвердите выполнение операции.

</tabpanel>
</tabs>

## Получить информацию о кластере

Для запущенного и остановленного кластеров доступна разная информация. Terraform позволяет получить только часть информации о кластере.

<tabs>
<tablist>
<tab>Личный кабинет</tab>
<tab>Terraform</tab>
</tablist>
<tabpanel>

1. Перейдите в [личный кабинет](https://mcs.mail.ru/app/) VK Cloud.
1. Выберите проект и регион, где находится нужный кластер.
1. Перейдите в раздел **Контейнеры** → **Кластеры Kubernetes**.
1. Нажмите на имя нужного кластера. Откроется страница с информацией.

   Общие данные о кластере и журнал событий доступны на соответствующей вкладке в начале страницы. Информация о подключении к кластеру и управлению им доступна на соответствующей вкладке в конце страницы.

</tabpanel>
<tabpanel>

1. Выполните команду:

   ```bash
   terraform state show vkcs_kubernetes_cluster.<имя ресурса кластера в файле конфигурации Terraform>
   ```

1. Посмотрите доступную информацию в выводе команды.

</tabpanel>
</tabs>

## Получить реквизиты для подключения к кластеру

Доступные реквизиты:

- файл конфигурации `kubectl`;
- секрет для Kubernetes Dashboard (его можно получить только когда кластер запущен).

Операции по получению этих реквизитов подробно описаны в разделе [Подключение к кластеру](../../connect/).

## Инвалидировать ключевую пару кластера

При создании кластеров версий 1.22.9 и ниже можно указать ключевую пару для подключения к хостам кластера напрямую.

Если приватная часть указанной ключевой пары была скомпрометирована или утеряна, то можно отозвать ключевую пару кластера, выполнив процедуру инвалидации.

Операцию можно выполнить только когда кластер запущен.

<warn>

После выполнения этой операции существующие публичные ключи на кластере будут удалены.

</warn>

<tabs>
<tablist>
<tab>Личный кабинет</tab>
</tablist>
<tabpanel>

1. Перейдите в [личный кабинет](https://mcs.mail.ru/app/) VK Cloud.
1. Выберите проект и регион, где находится нужный кластер.
1. Перейдите в раздел **Контейнеры** → **Кластеры Kubernetes**.
1. Раскройте меню нужного кластера и выберите пункт **Инвалидировать**.
1. В появившемся окне выполните одно из действий:
   - загрузите публичную часть новой ключевой пары, если вы создали ее самостоятельно;
   - создайте новую ключевую пару средствами сервиса;
   - выберите другую существующую ключевую пару.

</tabpanel>
</tabs>

## Изменить тип виртуальной машины для master-узлов

Эта операция подробно описана в разделе [Масштабирование узлов кластера](../scale/).

Операцию можно выполнить только когда кластер запущен.

## Удалить кластер

<tabs>
<tablist>
<tab>Личный кабинет</tab>
</tablist>
<tabpanel>

Это групповая операция: при необходимости можно удалить сразу несколько кластеров, выбрав их с помощью флажков.

Для удаления кластера:

1. Перейдите в [личный кабинет](https://mcs.mail.ru/app/) VK Cloud.
1. Выберите проект и регион, где находится нужный кластер.
1. Перейдите в раздел **Контейнеры** → **Кластеры Kubernetes**.
1. Выполните одно из действий для нужного кластера:
   - Выберите с помощью флажка кластер, затем нажмите кнопку **Удалить**.
   - Раскройте меню кластера и выберите пункт **Удалить кластер**.
1. В появившемся окне:
   1. Выберите соответствующую опцию, если необходимо удалить кластер вместе с его дисками.
   1. Нажмите кнопку **Удалить кластер**.

</tabpanel>
</tabs>
