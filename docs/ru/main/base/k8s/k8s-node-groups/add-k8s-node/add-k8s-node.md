## Описание

Нод-группа — это множество нод, созданных на базе выбранного шаблона виртуальной машины.

Можно создать несколько нод-групп, основанных на разных шаблонах, для решения разных задач. Например, можно создать нод-группу на базе высокопроизводительных виртуальных машин для размещения ресурсоемких контейнеров.

## Как добавить нод-группу

<warn>

Кластеры старых версий (1.15.3 и ниже) не поддерживаются, а также не получают обновления.

Вместо добавления нод-групп в кластер старой версии, рекомендуется создать новый кластер актуальной версии.

</warn>

Нод-группу можно добавить несколькими способами:

1. При [создании кластера Kubernetes](../../k8s-clusters/create-k8s) сразу добавить требуемое количество нод-групп.
1. Добавить нод-группу в уже существующий кластер Kubernetes:

   1. Откройте [панель VK Cloud](https://mcs.mail.ru/app/).
   1. Перейдите в раздел «Контейнеры» → «Кластеры Kubernetes».
   1. Найдите в списке нужный кластер.
   1. В контекстном меню кластера выберите пункт «Добавить группу узлов».
   1. В появившемся диалоговом окне задайте значения параметров:

      1. **Название группы**.
      1. **Тип Node-узлов**: шаблон виртуальной машины, который будет использоваться для узлов в нод-группе.

         <info>

         Если требуются шаблоны с высокопроизводительными CPU, то в этом выпадающем меню можно выбрать опцию «Показывать только высокопроизводительные CPU».
         Для того чтобы разблокировать возможность пользоваться этой опцией, обратитесь в [службу поддержки](/contacts).

         </info>

      1. **Зона доступности**.
      1. **Тип диска**: выберите тип диска с производительностью, достаточной для единичной ноды.

         <info>

         Рекомендуется для [хранения данных на подах](../../k8s-pvc) использовать постоянные хранилища Kubernetes (Persistent Volume, PV) вместо использования дисков ноды.
         Конфигурация хранилища на PV устойчива к выходу ноды из строя.

         </info>

      1. **Размер диска**.
      1. **Количество узлов Node**.

         Этот параметр можно [изменить позднее](../../k8s-node-groups/change-k8s-node) после создания нод-группы.

      1. **Включить автомасштабирование**: включите эту опцию, чтобы создаваемая нод-группа могла [автоматически масштабироваться](../../k8s-clusters/k8s-scale/scale-k8s) в зависимости от нагрузки.

         При включенной опции становятся доступны следующие параметры:

         1. **Минимальное количество узлов**: число, ниже которого количество нод не опустится. Не может быть больше значения параметра **Количество узлов Node**.
         1. **Максимальное количество узлов**: число, выше которого количество нод не поднимется.

         Параметры автомасштабирования можно [изменить позднее](../../k8s-node-groups/change-k8s-node) после создания нод-группы.

      1. **Процент недоступных нод при обновлении кластера**: процент узлов, которые допустимо временно выводить из эксплуатации при обновлении кластера, которое [проводится поэтапно](../../k8s-clusters/update-k8s) по схеме rolling upgrade.

         Например, пусть в нод-группе есть четыре узла, и задан процент в 50%. Во время обновления сначала будут выведены из эксплуатации и обновлены два узла, затем, после возвращения обновленных узлов в работу — оставшиеся два.

      1. При необходимости добавьте [Kubernetes Labels и Taints](labels-and-taints).

   1. Нажмите кнопку «Добавить группу узлов».

      Запустится добавление нод-группы в кластер. Эта операция может занять длительное время.
