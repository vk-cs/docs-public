<warn>

Прежде всего убедитесь, что вы [установили Terraform](/ru/additionals/terraform/quick-start/preparation) и [создали файл main.tf](/ru/additionals/terraform/quick-start/configuration) с необходимыми провайдерами.

</warn>

### Создание тома диска

Чтобы создать том диска, создайте файл `volume.tf`, где будет описана конфигурация создаваемого тома. Добавьте текст из примеров ниже, и исправьте значения настроек для вашего тома. В данном примере описывается создание тома диска размером 1 Гб типа `ceph-ssd` в зоне доступности `GZ1`.

Для создания тома диска нам потребуются следующие объекты:

- Ресурсы (resource):

  - **vkcs_blockstorage_volume** — Предоставляет ресурс тома блочного хранилища. Можно использовать для создания, изменения и удаления тома блочного хранилища. Содержит следующие ресурсы:

    - **name** — Название тома.
    - **description** — Описание тома
    - **metadata** — Карта значений ключей для метаданных тома.
    - **size** — (обязателен) Размер тома.
    - **availability_zone** — (обязателен) Название зоны доступности ЦОД, хранящих том.
    - **volume_type** — (обязателен) Тип тома.

```hcl
resource "vkcs_blockstorage_volume" "volume" {
  name = "volume"
  description = "test volume"
  metadata = {
    foo = "bar"
  }
  size = 1
  availability_zone = "GZ1"
  volume_type = "ceph-ssd"
}
```

#### Применение изменений

Добавьте пример в файл `volume.tf` и выполните следующие команды:

```bash
terraform init
```
```bash
terraform apply
```

### Создание снимка состояния (snapshot)

Чтобы создать снимок состояния тома диска, создайте файл `snapshot.tf`, где будет описана конфигурация создаваемого снепшота. Добавьте текст из примеров ниже, и исправьте значения настроек для вашей инфраструктуры. В данном примере описывается создание снимка состояния тома диска с `id` ресурса `vkcs_blockstorage_volume.volume.id`.

Для создания снепшота тома диска нам потребуются следующие объекты:

- Ресурсы (resource):

  - **vkcs_blockstorage_snapshot** — Предоставляет ресурс снимка состояния блочного хранилища. Можно использовать для создания, изменения и удаления снимка состояния тома блочного хранилища. Содержит следующие ресурсы:

    - **volume_id** — (Обязателен) ID тома, для которого будет создан снимок состояния.
    - **name** — Имя снимка состояния.
    - **description** — Описание снимка состояния.
    - **metadata** — Карта значений ключей для метаданных тома.

```hcl
resource "vkcs_blockstorage_snapshot" "snapshot" {
  volume_id = "${vkcs_blockstorage_volume.volume.id}"
  name = "snapshot"
  description = "test snapshot"
  metadata = {
    foo = "bar"
  }
}
```

#### Применение изменений

Добавьте обе части примера в файл `snapshot.tf` и выполните следующие команды:

```bash
terraform init
```
```bash
terraform apply
```
