Рекомендуемый способ подключения к виртуальной машине Windows – по протоколу RDP (Remote Desktop Protocol).

## 1. Проверьте возможность подключения по RDP

Убедитесь, что выполняются следующие условия:

- виртуальная машина запущена и процесс загрузки ОС завершился;
- в настройках сети ВМ разрешен удаленный доступ по протоколу RDP (TCP-порт `3389`);
- у ВМ есть внешний («плавающий») IP-адрес, доступный для подключения.

   <info>

   Внешний IP-адрес ВМ можно посмотреть в [личном кабинете](https://mcs.mail.ru/app/) VK Cloud в разделе **Облачные вычисления → Виртуальные машины**.

   </info>

Вместо внешнего IP-адреса можно использовать полное доменное имя виртуальной машины (FQDN). Для подключения по полному доменному имени требуются правильно настроенные DNS-записи.

<info>

VK Cloud предоставляет [DNS-серверы](/networks/dns/publicdns), на которые вы можете делегировать свой домен.

</info>

Если подключение к виртуальной машине по RDP невозможно или недоступно, используйте [VNC-консоль](../../vm-console#vnc-konsol).

## 2. Подготовьте учетные данные

Для подключения к ВМ по RDP нужно знать имя пользователя операционной системы и пароль.

На платформе VK Cloud при создании виртуальной машины Windows в операционной системе создается пользователь с именем `Admin` и сгенерированным паролем. Используйте это имя пользователя и пароль, если ВМ была создана в приватной сети. Если ВМ была создана в сети `ext-net`, перед первым подключением [установите новый пароль](../../vm-manage#ustanovka-i-izmenenie-parolya).

В случае если пароль был утрачен, [сбросьте](../../vm-manage#ustanovka-i-izmenenie-parolya) или [восстановите](../../vm-manage#vosstanovlenie-parolya) его.

## 3. Подключитесь к ВМ

<tabs>
<tablist>
<tab>Linux</tab>
<tab>macOS</tab>
<tab>Windows</tab>
</tablist>
<tabpanel>

В Linux для подключения по RDP используйте утилиту Remmina.

1. Скачайте и установите клиент Remmina:

   ```bash
   sudo apt-add-repository ppa:remmina-ppa-team/remmina-next
   sudo apt-get update
   sudo apt-get install remmina remmina-plugin-rdp libfreerdp-plugins-standard
   ```

2. Запустите клиент Remmina.
3. Создайте новое подключение:

   1. В окне приложения выберите протокол: `RDP`.
   2. Нажмите кнопку **New connection profile**.
   3. В открывшемся окне укажите параметры:

      - **Name**: название подключения (например, имя ВМ).
      - **Server**: внешний IP-адрес или полное доменное имя виртуальной машины.
      - **Username**: `<Имя пользователя>`.
      - **Password**: `<Пароль>`.

4. Нажмите кнопку **Save and Connect** для подключения к ВМ. Новое подключение при этом сохранится в списке.

</tabpanel>
<tabpanel>

В macOS для подключения по RDP используйте программу Microsoft Remote Desktop. Укажите параметры подключения вручную или с помощью файла конфигурации RDP.

Чтобы получить файл конфигурации RDP:

1. Перейдите в [личный кабинет](https://mcs.mail.ru/app/) VK Cloud.
2. Перейдите в раздел **Облачные вычисления → Виртуальные машины**.
3. Выберите нужную ВМ и перейдите на вкладку **Windows** внизу страницы.
4. Нажмите кнопку **Скачать конфиг RDP**.

Подключитесь к виртуальной машине:

1. Установите и запустите Microsoft Remote Desktop.
2. Создайте новое подключение.

   - Вручную:

      1. В окне приложения нажмите кнопку **Add PC**.
      2. Укажите параметры нового подключения:
         - **PC name**: внешний IP-адрес или полное доменное имя виртуальной машины.
         - **User account**: выберите **Add User Account** и укажите учетные данные:
            - **Username**: `<Имя пользователя>`.
            - **Password**: `<Пароль>`.
      3. Нажмите кнопку **Add** — новое подключение появится в списке.

   - С помощью файла конфигурации:

      1. В окне приложения в верхнем выпадающем меню выберите **Import from RDP file**.
      2. Выберите файл конфигурации и нажмите кнопку **Import**.

3. Найдите новое подключение в списке и дважды кликните на него, чтобы подключиться к ВМ.

</tabpanel>
<tabpanel>

Для подключения по RDP укажите параметры подключения вручную или с помощью файла конфигурации RDP.

<details>
<summary>Как получить файл конфигурации RDP для ВМ VK Cloud</summary>

1. Перейдите в [личный кабинет](https://mcs.mail.ru/app/) VK Cloud.
2. Перейдите в раздел **Облачные вычисления → Виртуальные машины**.
3. Нажмите на имя нужной ВМ, чтобы перейти на страницу ВМ.
3. Перейдите на вкладку **Общая информация** и выберите вкладку **Windows** внизу страницы.
4. Нажмите кнопку **Скачать конфиг RDP**.

</details>

Подключитесь к виртуальной машине:

1. Нажмите **Пуск → Подключение к удаленному рабочему столу**.
2. Установите подключение.

   - Вручную:

      1. В поле **Компьютер** введите IP-адрес или полное доменное имя виртуальной машины.
      2. Нажмите кнопку **Подключить**.
      3. В открывшемся окне введите учетные данные:

         - **Имя пользователя**: `<Имя пользователя>`.
         - **Пароль**: `<Пароль>`.

      4. Нажмите кнопку **ОК**.

   - С помощью файла конфигурации:

      1. Нажмите **Показать параметры → Общие**.
      2. В блоке **Параметры подключения** нажмите кнопку **Открыть**.
      3. Выберите файл конфигурации и нажмите кнопку **Открыть**.
      4. Нажмите кнопку **Подключить** и повторно подтвердите подключение в открывшемся окне.
      5. В окне входа в операционную систему введите `<Пароль>`.

</tabpanel>
</tabs>

<info>

При первом подключении подтвердите использование сертификата.

</info>
