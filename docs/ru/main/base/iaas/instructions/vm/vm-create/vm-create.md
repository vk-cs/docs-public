В VK Cloud Servers можно создавать виртуальные машины через личный кабинет, OpenStack CLI или Terraform. Для создания виртуальной машины с помощью Terraform воспользуйтесь [инструкцией по созданию ВМ](/ru/manage/terraform/scenarios/create) в разделе Terraform.

## Перед началом работы

1. [Зарегистрируйтесь](/ru/base/account/start/registration) на платформе VK Cloud.
2. [Активируйте](/ru/base/account/start/activation) сервисы.

Баланс счета должен быть положительным, а [квот](/ru/base/account/concepts/quotasandlimits) должно быть достаточно для создания желаемой конфигурации виртуальной машины.

### Доступные ОС

Командой VK Cloud подготовлены образы некоторых ОС. Список готовых образов доступен в личном кабинете в [окне создания нового инстанса](https://mcs.mail.ru/app/mcs3723876490/services/infra/servers/add).

При необходимости вы можете [импортировать образ](../../vm-images/vm-images-manage#import-obraza) ОС самостоятельно.

## Создайте ВМ

<info>

Для разных операционных систем доступные поля могут отличаться.

</info>

<tabs>
<tablist>
<tab>Личный кабинет</tab>
<tab>OpenStack CLI</tab>
</tablist>
<tabpanel>

1. Перейдите в [личный кабинет](https://mcs.mail.ru/app/) VK Cloud.
2. Перейдите в раздел **Облачные вычисления → Виртуальные машины**.
3. Нажмите кнопку **Создать инстанс** или **Добавить**.
4. Задайте параметры ВМ:
     - **Имя виртуальной машины**: используйте только латинские буквы, цифры или символы `-`, `_` и `.`.
     - **Тип виртуальной машины**: выберите предустановленную конфигурацию ВМ (CPU и RAM). Подробнее в [обзоре сервиса VK Cloud Servers](../../../concepts/vm-concept#cpu-i-ram).
     - **Зона доступности**: выберите дата-центр, где будет запущена ВМ.
     - **Количество машин в конфигурации**: укажите нужное число ВМ.
     - **Размер диска**: укажите нужный размер диска ВМ в гигабайтах.
     - **Тип диска**: выберите одно из значений — HDD, SSD или High-IOPS SSD. Подробнее в [обзоре сервиса VK Cloud Servers](../../../concepts/vm-concept#diski).
     - **Операционная система**: выберите версию операционной системы или [созданный ранее образ](../../vm-images/vm-images-manage#sozdanie-obraza).
     - **Включить мониторинг**: включите, чтобы использовать [инструменты мониторинга](/ru/manage/monitoring/monitoring-info).
     - **Теги**: при необходимости [укажите тег](../vm-manage#prisvoenie-tegov) для ВМ или создайте новый.
5. Нажмите кнопку **Следующий шаг**.
6. Настройте подключение ВМ к сети:
   - **Сеть**: выберите существующую сеть или создайте новую. В зависимости от выбора типа сети, список доступных полей изменится.

       Если выбран пункт `Создать новую сеть` или выбрана существующая сеть, задайте настройки:
       - **Адрес подсети**: поле появляется, если выбран пункт `Создать новую сеть`. Подробнее в разделе [Управление сетями и подсетями](/ru/networks/vnet/operations/manage-net).
       - **Использовать конфигурационный диск**: включите опцию, если нужно автоматически настроить сеть на виртуальной машине при отсутствии в сети DHCP-сервера.
       - **DNS-имя**: укажите DNS-имя для виртуальной машины. Подробнее в разделе [Приватный DNS](/ru/networks/dns/private-dns).
       - **Назначить внешний IP**: включите опцию, если нужен доступ к виртуальной машине через интернет.

       Если выбран пункт `Внешняя сеть (ext-net)`:
       - Будет использован конфигурационный диск.
       - Виртуальной машине будет автоматически назначен внешний IP-адрес.

   - **Ключ виртуальной машины**: выберите ключ для подключения по SSH или создайте новый.

      При выборе `Создать новый ключ` сохраните предложенный файл ключа `.pem` после завершения создания виртуальной машины.

   - **Настройки Firewall**: выберите нужные группы безопасности.

      Чтобы подключиться по SSH, добавьте группу `ssh` или `ssh+www`. Подробнее про настройку правил сетевого доступа в разделе [Управлении правилами файервола](/ru/networks/vnet/operations/secgroups).

7. Нажмите кнопку **Следующий шаг**.

8. Если необходимо, включите опцию **Использовать резервное копирование** и задайте нужные настройки:

   - **Название плана**: укажите имя плана для резервного копирования.
   - **Включить стратегию хранения полных бэкапов (GFS)**: включите для долгосрочного хранения полных резервных копий. Также укажите сроки хранения для недельных, месячных и годовых полных резервных копий.

      Если стратегия GFS не включена, то заполните поле **Макс. количество полных бэкапов**. При превышении этого значения старые резервные копии будут удаляться автоматически.

   - **Включить инкрементальные бэкапы**: включите, если необходимо создавать инкрементальные резервные копии. Также укажите **День создания полного бэкапа**. Во все остальные дни недели будут создаваться инкрементальные резервные копии.

      Если создание инкрементальных резервных копий не включено, то в поле **Расписание резерного копирования** укажите нужные дни для создания полных резервных копий.

9. Нажмите кнопку **Создать инстанс**.
10. Дождитесь создания ВМ. Этот процесс может занять некоторое время. Когда создание будет завершено, откроется страница с характеристиками ВМ и инструкцией по подключению.

</tabpanel>
<tabpanel>

1. Подготовьтесь к работе с OpenStack CLI:

   1. [Включите](/ru/base/account/account/security/2faon) двухфакторную аутентификацию.
   2. Активируйте доступ по API:
      1. Перейдите в [личный кабинет](https://mcs.mail.ru/app/) VK Cloud.
      2. Нажмите на строку с именем пользователя и в выпадающем меню выберите **Настройки аккаунта → Безопасность**.
      3. Нажмите кнопку **Активировать доступ по API**.
   3. [Установите](/ru/base/account/project/cli/setup) OpenStack CLI.
   4. [Авторизуйте](/ru/base/account/project/cli/authorization) клиент.

2. Соберите данные:

   1. Получите список доступных типов ВМ и сохраните нужный `flavor_ID`:

      ```bash
      openstack flavor list
      ```

   2. Получите список доступных образов ВМ и сохраните нужный `image_ID`:

      ```bash
      openstack image list
      ```

   3. Получите список групп безопасности:

      ```bash
      openstack security group list
      ```

       - Для создания ВМ Linux и подключения к ней по SSH сохраните `security_group_ID` группы `ssh` или `ssh+www`.
       - Для создания ВМ Windows и подключения к ней по RDP сохраните `security_group_ID` группы `rdp` или `rdp+www`.

      Подробнее про настройку правил сетевого доступа в разделе [Управлении правилами файервола](/ru/networks/vnet/operations/secgroups).

   4. Получите список доступных сетей и сохраните нужный `network_ID`:

      ```bash
      openstack network list
      ```

      - Если выбрана сеть `ext-net`, то виртуальной машине будет автоматически назначен внешний IP-адрес.
      - Если выбрана приватная сеть, то виртуальной машине после создания можно [назначить плавающий IP-адрес](/ru/networks/vnet/operations/manage-floating-ip).

   5. Получите список доступных ключевых пар и сохраните `keypair_name`:

      ```bash
      openstack keypair list
      ```

      Чтобы создать новую ключевую пару:
         1. Сгенерируйте ключ:

            ```bash
            ssh-keygen -q -N ""
            ```

         2. Загрузите ключ:

            ```bash
            ssh-keygen -q -N ""
            ```

3. Создайте загрузочный диск:

   ```bash
   openstack volume create root-volume --size 10 --image <image_id> --availability-zone MS1 --bootable
   ```

4. Создайте ВМ:

   ```bash
   openstack server create <VM_name>
                           --volume <volume_id>
                           --network <network_ID> \
                           --flavor <flavor_ID> \
                           --key-name <keypair_name> \
                           --availability-zone MS1
   ```

   После создания виртуальной машины отобразится информация о ней. Найдите поле `adminPass` и скопируйте его значение. Оно понадобится для входа на сервер через консоль VNC.

5. Проверьте состояние созданной ВМ:

   ```bash
   openstack server list
   ```

   Созданная машина должна появиться в списке доступных ВМ и иметь статус `ACTIVE`.

<info>

Некоторые особенности создания ВМ через CLI:

- Если не указать зону доступности, буде выбрана случайная.
- Если не указать диск, будет создан «эфемерный диск» (с ограничениями).

</info>

</tabpanel>
</tabs>

## Что дальше?

- Посмотрите способы подключения к [ВМ Linux](../vm-connect/vm-connect-nix/) или [ВМ Windows](../vm-connect/vm-connect-win/).
- Узнайте, как [работать с ВМ](../vm-manage/).
