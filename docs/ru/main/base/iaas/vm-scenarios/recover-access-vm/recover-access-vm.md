Учетные данные для подключения и управления виртуальной машиной необходимо хранить в безопасном месте для избежания риска утраты доступа и информации на виртуальной машине.

Однако, если учетные данные были утрачены, восстановить доступ к серверу можно несколькими способами.

## Восстановление пароля

Восстановление пароля основного пользователя в запущенной виртуальной машине производится вне зависимости от семейства установленной операционной системы инстанса.

Для сброса пароля потребуется перейдите в информацию о виртуальной машине в списке инстансов сервиса «Облачные вычисления». На вкладке «Консоль» нажмите «Установить пароль».

<warn>

Пароль должен содержать хотя бы одну заглавную или строчную букву латинского алфавита, цифру, а также символы !"#$%&()\*+,-.:;<=>?@[]^_\`{}~

</warn>

<info>

Сброс пароля может не работать если в системе ВМ, развёрнутой из кастомного образа, не установлен `qemu-guest-agent`.

</info>

## Восстановление ключевой пары

Если ключевая пара была утеряна, то при наличии пароля доступ к инстансу можно восстановить.

<warn>

Приватный ключ восстановить невозможно. Необходимо создать ключевую пару заново и загрузить публичный ключ в инстанс.

</warn>

Для восстановления доступа потребуется добавить новую ключевую пару, используя CLI и VNC консоль:

1. Создать новую ключевую пару в проекте, используя Openstack CLI, и сохранить ее локально:
    ```bash
    openstack keypair create --private-key <filename_and_location> <keyname>
    ```
2.  Скопировать содержимое публичного ключа в локальный файл:
    ```bash
    openstack keypair show --public-key >> <путь_к_файлу>
    ```
3.  Загрузить созданный файл на любой внешний ресурс или облако.
4.  Сохранить файл на виртуальную машину командой:
    ```bash
    wget <your_file>
    ```
5.  Скопировать содержимое нового ключа в файл authorized_keys:
    ```bash
    cat <your_file> >> ~/.ssh/authorized_keys
    ```
6.  Проверить доступ к инстансу с новой ключевой парой:
    ```bash
    ssh -i <путь_к_ключу> логин@IP_адрес
    ```
