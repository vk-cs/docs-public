Добавляет разрешение в очередь для определенного участника . Это позволяет разделить доступ к очереди.

Когда вы создаете очередь, у вас есть права полного доступа к ней. Только вы, владелец очереди, можете предоставлять или отклонять разрешения для очереди.

## Параметры запроса

**ActionName.N**

Действие, которое клиент хочет разрешить для указанного принципала. Допустимые значения: название любого действия или `*`.

Указание `SendMessage`, `DeleteMessage`или `ChangeMessageVisibility`для`ActionName.n`также предоставляет права доступа для соответствующих пакетных версий этих действий: `SendMessageBatch`, `DeleteMessageBatch`, и `ChangeMessageVisibilityBatch`.

Тип: массив строк

Обязательно: Да

**AWSAccountId.N**

Номер учетной записи VK Cloud принципала (принципал - пользователь, служба или учетная запись, которая получает разрешения, определенные в политике), которому предоставлено разрешение. Заказчик должен иметь учетную запись VK Cloud, но не должен быть зарегистрирован в Cloud Queues.

Тип: массив строк

Обязательно: Да

**метка**

Уникальный идентификатор устанавливаемого вами разрешения (например, `AliceSendMessage`). Максимум 80 символов. Разрешенные символы включают буквенно-цифровые символы, дефисы ( `-`) и подчеркивания ( `_`).

Тип: Строка

Обязательно: Да

**QueueUrl**

VK Cloud Queues, в которую добавляются разрешения.

URL-адреса и имена очередей чувствительны к регистру.

Тип: Строка

Обязательно: Да

## Ошибки

**OverLimit**

Указанное действие сообщает о нарушении лимита. Например, `ReceiveMessage` возвращает эту ошибку, если достигнуто максимальное количество сообщений, и `AddPermission`возвращает эту ошибку, если достигнуто максимальное количество разрешений для очереди.

Код состояния HTTP: 403

## Примеры

### [](https://docs.aws.amazon.com/general/latest/gr/sigv4-signed-request-examples.html)

#### Образец запроса

```
https://sqs.mcs.mail.ru/123456789012/MyQueue/
?Action=AddPermission
&Label\=MyLabel
&AWSAccountId.1\=123456789012
&ActionName.1\=SendMessage
&AWSAccountId.2\=210987654321
&ActionName.2\=ReceiveMessage
&Expires=2020-04-18T22:52:43PST
&Version=2012-11-05
&AUTHPARAMS
```

#### Образец ответа

```
<AddPermissionResponse\>    
<ResponseMetadata\>       
<RequestId\>9a285199-c8d6-47c2-bdb2-314cb47d599d</RequestId\>    
</ResponseMetadata\>
</AddPermissionResponse\>
```
