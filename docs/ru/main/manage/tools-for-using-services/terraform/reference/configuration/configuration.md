Конфигурация Terraform состоит из файлов с расширением `.tf`, в которых описываются настройки провайдеров, ресурсы, запрашиваются и выводятся данные.

Обычно под каждый проект создается отдельный рабочий каталог/папка, в который добавляются файлы с описанием конфигурации инфраструктуры. Для удобства файлы разделяют по типам ресурсов:

- `main.tf` — содержит настройки необходимых провайдеров Terraform.
- `variables.tf` — переменные, которые используются в конфигурации. Вынесение часто изменяемых параметров в переменные позволяет легко менять конфигурацию инфраструктуры для нового проекта.
- `network.tf` — описание облачной сети.
- `kubernetes.tf` — описание ресурсов Kubernetes.

Синтаксис языка Terraform состоит из нескольких базовых элементов:

- Блоки (blocks) — контейнеры для основного контента, обычно описывают конфигурацию какого-то объекта, например, ресурса. Блоки имеют типы (block type), которые могут иметь метки (block labels) и тело блока (block body), состоящее из любого количества аргументов и вложенных блоков. Аргументы состоят из имени и значения. Они используются внутри блоков.

- Выражения (expressions) — значение представляют буквально, либо путем ссылки и объединения других значений. Они отображаются как значения для аргументов или внутри других выражений.

```bash
resource "vkcs_kubernetes_cluster" "mycluster" {
      name = "terracluster"
}

<BLOCK TYPE> "<BLOCK LABEL>" "<BLOCK LABEL>" {
  # Block body
  <IDENTIFIER> = <EXPRESSION> # Argument
}

```

Язык Terraform декларативный, он описывает намеченную цель, а не шаги по достижению этой цели. Порядок блоков и файлов, в которые они организованы, не имеют значения. При определении порядка операций Terraform учитывает только взаимосвязи между ресурсами.

Обычно в конфигурации используются:

- `terraform и required_providers` — необходимые для работы Terraform-провайдеры. Подробнее в разделе [Быстрый старт](../../quick-start/).
- `resource "resource_type" "resource_name" {}` — описывает создаваемый [ресурс](https://www.terraform.io/language/resources/syntax), например, сеть, подсеть, кластер Kubernetes или кластер базы данных.
- `data "data_type" "data_name"` — позволяет использовать [данные](https://www.terraform.io/language/data-sources), указанные вне конфигурации Terraform, которые существуют в облаке или локально. Например, конфигурацию ВМ, шаблон/версию кластера и т.д.
- `variable "image_id" {}` — [входные переменные](https://www.terraform.io/language/values/variables). Используются для вынесения параметров создаваемых ресурсов вне основной конфигурации.
- `output "instance_ip_addr" {}` — [выходные переменные](https://www.terraform.io/language/values/outputs). Выводят данные в командную строку.

Для определения последовательности создания ресурсов и их зависимостей используется блок `depends_on`, в котором указывается ресурс, от которого зависит создаваемый ресурс:

```bash
depends_on = [
    vkcs_kubernetes_cluster.k8s-cluster,
]
```
