# {heading(Обновление image-based приложения)[id=ibservice_update]}

Обновление конфигурации image-based приложения может включать:

* Изменение параметров тарифных планов и опций.
* Добавление тарифных планов и опций.
* Удаление тарифных планов и опций.
* Изменение параметров ресурсов, описанных в манифестах Terraform.
* Добавление ресурсов в манифесты Terraform.

<err>

Текущая версия {var(sys2)} не поддерживает удаление ресурсов из конфигурации манифестов Terraform. Функциональность будет реализована в следующей версии.

Все изменения в манифестах должны поддерживать обратную совместимость.

</err>

Чтобы обновить image-based приложение в {var(sys6)}:

1. Отредактируйте файлы сервисного пакета. Параметры файлов приведены в разделе [Добавление image-based приложения в Магазин](../ibservice_add).
1. В файле `service.yaml` укажите новую ревизию сервиса.

   <warn>

   Сервис не будет обновлен, если указанная ревизия сервиса уже загружена в {var(sys1)}.

   </warn>
1. Если были изменены файлы тарифных опций (директория `parameters`), то для каждого тарифного плана, использующего хотя бы одну измененную опцию, укажите новую ревизию.

   Если были изменены файлы, описывающие тарифный план, то в файле `plans/<PLAN_NAME>/plan.yaml` укажите новую ревизию.

   <warn>

   Тарифные планы и опции не будут обновлены, если указанные ревизии планов уже загружены в {var(sys1)}.

   </warn>
1. Загрузите обновленный сервисный пакет и опубликуйте новую ревизию сервиса в открытом пространстве имен {var(sys2)} (подробнее — в разделе [Загрузка image-based приложения в Магазин](../ibservice_add/ibservice_upload)).

   Предыдущая опубликованная ревизия переходит в тестовое пространство имен {var(sys2)}. В тестовых пространствах имен сохраняются все неопубликованные ревизии сервиса.

   Публикация новой ревизии не влияет на уже существующие инстансы сервиса. Ревизия этих инстансов сервиса не изменяется.
