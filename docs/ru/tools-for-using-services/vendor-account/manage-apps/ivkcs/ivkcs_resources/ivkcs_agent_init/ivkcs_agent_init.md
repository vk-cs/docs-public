# {heading(Ресурс ivkcs_agent_init)[id=ivkcs_agent_init]}

## Аргументы ресурса

[cols="2,5,2,2,2", options="header"]
|===
|Имя
|Описание
|Формат
|Обязательный
|Пересоздание ресурса при изменении значения

|
`uuid`
|Идентификатор инстанса сервиса
|string
| ![](/ru/assets/check.svg "inline")
| ![](/en/assets/no.svg "inline")

|
`hosts`
|Список имен хостов для инициализации агента
|list, элементы списка — string
| ![](/ru/assets/check.svg "inline")
| ![](/ru/assets/check.svg "inline")

|
`options`
|Опции инициализации агента
|set, аргументы списка — в [таблице](#agent_init_options).
| ![](/en/assets/no.svg "inline")
| ![](/en/assets/no.svg "inline")
|===

### {heading(Опции инициализации агента)[id=agent_init_options]}

[cols="2,5,2,2", options="header"]
|===
|Имя
|Описание
|Формат
|Значение по умолчанию

|
`memory_limit`
|
Ограничение оперативной памяти, используемой для агента, МБ
|
integer
|256
|===

{note:info}

Используйте опцию `options.memory_limit`, чтобы ограничить оперативную память для агента.

{/note}

## Возвращаемые параметры

Ресурс `ivkcs_agent_init` возвращает атрибут `agent` в формате списка строк. Индекс в списке соответствует индексу хоста, переданного в аргументе `hosts`. Значением является bash-скрипт. Функции bash-скрипта:

* Запрашивает агент у сервиса управления конфигурациями.
* Скачивает агент и устанавливает его на хосты.
* Выдает хостам ключи доступа в сервис управления конфигурациями.

## Пример описания ресурса

```hcl
resource "ivkcs_agent_init" "init" {
	uuid = "<UUID>"
	hosts = ["<СПИСОК_ИМЕН_ХОСТОВ>"]
	options {
		memory_limit = 512
	}
}
```

Здесь:

* `<UUID>` — идентификатор инстанса сервиса.
* `<СПИСОК_ИМЕН_ХОСТОВ>` — список имен хостов, на которых будет выполняться мониторинг. Имена хостов должны в точности соответствовать именам ВМ, определенным в вашей конфигурации Terraform (обычно в ресурсе `vkcs_compute_instance`).

{include(/ru/_includes/_tf_hosts.md)}
