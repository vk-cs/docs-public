Marketplace предоставляет систему автоматического управления SSL-сертификатами для инстансов image-based приложений. Система базируется на Terraform-ресурсе [ivkcs_cert](/ru/tools-for-using-services/vendor-account/manage-apps/ivkcs/ivkcs_resources/ivkcs_cert).

Возможности системы:

- Автоматическое создание SSL-сертификатов для доменов, указанных поставщиком image-based приложения.
- Размещение SSL-сертификатов и их приватных ключей на ВМ инстансов image-based приложений.
- Настройка прав доступа к файлам SSL-сертификатов и их приватным ключам.
- Безопасное хранение приватных ключей SSL-сертификатов.
- Автоматическое обновление SSL-сертификатов перед истечением срока их действия.
- Выполнение пользовательских скриптов после обновления SSL-сертификата.

Система обеспечивает все стадии жизненного цикла SSL-сертификатов:

[cols="1,2,1", options="header"]
|===
|Стадия жизненного цикла
|Описание
|Статус сертификата

|Создание
|Система запрашивает SSL-сертификат у центра сертификации
|`INITIAL`

|Запрос валидации
|Система просит поставщика подтвердить владение доменом
|`REQUEST_VALIDATION`

|Ожидание валидации
|Система ожидает подтверждения от поставщика
|`WAIT_VALIDATION`

|Размещение и использование
|При развертывании инстанса image-based приложения система сохраняет SSL-сертификат и его ключ на ВМ инстанса в указанной поставщиком директории. Сертификат готов к использованию
|`READY`

|Мониторинг
|Система отслеживает срок действия SSL-сертификата
|`READY` или `EXPIRE_SOON`

|Обновление
|Система выполняет обновление SSL-сертификата за 30 дней до истечения его срока действия. После обновления система запускает пользовательский скрипт, если это указано поставщиком
|`RENEW`
|===

В случае ошибки при создании или обновлении SSL-сертификат переходит в статус `FAILED`.

В [руководстве по использованию SSL-сертификатов](/ru/tools-for-using-services/vendor-account/how-to-guides/ssl-cert-usage) показано, как интегрировать систему управления SSL-сертификатами в image-based приложение.
