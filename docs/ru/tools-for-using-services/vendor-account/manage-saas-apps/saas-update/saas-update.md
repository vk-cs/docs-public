Обновление SaaS-приложения может включать в себя:

* изменение параметров тарифных планов и опций;
* добавление тарифных планов и опций;
* удаление тарифных планов и опций.

В этом случае необходимо обновить конфигурацию SaaS-приложения в Marketplace:

1. Отредактируйте JSON-файл `catalog_<ИМЯ_СЕРВИСА>.json` с описанием конфигурации сервиса.

   1. Чтобы сохранить доступ к текущей опубликованной ревизии сервиса в тестовых пространствах имен Marketplace, вставьте в JSON-файл дополнительную секцию для описания новой конфигурации сервиса:

      ```json
      {
        "services": [
          {
          <ПАРАМЕТРЫ_СЕРВИСА>,
          "preview": {
              "parameters": [
              ]
            },
          "plans": [
            ]
          },
          {
          <ПАРАМЕТРЫ_СЕРВИСА>,
          "preview": {
              "parameters": [
              ]
            },
          "plans": [
            ]
          }
        ]
      }
      ```

      <err>

      Нельзя стирать секции JSON-файла с описанием опубликованных ревизий сервиса, так как это приведет к удалению этих ревизий. Удаление разрешено только для неопубликованных ревизий сервиса: тестовых или снятых с публикации.

      </err>

   1. [Опишите](../saas-add#service_config) новую конфигурацию сервиса.
   1. В новой конфигурации сервиса укажите новую [ревизию сервиса](../../../vendor-account/reference/saas-apps-reference/saas-param).

      <warn>

      Сервис не будет обновлен, если указанная ревизия сервиса уже загружена в Marketplace.

      </warn>

   1. Если вы изменили параметры текущих тарифных планов, в новой конфигурации сервиса укажите новые [ревизии планов](../../../vendor-account/reference/saas-apps-reference/saas-plan).

      <warn>

      Тарифные планы не будут обновлены, если указанные ревизии планов уже загружены в Marketplace.

      </warn>

1. Если вы добавили или удалили тарифные планы, [отредактируйте](../saas-add#saas_load_configuration_to_broker) файл `resources/plan_mapping.json` в директории брокера.

   Поскольку брокер  периодически передает в Marketplace список конфигураций сервиса, новая конфигурация автоматически попадет в тестовое пространство имен Marketplace.

   <err>

   Чтобы Marketplace мог своевременно получать текущую конфигурацию сервиса, брокер должен быть доступен круглосуточно.

   </err>

1. [Протестируйте](../saas-add#saas_test_marketplace) новую ревизию сервиса в тестовом пространстве имен Marketplace.
1. [Опубликуйте](../saas-add#saas_publish_service) новую ревизию сервиса в открытом пространстве имен Marketplace.

   Предыдущая опубликованная ревизия перейдет в тестовое пространство имен Marketplace.

   <info>

   В тестовых пространствах имен сохраняются все неопубликованные ревизии, описанные в JSON-файле конфигурации сервиса.

   </info>

   Ревизии сервиса, удаленные из конфигурации сервиса, не будут доступны ни в тестовых, ни в открытых пространствах имен Marketplace.

   Публикация новой ревизии не повлияет на уже существующие инстансы (тенанты/аккаунты) сервиса. Ревизия этих инстансов сервиса не изменится, даже если она удалена из конфигурации сервиса и более недоступна в Marketplace.
