Cloud Monitoring предоставляет API для получения значения метрик. Сейчас реализована поддержка подмножества языка PromQL для работы с метриками на основе запросов.

Можно составлять и выполнять запрос на чтение метрик со следующим синтаксисом:

1.  Название метрики и функцию агрегации
    1.  cpu:Minimum
2.  Фильтрацию по значению Label
    1.  \= метки, которые точно соответствуют предоставленной строке.
    2.  != метки, не совпадающие с указанной строкой.
    3.  \=~ метки, регулярное выражение которых соответствует указанной строке.
    4.  !~ метки, которые не соответствуют регулярному выражению указанной строке.
3.  Группировки
    1.  SUM (сумма по размерностям)
    2.  MIN (минимум по размерностям)
    3.  MAX (максимум по размерностям)
    4.  AVG (среднее по размерностям)
    5.  STDDEV (стандартное отклонение совокупности по размерностям)
    6.  STDVAR (стандартную дисперсию генеральной совокупности по измерениям)
    7.  COUNT (количество элементов в векторе)
    8.  QUANTILE (φ-квантиль (0 ≤ φ ≤ 1) по измерениям)
4.  Примеры запросов:

    ```
    SUM BY(host) (cpu:Minimum{instance="server1", app!="system"})
    ```

    ```
    SUM BY(job) (cpu:Average{host="server1", job!="system"}[12h] offset 24h)
    ```
