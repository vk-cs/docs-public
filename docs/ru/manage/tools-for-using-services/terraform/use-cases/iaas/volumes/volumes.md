<warn>

Убедитесь, что вы [установили и сконфигурировали Terraform](../../../quick-start).

</warn>

## Создание тома диска

Чтобы создать том диска, создайте файл `volume.tf`, где будет описана конфигурация создаваемого тома. Добавьте текст из примера ниже и исправьте значения настроек для вашего тома. В данном примере описывается создание тома диска размером 1 ГБ типа `ceph-ssd` в зоне доступности `GZ1`.

Для создания тома диска потребуется ресурс `vkcs_blockstorage_volume`, который предоставляет том блочного хранилища. Вы можете создавать, изменять и удалять тома блочного хранилища.

```hcl
resource "vkcs_blockstorage_volume" "volume" {
  name = "volume"
  description = "test volume"
  metadata = {
    foo = "bar"
  }
  size = 1
  availability_zone = "GZ1"
  volume_type = "ceph-ssd"
}
```

Здесь:

- `name`: название тома.
- `description`: описание тома.
- `metadata`: карта значений ключей для метаданных тома.
- `size`: (обязателен) размер тома в гигабайтах.
- `availability_zone`: (обязателен) название зоны доступности ЦОД, хранящих том.
- `volume_type`: (обязателен) тип тома.

### Применение изменений

Добавьте текст примера в файл `volume.tf` и выполните следующие команды:

```bash
terraform init
```
```bash
terraform apply
```

## Создание снимка состояния (snapshot)

Чтобы создать снимок состояния тома диска, создайте файл `snapshot.tf`, где будет описана конфигурация создаваемого снимка. Добавьте текст из примера ниже и исправьте значения настроек для вашей инфраструктуры. В данном примере описывается создание снимка состояния тома диска с ID ресурса `vkcs_blockstorage_volume.volume.id`.

Для создания снимка потребуется ресурс `vkcs_blockstorage_snapshot`, который предоставляет снимок состояния блочного хранилища. Вы можете создавать, изменять и удалять снимки состояния тома блочного хранилища.

```hcl
resource "vkcs_blockstorage_snapshot" "snapshot" {
  volume_id = "${vkcs_blockstorage_volume.volume.id}"
  name = "snapshot"
  description = "test snapshot"
  metadata = {
    foo = "bar"
  }
}
```

Здесь:

- `volume_id`: (обязателен) ID тома, для которого будет создан снимок состояния.
- `name`: имя снимка состояния.
- `description`: описание снимка состояния.
- `metadata`: карта значений ключей для метаданных тома.

### Применение изменений

Добавьте текст примера в файл `snapshot.tf` и выполните следующие команды:

```bash
terraform init
```
```bash
terraform apply
```
