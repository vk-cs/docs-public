Чтобы обеспечить доступ в приватную сеть из интернета, настройте для продвинутого маршрутизатора _DNAT_ — трансляцию сетевых адресов. DNAT перенаправляет входящие пакеты с внешнего адреса или порта на IP-адрес или порт внутри частной сети. При этом с одного публичного IP-адреса можно настроить передачу данных во множество внутренних адресов приватных сетей с использованием уникальных портов (TCP или UDP).

## Добавление правила DNAT

<tabs>
<tablist>
<tab>Личный кабинет</tab>
</tablist>
<tabpanel>

{include(/ru/_includes/_open_advanced_router.md)}

1. Выберите вкладку **DNAT**.
1. Нажмите кнопку ![plus-icon](/ru/assets/plus-icon.svg "inline") **Добавить правило DNAT**.
1. Задайте название DNAT-правила. Допустимы только цифры, латинские буквы, пробелы и спецсимволы: `?`, `!`, `~`, `@`, `#`, `$`, `%`, `^`, `"`, `&`, `_`, `-`, `+`, `*`, `=`, `;`, `:`, `,`, `.`, `/`, `\`, `|`, `` ` ``, `[`, `]`, `{`, `}`, `(`, `)`, `<`, `>`.
1. Выберите интерфейс маршрутизатора, на который будет приходить пакет. Если нужного интерфейса нет в списке, выберите **Добавить новый интерфейс** и [добавьте новый интерфейс](../manage-interfaces#dobavlenie_interfeysa_prodvinutogo_marshrutizatora).
1. Выберите протокол передачи данных:

   - **Все протоколы и порты**: правило будет действовать для всех портов и протоколов;
   - **TCP**: правило будет действовать для указанного порта по протоколу TCP;
   - **UDP**: правило будет действовать для указанного порта по протоколу UDP.

1. В поле **IP после трансляции** укажите IP-адрес, на который будут передаваться данные с публичного IP-адреса.
1. (Опционально и только для протоколов TCP и UDP) В поле **Порт до трансляции** укажите порт, данные с которого будут передаваться на указанный IP-адрес.
1. (Опционально и только для протоколов TCP и UDP) В поле **Порт после трансляции** укажите порт, на который будут передаваться данные.
1. (Опционально) Добавьте описание DNAT-правила. Допустимы только цифры, латинские буквы, пробелы и спецсимволы: `?`, `!`, `~`, `@`, `#`, `$`, `%`, `^`, `"`, `&`, `_`, `-`, `+`, `*`, `=`, `;`, `:`, `,`, `.`, `/`, `\`, `|`, `` ` ``, `[`, `]`, `{`, `}`, `(`, `)`, `<`, `>`.
1. Нажмите кнопку **Добавить**.

</tabpanel>
</tabs>

## Редактирование правила DNAT

<tabs>
<tablist>
<tab>Личный кабинет</tab>
</tablist>
<tabpanel>

{include(/ru/_includes/_open_advanced_router.md)}

1. Выберите вкладку **DNAT**.
1. Откройте настройки правила одним из следующих способов:

   - Нажмите ![more-icon](/ru/assets/more-icon.svg "inline") для правила и выберите пункт ![pencil-icon](/ru/assets/pencil-icon.svg "inline") **Редактировать**.
   - Нажмите на название нужного правила и нажмите кнопку ![pencil-icon](/ru/assets/pencil-icon.svg "inline") **Редактировать**.

1. Отредактируйте настройки правила:

   - **Название**: название DNAT-правила. Допустимы только цифры, латинские буквы, пробелы и спецсимволы: `?`, `!`, `~`, `@`, `#`, `$`, `%`, `^`, `"`, `&`, `_`, `-`, `+`, `*`, `=`, `;`, `:`, `,`, `.`, `/`, `\`, `|`, `` ` ``, `[`, `]`, `{`, `}`, `(`, `)`, `<`, `>`.
   - **Протокол**: протокол передачи данных:

      - **Все протоколы и порты**: правило будет действовать для всех портов и протоколов;
      - **TCP**: правило будет действовать для указанного порта по протоколу TCP;
      - **UDP**: правило будет действовать для указанного порта по протоколу UDP.
   - **IP после трансляции**: IP-адрес, на который будут передаваться данные с публичного IP-адреса.
   - (Только для протоколов TCP и UDP) **Порт до трансляции**: порт, данные с которого будут передаваться на указанный IP-адрес.
   - (Только для протоколов TCP и UDP) **Порт после трансляции**: порт, на который будут передаваться данные.
   - **Описание**: описание DNAT-правила. Допустимы только цифры, латинские буквы, пробелы и спецсимволы: `?`, `!`, `~`, `@`, `#`, `$`, `%`, `^`, `"`, `&`, `_`, `-`, `+`, `*`, `=`, `;`, `:`, `,`, `.`, `/`, `\`, `|`, `` ` ``, `[`, `]`, `{`, `}`, `(`, `)`, `<`, `>`.
1. Нажмите кнопку **Сохранить изменения**.

## Удаление DNAT-правила

<tabs>
<tablist>
<tab>Личный кабинет</tab>
</tablist>
<tabpanel>

Это групповая операция: при необходимости можно удалить сразу несколько DNAT-правил, выбрав их с помощью флажков.

{include(/ru/_includes/_open_advanced_router.md)}

1. Выберите вкладку **DNAT**.
1. Удалите правило одним из способов:

   - Нажмите ![more-icon](/ru/assets/more-icon.svg "inline") для правила и выберите пункт ![trash-icon](/ru/assets/trash-icon.svg "inline") **Удалить**.
   - Выберите нужное правило с помощью флажка, затем нажмите кнопку ![trash-icon](/ru/assets/trash-icon.svg "inline") **Удалить** над таблицей.
1. Подтвердите удаление.

</tabpanel>
</tabs>
