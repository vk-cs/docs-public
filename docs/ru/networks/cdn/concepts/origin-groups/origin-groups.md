Для CDN-ресурса всегда настраивается _группа источников_, даже если используется только один источник контента. При запросе контента CDN-сервер выбирает источник в зависимости от опций, заданных на уровне группы источников. В зависимости от ответов выбранного источника может быть выбран другой источник.

Следующие опции влияют на порядок выбора источника из группы при запросе контента CDN-серверами:

- **Тип источника**: активный или резервный.

  Задается на уровне отдельного источника в группе.

- **Использовать следующий источник из списка при 4XX и 5XX кодах на источнике**.

  Задается на уровне всей группы источников. Параметр доступен, если в группе настроено более одного источника.

Выбор источника производится по следующим правилам:

- Если опция **Использовать следующий источник из списка при 4XX и 5XX кодах на источнике** не выбрана, то контент запрашивается сначала с одного из активных источников, затем с одного из резервных источников.

  CDN-сервер запрашивает контент с одного из резервных источников только в том случае, если от активного источника придет ответ с HTTP-статусом из диапазона 5XX. При ответе с HTTP-статусом из диапазона 4XX от активного или резервного источника CDN-сервер вернет потребителю ошибку.

  Активный источник выбирается по алгоритму round-robin, чтобы обеспечить балансировку нагрузки.

- Если опция **Использовать следующий источник из списка при 4XX и 5XX кодах на источнике** выбрана, то CDN-сервер запрашивает контент, двигаясь по списку источников.

  Если все источники в списке активные, то CDN-сервер запросит контент с первого активного источника. При ответе с HTTP-статусами [404](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404), [500](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/500), [502](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/502), [503](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/503) или [504](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/504) CDN-сервер будет двигаться вниз по списку и запрашивать контент с остальных источников.
  
  Если в списке есть резервные источники, то CDN-сервер запрашивает контент с первого активного источника. При ответе с HTTP-статусом из диапазона 4XX или 5XX CDN-сервер будет двигаться вниз по списку и запрашивать контент с остальных источников, вне зависимости от их типа.

  Если все источники недоступны, CDN-сервер вернет ответ последнего источника в списке.
