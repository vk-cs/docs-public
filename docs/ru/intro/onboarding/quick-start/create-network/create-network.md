# {heading(Cloud Network: создайте виртуальную сеть и настройте группу безопасности)[id=onboarding-create-network]}

[Cloud Network](/ru/networks/vnet) — группа сервисов для управления сетевой связностью в VK Cloud. Эти сервисы обеспечивают обмен данными между ресурсами, подключенными к виртуальной сети.

Аналогично физическим локальным сетям, у виртуальной сети есть свои подсети — диапазоны IP-адресов. При подключении к виртуальной сети каждый облачный ресурс получает свой IP-адрес и может обмениваться трафиком как внутри своей подсети, так и между разными подсетями одной сети.

Начните работу с Cloud Network любым удобным способом:

- Воспользуйтесь [инструкцией](#guide), чтобы создать свою виртуальную сеть с несколькими виртуальными машинами и настроить правила прохождения трафика.
- Посмотрите {linkto(#video)[text=видео]} с демонстрацией настройки виртуальной сети специалистом VK Cloud.
- Пройдите [бесплатный обучающий курс](#course), чтобы познакомиться с возможностями сервиса.

## {heading(Создайте и настройте виртуальную сеть с ВМ)[id=guide]}

Пройдя все шаги этой инструкции, вы:

1. [Создадите](#network_create) виртуальную сеть с доступом и без доступа в интернет.
1. [Создадите](#vms_create) виртуальные машины с разными вариантами подключения к сетям.
1. [Создадите](#sg_create) группу безопасности, в которой настроите правила для управления трафиком.
1. [Назначите](#sg_assign) группу безопасности ВМ, чтобы разрешить передачу трафика.
1. [Проверите](#connection_check) сетевую связность между ВМ.
1. [Проверите](#internet_connection_check) доступ в интернет.
1. [Проверите](#ssh_connection_check) подключение к ВМ по SSH.

{include(/ru/_includes/_create-network.md)[level=+1]}


## {heading(Видеоинструкция)[id=video]}

В этом видео продемонстрировано создание виртуальной сети с подсетью, определение правил прохождения трафика, настройка маршрутизатора и назначение внешнего IP-адреса для доступа в интернет.

{caption()[id=position=above;align=right;id=video_create_network]}
{video(https://vkvideo.ru/video_ext.php?oid=-164978780&id=456239416&hd=3)[type=vkvideo]}
{/caption}

## {heading(Обучающий курс)[id=course]}

Пройдите [бесплатный обучающий курс](https://cloud.vk.com/cloud-native-courses/advanced/virtualnye-seti-i-marshrutizaciya/). 

В теоретической части курса рассказано, как работают виртуальные сети, маршрутизаторы и системы контроля сетевого доступа. В практической части вы создадите свою виртуальную сеть с подсетью, проверите полученную топологию сети в интерактивном редакторе, а также ознакомитесь с маршрутизаторами и группами безопасности в личном кабинете VK Cloud.

## {heading(Вопросы и ответы)[id=faq]}

{cut(Какой адрес подсети выбрать?)}

Выбирайте диапазоны IP-адресов для частных сетей:

[cols="1,1", options="header"]
|===
|Диапазон по [RFC 1918](http://www.faqs.org/rfcs/rfc1918.html)
|Пример адреса подсети

|10.0.0.0 - 10.255.255.255 (10.0.0.0/8)
|10.0.2.0/24

|172.16.0.0 - 172.31.255.255 (172.16.0.0/12)
|172.31.0.0/16

|192.168.0.0 - 192.168.255.255 (192.168.0.0/16)
|192.168.199.0/24
|===

Рекомендации:

- Стандартный выбор для новой подсети: 10.0.2.0/24 или 192.168.1.0/24. Маска /24 создает для подсети 254 адреса — этого хватает для большинства задач.
- Не используйте зарезервированные адреса в подсети. Первый адрес подсети резервируется для шлюза, а если для подсети включен DHCP, то в ней размещаются два DHCP-сервера, которые занимают первые два адреса из [пула DHCP-адресов](/ru/networks/vnet/concepts/ips-and-inet#setevaya_adresaciya).
- Не пересекайте диапазоны адресов с инфраструктурой On-Premise, если планируете организовать VPN-подключение.

{/cut}

{cut(Как связать несколько виртуальных машин между собой?)}

Чтобы подключить одну виртуальную машину VK Cloud к другой, обеспечьте сетевую связность между их подсетями.

- Виртуальные машины в одной подсети могут обмениваться трафиком без дополнительных настроек.

- Виртуальные машины в разных подсетях по умолчанию не могут обмениваться трафиком. Сетевую связность нужно настроить с помощью [стандартного маршрутизатора](/ru/networks/vnet/concepts/router#standard).

В обоих случаях [группы безопасности](/ru/networks/vnet/concepts/traffic-limiting#secgroups) должны разрешать трафик между виртуальными машинами.

{/cut}

{cut(Как подключить домен?)}

Настройте подходящий вариант:

- [Публичный DNS](/ru/networks/dns/instructions/publicdns) для публичных доменов, доступных из интернета.
- [Приватный DNS](/ru/networks/dns/instructions/private-dns) для доменов, доступных только внутри VK Cloud.

Чтобы A-записи появлялись в DNS-зоне автоматически, при создании виртуальных машин включайте опцию **Привязать домен к внешнему IP**.

{/cut}

{cut(Как работает управление сетями?)}

В VK Cloud используется SDN (Software-Defined Networking) собственной разработки — [Sprut](/ru/networks/vnet/concepts/sdn#sprut). Она подключается автоматически для всех новых проектов.

Для проектов, созданных до появления [Sprut](/ru/networks/vnet/concepts/sdn#sprut), установлен SDN прошлого поколения — [Neutron](/ru/networks/vnet/concepts/sdn#neutron). [Проверить](/ru/tools-for-using-services/account/instructions/project-settings/manage#sdn_view) текущую SDN можно в настройках облачного проекта.

{/cut}

{cut(Как настроить распределение входящего трафика между серверами?)}

Распределение трафика выполняют [балансировщики нагрузки](/ru/networks/balancing/concepts/load-balancer). Без их использования весь входящий поток данных направляется на один сервер.

{/cut}

{cut(Как организовать VPN-подключение к облачной инфраструктуре VK Cloud?)}

Вы можете [управлять](/ru/networks/vnet/instructions/vpn) VPN-туннелями через личный кабинет или OpenStack CLI.

[Подробнее о вариантах подключения к удаленной инфраструктуре](/ru/networks/vnet/concepts/onpremise-connect).

{/cut}

{cut(Что тарифицируется в сервисе Cloud Network?)}

[Тарифицируются](/ru/networks/vnet/tariffication) публичные IP-адреса и балансировщики нагрузки. Удаляйте эти ресурсы, как только они перестанут быть нужными.

{/cut}
