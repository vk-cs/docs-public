[Cloud Backup](/ru/storage/backups/concepts/about) — сервис для создания и хранения резервных копий виртуальных машин, баз данных и аналитических баз данных. Вы можете настроить регулярное резервное копирование, а также создавать резервные копии вручную перед важными изменениями.

Резервные копии позволяют восстановить отдельные файлы, директории или всю систему в случае сбоя или потери данных. Это защищает критически важную информацию для бизнеса, такую как данные клиентов, финансовую отчетность, CRM-системы и конфигурационные файлы.

Начните работу с сервисом Cloud Backup любым удобным способом:

- Воспользуйтесь [инструкцией](#guide), чтобы протестировать восстановление удаленной ВМ из резервной копии.
- Посмотрите {linkto(#video)[text=видео]} о работе с сервисом Cloud Backup.

{note:info}Облачные ресурсы, создаваемые при резервном копировании, тарифицируются.{/note}

## {heading(Настройте резервное копирование)[id=guide]}

Пройдя все шаги этой инструкции, вы:

1. [Создадите](#backup_create) резервную копию виртуальной машины.
1. [Удалите](#vm_delete) ВМ.
1. [Восстановите](#vm_restore) ВМ из резервной копии.

### Подготовительные шаги

1. Для тестирования [создайте](/ru/intro/onboarding/quick-start/create-vm) новую ВМ на базе Linux с именем `test-vm`.
1. Создайте на ВМ файл с произвольным содержимым, который будет использоваться для проверки восстановления из резервной копии.

   Пример команды для создания файла:

   ```console
   echo "Успех" > test.txt
   ```

### {heading(1. Создайте резервную копию вручную)[id=backup_create]}

1. [Перейдите](https://msk.cloud.vk.com/app/) в личный кабинет VK Cloud.
1. Перейдите в раздел **Облачные вычисления → Виртуальные машины**.
1. Нажмите ![ ](/ru/assets/more-icon.svg "inline") для нужной ВМ и выберите **Создать бэкап**.
1. Нажмите кнопку **Создать бэкап**.

Резервная копия для ВМ `test-vm` появится в разделе **Cloud Backup → Резервное копирование** на вкладке **Ручное**.

### {heading(2. Удалите ВМ)[id=vm_delete]}

1. В списке виртуальных машин нажмите ![ ](/ru/assets/more-icon.svg "inline") для тестовой ВМ, которую необходимо удалить.
1. Выберите пункт **Удалить** и подтвердите действие.

### {heading(3. Восстановите ВМ из резервной копии)[id=vm_restore]}

1. Перейдите в раздел **Cloud Backup → Резервное копирование**.
1. Перейдите на вкладку **Ручное**.
1. Нажмите на значение в столбце **Точки восстановления** для ВМ `test-vm`. Откроется страница с резервной копией, которую вы создали вручную.
1. Нажмите ![ ](/ru/assets/more-icon.svg "inline") для резервной копии и выберите пункт **Восстановить из бэкапа**.
1. Задайте параметры восстановления:
   
   - **Тип восстановления**: выберите `Новый инстанс`.
   - **Имя виртуальной машины**: укажите `test-vm-restored`.
   - **Сеть**: выберите `Внешняя сеть (internet)`.

     Во внешней сети виртуальной машине будет автоматически назначен внешний IP-адрес.
   - **Ключ виртуальной машины**: выберите `Создать новый ключ`.
   - **Зона доступности**: выберите `Москва (ME1)`
   - **Тип диска**: выберите `HDD`.

1. Нажмите кнопку **Восстановить инстанс**.
1. Перейдите в раздел **Облачные вычисления → Виртуальные машины** и найдите ВМ `test-vm-restored` в списке.
1. Убедитесь, что состояние ВМ `test-vm-restored` соответствует состоянию `test-vm` до резервного копирования. Для этого проверьте наличие и содержимое файла, который создали на этапе подготовки.

   Пример команды для проверки файла:

   ```console
   cat test.txt
   ```

   Пример успешного вывода:

   ```bash
   Успех
   ```

### Удалите неиспользуемые ресурсы

Восстановленная виртуальная машина `test-vm-restored` [тарифицируется](/ru/computing/iaas/tariffication), а резервная копия занимает дисковое пространство в платном хранилище сервиса VK Object Storage. Если они вам больше не нужны:

1. Удалите виртуальную машину `test-vm-restored`:

   1. Перейдите в раздел **Облачные вычисления → Виртуальные машины**.
   1. В списке виртуальных машин нажмите ![ ](/ru/assets/more-icon.svg "inline") для ВМ ``test-vm-restored``.
   1. Выберите пункт **Удалить** и подтвердите действие.

1. Удалите резервную копию:

   1. Перейдите в раздел **Cloud Backup → Резервное копирование** на вкладку **Ручное**.
   1. Нажмите ![ ](/ru/assets/more-icon.svg "inline") для ВМ `test-vm`, выберите **Удалить** и подтвердите действие.

## {heading(Видеоинструкции)[id=video]}

На видео показано ручное и автоматическое резервное копирование в сервисе Cloud Backup, а также создание плана резервного копирования.

{cut(Ручное резервное копирование)}

{caption()[id=position=above;align=right;id=video_create_backup]}
{video(https://vkvideo.ru/video_ext.php?oid=-164978780&id=456239764&hd=3)[type=vkvideo]}
{/caption}

{/cut}

{cut(Автоматическое резервное копирование)}

{caption()[id=position=above;align=right;id=video_schedule]}
{video(https://vkvideo.ru/video_ext.php?oid=-164978780&id=456239765&hd=3)[type=vkvideo]}
{/caption}

{/cut}

{cut(Создание плана резервного копирования)}

{caption()[id=position=above;align=right;id=video_create_plan]}
{video(https://vkvideo.ru/video_ext.php?oid=-164978780&id=456239766&hd=3)[type=vkvideo]}
{/caption}

{/cut}

## {heading(Вопросы и ответы)[id=faq]}

{cut(С чего начать настройку резервного копирования моей инфраструктуры?)}

Ознакомьтесь с [лучшими практиками](/ru/storage/backups/concepts/best-practices) по настройке резервного копирования.

{/cut}

{cut(Какие стратегии резервного копирования подходят для сервиса Cloud Backup?)}

- [Стратегия](/ru/storage/backups/concepts/forward-incremental) с ограничением по максимальному числу хранимых копий.
- [Стратегия](/ru/storage/backups/concepts/gfs-backup) GFS с ограничением по времени хранения копий.
- [Стратегия](/ru/storage/backups/concepts/blocked-backup) создания резервных копий с блокировкой (защитой) от удаления.

{/cut}

{cut(Где хранятся резервные копии?)}
В сервисе VK Object Storage (объектное хранилище S3). Бакеты для резервных копий создаются автоматически, их нельзя самостоятельно создать или удалить.
{/cut}

{cut(Как автоматизировать удаление резервных копий?)}
В плане резервного копирования настройте автоматическое удаление копий по одному из критериев:

- По времени: включите опцию **Включить стратегию хранения полных копий (GFS)** и задайте срок хранения. По его истечении копии будут удалены.
- По количеству: отключите опцию **Включить стратегию хранения полных копий (GFS)** и укажите максимальное количество полных копий. При превышении лимита самые старые копии удаляются.

{/cut}

{cut(Что тарифицируется в сервисе Cloud Backup?)}
Тарифицируется дисковое пространство, в котором хранятся:

- Резервные копии. Стоимость рассчитывается по тарифам для Cloud Backup.
- Временные снимки, которые нужны для создания резервных копий. Эти снимки удаляются сразу после создания копий. Обычно это занимает не более часа.
  
  Стоимость рассчитывается по тарифам для образов. В названии таких тарифов указано «Snapshot».

Узнать актуальные тарифы можно в [прайс-листе](https://cloud.vk.com/pricelist/).
{/cut}