<warn>

Управление шардами доступно только в [конфигурации](../../concepts/work-configs/) **Кластер** для СУБД ClickHouse и MongoDB.

</warn>

## Добавление шарда

<tabs>
<tablist>
<tab>Личный кабинет</tab>
</tablist>
<tabpanel>

1. [Перейдите](https://msk.cloud.vk.com/app/) в личный кабинет VK Cloud.
1. Выберите проект, где находится нужный инстанс БД.
1. Перейдите в раздел **Базы данных** → **Инстансы баз данных**.
1. Раскройте меню нужного инстанса БД и выберите пункт **Добавить шард**.
1. Задайте для добавляемого шарда:

   - название шарда;
   - количество реплик в шарде;
   - тип виртуальной машины;
   - зону доступности;
   - тип диска;
   - размер диска;
   - ключ для доступа по SSH.

1. При необходимости:

   - Только для ClickHouse: включите мониторинг.
   - Включите и настройте автомасштабирование диска.

1. Нажмите кнопку **Расширить кластер**.

</tabpanel>
</tabs>

## Масштабирование шарда

<tabs>
<tablist>
<tab>Личный кабинет</tab>
</tablist>
<tabpanel>

1. [Перейдите](https://msk.cloud.vk.com/app/) в личный кабинет VK Cloud.
1. Выберите проект, где находится нужный инстанс БД.
1. Перейдите в раздел **Базы данных** → **Инстансы баз данных**.
1. Найдите в списке нужный шард инстанса БД, раскройте его меню и выберите пункт **Масштабировать шард**.
1. Задайте количество хостов в шарде в параметре **Количество узлов**.
1. Нажмите кнопку **Подтвердить**.

</tabpanel>
</tabs>

## Удаление хоста из шарда

Операция доступна только для ClickHouse.

<info>

Единственный хост шарда удалить невозможно.

</info>

<tabs>
<tablist>
<tab>Личный кабинет</tab>
</tablist>
<tabpanel>

1. [Перейдите](https://msk.cloud.vk.com/app/) в личный кабинет VK Cloud.
1. Выберите проект, где находится нужный инстанс БД.
1. Перейдите в раздел **Базы данных** → **Инстансы баз данных**.
1. Найдите в списке нужный хост шарда инстанса БД, раскройте его меню и выберите пункт **Удалить инстанс**.
1. Нажмите кнопку **Подтвердить**.

</tabpanel>
</tabs>

## Удаление шарда

Операция доступна только для ClickHouse.

<warn>

Шард будет удален вместе со всеми хостами, входящими в него.

</warn>

<tabs>
<tablist>
<tab>Личный кабинет</tab>
</tablist>
<tabpanel>

1. [Перейдите](https://msk.cloud.vk.com/app/) в личный кабинет VK Cloud.
1. Выберите проект, где находится нужный инстанс БД.
1. Перейдите в раздел **Базы данных** → **Инстансы баз данных**.
1. Найдите в списке нужный шард инстанса БД, раскройте его меню и выберите пункт **Удалить шард**.
1. Нажмите кнопку **Подтвердить**.

</tabpanel>
</tabs>
