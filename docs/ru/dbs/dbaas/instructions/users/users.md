Чтобы разграничить доступ к данным, вы можете добавить пользователей для инстанса БД и назначить им доступ к тем или иным базам данных, созданным на инстансе. Для всех типов СУБД, кроме Redis, первый пользователь для инстанса БД создается при [добавлении инстанса](../create).

Помимо обычных пользователей, у каждого инстанса БД есть администратор — пользователь, который имеет максимально широкие полномочия в рамках инстанса. Единственная доступная операция по управлению администратором — [сброс пароля](#reset_admin_password).

{note:warn}

На инстансах Redis 6 доступны только [создание](#add_user) и [удаление](#delete_user) пользователей. Для Redis 5 никакие операции по управлению пользователями недоступны.

{/note}

## {heading(Сброс пароля администратора)[id=reset_admin_password]}

Используйте эту опцию, чтобы изменить текущий пароль [администратора](../../connect) без ввода старого пароля.

<tabs>
<tablist>
<tab>Личный кабинет</tab>
</tablist>
<tabpanel>

1. [Перейдите](https://msk.cloud.vk.com/app/) в личный кабинет VK Cloud.
1. Выберите проект, где находится нужный инстанс БД.
1. Перейдите в раздел **Базы данных** → **Инстансы баз данных**.
1. Нажмите ![ ](/ru/assets/more-icon.svg "inline") для нужного инстанса БД и выберите пункт **Сбросить пароль администратора БД**.
1. Прочитайте предупреждение и нажмите кнопку **Сбросить**.
1. Скопируйте и сохраните имя пользователя и новый пароль, сгенерированный платформой.
1. Нажмите кнопку **Готово**.

</tabpanel>
</tabs>

## Просмотр списка пользователей

<tabs>
<tablist>
<tab>Личный кабинет</tab>
</tablist>
<tabpanel>

1. [Перейдите](https://msk.cloud.vk.com/app/) в личный кабинет VK Cloud.
1. Выберите проект, где находится нужный инстанс БД.
1. Перейдите в раздел **Базы данных** → **Инстансы баз данных**.
1. Нажмите на имя нужного инстанса БД.
1. На странице инстанса перейдите на вкладку **Пользователи**.

Отобразится список пользователей и доступных им БД.

</tabpanel>
</tabs>

{note:info}

Администратор в списке пользователей не отображается.

{/note}

## {heading(Добавление пользователя)[id=add_user]}

При добавлении пользователю назначаются доступные ему БД. В этих БД пользователь будет иметь полный набор разрешений. Если вы не хотите давать пользователю такие полномочия, [настройте разрешения](#set_user_permissions) отдельно, подключившись к базе данных с правами администратора.

<tabs>
<tablist>
<tab>Личный кабинет</tab>
</tablist>
<tabpanel>

1. [Перейдите](https://msk.cloud.vk.com/app/) в личный кабинет VK Cloud.
1. Выберите проект, где находится нужный инстанс БД.
1. Перейдите в раздел **Базы данных** → **Инстансы баз данных**.
1. Нажмите на имя нужного инстанса БД.
1. На странице инстанса перейдите на вкладку **Пользователи**.
1. Нажмите кнопку **Добавить**.
1. Задайте имя пользователя.

   Требования к имени:

     - Может содержать только цифры, заглавные, строчные латинские буквы и символ нижнего подчеркивания.
     - Не может быть длиннее 16 символов.
     - Не может начинаться с `mcs_`.
     - Не может быть из списка запрещенных имен:

        | Тип СУБД | Запрещенные имена пользователя |
        |--|--|
        | PostgreSQL<br>PostgresPro | `os_admin`, `root`, `postgres`, `replicator` |
        | MySQL | `clusterrepuser` (запрещено только для кластерной конфигурации), `os_admin`, `root` |
        | ClickHouse | `os_admin`, `root`, `default`, `replicator` |
        | MongoDB | `os_admin`, `root` |
        | Tarantool | `os_admin`, `root`, `admin`, `guest`, `replicator` |
        | OpenSearch | `os_admin`, `root`, `dbaasadmin` |
        | Redis 6 | `default`, `os_admin`, `root` |

1. Придумайте или сгенерируйте пароль.

    Требования к паролю:

      - Должен состоять как минимум из 16 символов.
      - Может содержать только заглавные и строчные буквы латинского алфавита, цифры и спецсимволы `.`, `,`, `!`, `$`, `&`, `*`, `(`, `)`, `-`, `+`, `=`.
      - Должен содержать хотя бы одну заглавную букву, строчную букву, цифру и спецсимвол.

    Если пароль будет утерян, его можно [изменить](#change_user_password). Восстановить пароль нельзя.

1. Выберите из списка базы данных, которые будут доступны пользователю.
1. Нажмите кнопку **Создать пользователя**.

</tabpanel>
</tabs>

## Изменение списка доступных БД

Для пользователя можно изменить список доступных ему баз данных инстанса.

<tabs>
<tablist>
<tab>Личный кабинет</tab>
</tablist>
<tabpanel>

1. [Перейдите](https://msk.cloud.vk.com/app/) в личный кабинет VK Cloud.
1. Выберите проект, где находится нужный инстанс БД.
1. Перейдите в раздел **Базы данных** → **Инстансы баз данных**.
1. Нажмите на имя нужного инстанса БД.
1. На странице инстанса перейдите на вкладку **Пользователи**.
1. Нажмите ![ ](/ru/assets/more-icon.svg "inline") для нужного пользователя и выберите пункт **Редактировать пользователя**.
1. Отредактируйте список доступных БД.
1. Нажмите кнопку **Сохранить**.

После назначения новой БД пользователь получает полные разрешения в ней.

</tabpanel>
</tabs>

## {heading(Изменение пароля пользователя)[id=change_user_password]}

<tabs>
<tablist>
<tab>Личный кабинет</tab>
</tablist>
<tabpanel>

1. [Перейдите](https://msk.cloud.vk.com/app/) в личный кабинет VK Cloud.
1. Выберите проект, где находится нужный инстанс БД.
1. Перейдите в раздел **Базы данных** → **Инстансы баз данных**.
1. Нажмите ![ ](/ru/assets/more-icon.svg "inline") для инстанса.

    Дальнейшие действия зависят от того, есть ли в меню опция **Изменить пароль**. Для некоторых типов СУБД и конфигураций пароль пользователя можно изменить только на странице самого инстанса.

    <tabs>
    <tablist>
    <tab>Опция есть в меню</tab>
    <tab>Опции нет в меню</tab>
    </tablist>
    <tabpanel>

      1. Выберите опцию **Изменить пароль**.
      1. В открывшемся окне выберите пользователя из списка.
      1. Задайте или сгенерируйте новый пароль.

         Требования к паролю:

         - Должен состоять как минимум из 16 символов.
         - Может содержать только заглавные и строчные буквы латинского алфавита, цифры и спецсимволы `.`, `,`, `!`, `$`, `&`, `*`, `(`, `)`, `-`, `+`, `=`.
         - Должен содержать хотя бы одну заглавную букву, строчную букву, цифру и спецсимвол.

      1. Нажмите кнопку **Изменить пароль**.

    </tabpanel>
    <tabpanel>

      1. Нажмите на имя нужного инстанса БД.
      1. На странице инстанса перейдите на вкладку **Пользователи**.
      1. Нажмите ![ ](/ru/assets/more-icon.svg "inline") для нужного пользователя и выберите пункт **Изменить пароль**.
      1. Задайте или сгенерируйте новый пароль.

         Требования к паролю:

         - Должен состоять как минимум из 16 символов.
         - Может содержать только заглавные и строчные буквы латинского алфавита, цифры и спецсимволы `.`, `,`, `!`, `$`, `&`, `*`, `(`, `)`, `-`, `+`, `=`.
         - Должен содержать хотя бы одну заглавную букву, строчную букву, цифру и спецсимвол.

      1. Нажмите кнопку **Задать пароль**.

    </tabpanel>
    </tabs>

</tabpanel>
</tabs>

## {heading(Удаление пользователя)[id=delete_user]}

<tabs>
<tablist>
<tab>Личный кабинет</tab>
</tablist>
<tabpanel>

Это групповая операция: при необходимости можно удалить сразу несколько пользователей, выбрав их с помощью флажков.

1. [Перейдите](https://msk.cloud.vk.com/app/) в личный кабинет VK Cloud.
1. Выберите проект, где находится нужный инстанс БД.
1. Перейдите в раздел **Базы данных** → **Инстансы баз данных**.
1. Нажмите на имя нужного инстанса БД.
1. На странице инстанса перейдите на вкладку **Пользователи**.
1. Нажмите ![ ](/ru/assets/more-icon.svg "inline") для нужного пользователя и выберите пункт **Удалить пользователя**.
1. Подтвердите удаление.

</tabpanel>
</tabs>

## {heading(Настройка разрешений для пользователя)[id=set_user_permissions]}

Средствами VK Cloud нельзя настроить избирательные разрешения внутри БД — например, доступ только на чтение или доступ к ограниченному набору данных. Настроить такие разрешения можно только непосредственно в БД, подключившись к ней напрямую с правами администратора.

1. Подключитесь к базе данных предпочитаемым способом, например, [при помощи SDK](../../connect) или внешнего средства администрирования.

   Если у инстанса БД есть хост с ролью `Master`, подключитесь к нему. Если у инстанса нет выделенных хостов с ролью `Master` (как, например, у ClickHouse), подключитесь к любому хосту инстанса.

   Чтобы подключиться с правами администратора укажите:

   - [Имя пользователя](../../connect) для нужного типа СУБД.
   - Пароль администратора. Если вы не знаете пароль или если это первое подключение к инстансу БД после его создания, перед подключением [сбросьте пароль](#reset_admin_password).

   {note:info}

   На инстансах OpenSearch все пользователи, созданные через VK Cloud, получают права администратора, для настройки разрешений вы можете подключиться от имени любого из них.

   {/note}

2. Настройте для пользователя необходимые разрешения.

Список назначенных пользователю БД отображается в личном кабинете, на вкладке **Пользователи** инстанса БД, но доступные разрешения в нем не отображаются.

- БД остается назначенной пользователю, если часть разрешений была отозвана.
- БД назначается пользователю, если в ней были настроены любые разрешения для этого пользователя.
