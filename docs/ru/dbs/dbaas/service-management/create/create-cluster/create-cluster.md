## OpenSearch

<tabs>
<tablist>
<tab>Личный кабинет</tab>
</tablist>
<tabpanel>

1. [Перейдите](https://msk.cloud.vk.com/app/) в личный кабинет VK Cloud.
1. Выберите проект, где нужно создать кластер.
1. Перейдите в раздел **Базы данных → Инстансы баз данных**.
1. Нажмите кнопку **Создать базу данных** или **Добавить**.
1. На шаге «Конфигурация»:

   1. Выберите тип базы данных `OpenSearch`.
   1. Выберите нужную версию OpenSearch, например, `2`.
   1. Нажмите кнопку **Следующий шаг**.

1. На шаге «Параметры»:

   1. Задайте общие параметры кластера:

      - **Имя кластера базы данных**: может содержать только латинские буквы, цифры и спецсимволы `-`, `_`.

        Имена узлов кластера будут состоять из указанного имени и суффикса. Суффикс будет различаться для разных СУБД.

      - **Сеть:** сеть, в которой будет размещаться кластер. Если нужной сети нет в списке, [создайте ее](/ru/networks/vnet/service-management/net#sozdanie_seti).
      - **Ключ для доступа по SSH:** выберите существующий ключ или создайте новый.

        Ключ используется для [подключения к хостам кластера по SSH](../../../connect/ssh).

   1. Настройте резервное копирование. При необходимости параметры резервного копирования можно [задать или изменить](/ru/storage/backups/service-management/db-backup) после создания кластера.

      <tabs>
      <tablist>
      <tab>Отключено</tab>
      <tab>Полное</tab>
      </tablist>
      <tabpanel>

      Выберите эту опцию, чтобы не использовать резервное копирование для кластера.

      </tabpanel>
      <tabpanel>

      Задайте параметры резервного копирования:

      - Укажите **Периодичность резервного копирования**.
      - При необходимости включите резервное копирование по [стратегии GFS](/ru/storage/backups/concepts/retention-policy/gfs-backup) и настройте параметры хранения.
      - Если резервное копирование по стратегии GFS не включено, задайте максимальное количество полных резервных копий.

      </tabpanel>
      </tabs>

   1. Нажмите кнопку **Следующий шаг**.

1. На шаге «Ноды»:

   1. В блоке **Dashboards** выберите опцию **Включить Dashboards**, если необходим доступ к веб-интерфейсу [OpenSearch Dashboards](https://opensearch.org/docs/latest/dashboards/quickstart-dashboards/).

      Затем задайте параметры:

      - **Категория виртуальной машины**: выберите категорию предустановленных конфигураций ВМ. Подробнее в [обзоре сервиса Cloud Servers](/ru/computing/iaas/concepts/about#shablony_konfiguraciy).

      - **Тип виртуальной машины:** [шаблон конфигурации](/ru/computing/iaas/concepts/about#shablony_konfiguraciy) для кластера.

        Шаблоны с высокопроизводительными CPU доступны [по запросу в службу поддержки](/ru/contacts). Чтобы воспользоваться этими шаблонами, выберите опцию **Показывать только высокопроизводительные CPU**.

      - **Зона доступности:** [зона доступности](/ru/intro/start/architecture#az) для кластера.

        <warn>

        Зона доступности всех узлов кластера должна совпадать.

        </warn>

      - **Тип диска:** [тип диска](/ru/computing/iaas/concepts/about#diski) для кластера.

      - **Размер диска, GB:** размер диска (в гигабайтах).

        Чем больше размер диска, тем выше его производительность в некоторых дисковых операциях.

      - **Назначить внешний IP**: выберите эту опцию, чтобы иметь доступ к веб-интерфейсу из интернета.

        Узлу с ролью `Dashboards` будет назначен плавающий IP-адрес.

        <warn>

        Использование плавающего IP-адреса [тарифицируется](/ru/networks/vnet/tariffs#tarificiruetsya).

        </warn>

   1. В блоке **Master Node** выберите опцию **Использовать выделенные master ноды**, если необходимо назначить роль `master` на выделенный узел кластера.

      <info>

      Если эта опция не выбрана, роль `master` будет назначена узлам с ролью `data`. [Подробнее о структуре кластера и ролях](../../../concepts/architecture#arhitektura_klastera_opensearch).

      </info>

      Затем задайте параметры:

      - **Категория виртуальной машины**: выберите категорию предустановленных конфигураций ВМ. Подробнее в [обзоре сервиса Cloud Servers](/ru/computing/iaas/concepts/about#shablony_konfiguraciy).

      - **Тип виртуальной машины:** [шаблон конфигурации](/ru/computing/iaas/concepts/about#shablony_konfiguraciy) для кластера.

        Шаблоны с высокопроизводительными CPU доступны [по запросу в службу поддержки](/ru/contacts). Чтобы воспользоваться этими шаблонами, выберите опцию **Показывать только высокопроизводительные CPU**.

      - **Зона доступности:** [зона доступности](/ru/intro/start/architecture#az) для кластера.

      - **Тип диска:** [тип диска](/ru/computing/iaas/concepts/about#diski) для кластера.

      - **Размер диска, GB:** размер диска (в гигабайтах).

        Чем больше размер диска, тем выше его производительность в некоторых дисковых операциях.

   1. В блоке **Data Node** выполните настройки узлов с ролью `data`.

      Задайте параметры:

      - **Категория виртуальной машины**: выберите категорию предустановленных конфигураций ВМ. Подробнее в [обзоре сервиса Cloud Servers](/ru/computing/iaas/concepts/about#shablony_konfiguraciy).

      - **Тип виртуальной машины:** [шаблон конфигурации](/ru/computing/iaas/concepts/about#shablony_konfiguraciy) для кластера.

        Шаблоны с высокопроизводительными CPU доступны [по запросу в службу поддержки](/ru/contacts). Чтобы воспользоваться этими шаблонами, выберите опцию **Показывать только высокопроизводительные CPU**.

      - **Зона доступности:** [зона доступности](/ru/intro/start/architecture#az) для кластера.

      - **Тип диска:** [тип диска](/ru/computing/iaas/concepts/about#diski) для кластера.

      - **Размер диска, GB:** размер диска (в гигабайтах).

        Чем больше размер диска, тем выше его производительность в некоторых дисковых операциях.

      - **Количество узлов**.

   1. Нажмите кнопку **Следующий шаг**.

1. На шаге «Инициализация»:

   1. Укажите параметры инициализации баз данных. Доступные параметры зависят от выбранного **Типа создания**:

      <tabs>
      <tablist>
      <tab>Новая база данных</tab>
      <tab>Восстановить из копии</tab>
      </tablist>
      <tabpanel>

      Будет создана новая пустая база данных.

      Задайте:

      - Имя базы данных.
      - Имя пользователя и пароль.

      </tabpanel>
      <tabpanel>

      Эта опция неактивна, если нет резервных копий, соответствующих выбранному типу и версии СУБД.

      Базы данных будут восстановлены из резервной копии.

      <warn>

      Перед восстановлением убедитесь, что:

      - Количество шардов в новом инстансе БД такое же, как в резервной копии инстанса.
      - Размер дисков в новом инстансе БД не меньше, чем в резервной копии.
      - Названия шардов нового инстанса БД такие же, как в резервной копии.

      </warn>

      Из выпадающего списка **Бэкап** выберите резервную копию, из которой необходимо выполнить восстановление.

      </tabpanel>
      </tabs>

   1. Нажмите кнопку **Создать базу данных**.

      Дождитесь завершения операции. Создание кластера может занять длительное время.

</tabpanel>
</tabs>

## MySQL, PostgreSQL, PostgresPro Enterprise, PostgresPro Enterprise 1C

<warn>

При создании кластера перечисленных типов СУБД для него будет создан [сервисный балансировщик нагрузки](/ru/networks/vnet/concepts/load-balancer#tipy_balansirovshchikov_nagruzki).

Использование балансировщика [тарифицируется](/ru/networks/vnet/tariffs).

</warn>

<tabs>
<tablist>
<tab>Личный кабинет</tab>
</tablist>
<tabpanel>

1. [Перейдите](https://msk.cloud.vk.com/app/) в личный кабинет VK Cloud.
1. Выберите проект, где нужно создать кластер.
1. Перейдите в раздел **Базы данных → Инстансы баз данных**.
1. Нажмите кнопку **Создать базу данных** или **Добавить**.
1. На шаге «Конфигурация»:

   1. Выберите один из типов базы данных: `MySQL`, `PostgreSQL`, `PostgresPro Enterprise` или `PostgresPro Enterprise 1C`.
   1. Выберите нужную версию.
   1. Выберите конфигурацию **Кластер**.
   1. Нажмите кнопку **Следующий шаг**.

1. На шаге «Создание инстанса»:

   1. Задайте общие параметры кластера:

      - **Имя кластера базы данных**: может содержать только латинские буквы, цифры и спецсимволы `.`, `-`, `_`.

        Имена узлов кластера будут состоять из указанного имени и суффикса. Суффикс будет различаться для разных СУБД.

      - **Категория виртуальной машины**: выберите категорию предустановленных конфигураций ВМ. Подробнее в [обзоре сервиса Cloud Servers](/ru/computing/iaas/concepts/about#shablony_konfiguraciy).

      - **Тип виртуальной машины:** [шаблон конфигурации](/ru/computing/iaas/concepts/about#shablony_konfiguraciy) для кластера.

        Шаблоны с высокопроизводительными CPU доступны [по запросу в службу поддержки](/ru/contacts). Чтобы воспользоваться этими шаблонами, выберите опцию **Показывать только высокопроизводительные CPU**.

      - **Зона доступности:** [зона доступности](/ru/intro/start/architecture#az) для кластера.

      - **Тип диска:** [тип диска](/ru/computing/iaas/concepts/about#diski) для кластера.

      - **Размер диска, GB:** размер диска (в гигабайтах).

        Чем больше размер диска, тем выше его производительность в некоторых дисковых операциях.

      - **Включить автомасштабирование диска:** выберите эту опцию, чтобы размер диска автоматически увеличивался при заполнении диска данными. При выборе этой опции также укажите **Максимальный размер диска, GB**.

      - **Сеть:** сеть, в которой будет размещаться кластер. Если нужной сети нет в списке, [создайте ее](/ru/networks/vnet/service-management/net#sozdanie_seti).

      - **Назначить внешний IP:** выберите эту опцию, чтобы назначить кластеру плавающий IP-адрес.

        Такой кластер будет доступен из интернета.

        <warn>

        Использование плавающего IP-адреса [тарифицируется](/ru/networks/vnet/tariffs#tarificiruetsya).

        </warn>

      - **Настройки Firewall:** список групп безопасности для кластера.

        Добавьте в список группу безопасности `ssh`, чтобы получить возможность [подключаться к хостам кластера по SSH](../../../connect/ssh).

      - **Количество узлов:** количество хостов в кластере.

      - **Ключ для доступа по SSH:** выберите существующий ключ или создайте новый.

        Ключ используется для [подключения к хостам кластера по SSH](../../../connect/ssh).

   1. Настройте резервное копирование. При необходимости параметры резервного копирования можно [задать или изменить](/ru/storage/backups/service-management/db-backup) после создания кластера.

      <tabs>
      <tablist>
      <tab>Отключено</tab>
      <tab>Point-in-time recovery</tab>
      <tab>Полное</tab>
      </tablist>
      <tabpanel>

      Выберите эту опцию, чтобы не использовать резервное копирование для кластера.

      </tabpanel>
      <tabpanel>

      Эта опция позволяет выполнять резервное копирование по схеме Point-In-Time-Recovery (PITR). Для MySQL опция недоступна.

      Если опция выбрана, задайте параметры резервного копирования:

      - **Время начала:** время начала резервного копирования в формате `ЧЧ:ММ`. Указанный в подсказке часовой пояс соответствует часовому поясу вашего устройства. Формат времени — 24 часа.

      - **Хранить, кол-во копий:** количество копий, которое необходимо хранить.

      - **Интервал резервного копирования**: периодичность создания резервных копий.

      </tabpanel>
      <tabpanel>

      Задайте параметры резервного копирования:

      - Укажите **Периодичность резервного копирования**.
      - При необходимости включите резервное копирование по [стратегии GFS](/ru/storage/backups/concepts/retention-policy/gfs-backup) и настройте параметры хранения.
      - Если резервное копирование по стратегии GFS не включено, задайте максимальное количество полных резервных копий.

      </tabpanel>
      </tabs>

   1. Нажмите кнопку **Следующий шаг**.

1. На шаге «Инициализация»:

   1. Укажите параметры инициализации баз данных. Доступные параметры зависят от выбранного **Типа создания**:

      <tabs>
      <tablist>
      <tab>Новая база данных</tab>
      <tab>Восстановить из копии</tab>
      </tablist>
      <tabpanel>

      Будет создана новая пустая база данных.

      Задайте:

      - Имя базы данных.
      - Имя пользователя и пароль.

      </tabpanel>
      <tabpanel>

      Эта опция неактивна, если нет резервных копий, соответствующих выбранному типу и версии СУБД.

      Базы данных будут восстановлены из резервной копии.

      Для MySQL: из выпадающего списка **Бэкап** выберите резервную копию, из которой необходимо выполнить восстановление.

      Для PostreSQL, PostgresPro Enterprise и PostgresPro Enterprise 1C выберите **Тип бэкапа**:

      - **Point-in-time recovery:**

        - Из выпадающего списка **Бэкап** выберите резервную копию, начиная с которой должно выполняться восстановление.
        - При необходимости выберите **Дату и время**. Базы данных будут восстановлены в состояние на указанный момент времени.

          Если не выбирать дату и время, то восстановление будет выполнено на последний доступный момент времени.

      - **Полный:** из выпадающего списка **Бэкап** выберите резервную копию, из которой необходимо выполнить восстановление.

      </tabpanel>
      </tabs>

   1. Нажмите кнопку **Создать базу данных**.

      Дождитесь завершения операции. Создание кластера может занять длительное время.

</tabpanel>
</tabs>

## Tarantool

<tabs>
<tablist>
<tab>Личный кабинет</tab>
</tablist>
<tabpanel>

1. [Перейдите](https://msk.cloud.vk.com/app/) в личный кабинет VK Cloud.
1. Выберите проект, где нужно создать кластер.
1. Перейдите в раздел **Базы данных → Инстансы баз данных**.
1. Нажмите кнопку **Создать базу данных** или **Добавить**.
1. На шаге «Конфигурация»:

   1. Выберите тип базы данных `Tarantool`.
   1. Выберите нужную версию.
   1. Выберите конфигурацию **Кластер**.
   1. Нажмите кнопку **Следующий шаг**.

1. На шаге «Создание инстанса»:

   1. Задайте общие параметры кластера:

      - **Имя кластера базы данных**: может содержать только латинские буквы, цифры и спецсимволы `.`, `-`, `_`.

        Имена узлов кластера будут состоять из указанного имени и суффикса. Суффикс будет различаться для разных СУБД.

      - **Категория виртуальной машины**: выберите категорию предустановленных конфигураций ВМ. Подробнее в [обзоре сервиса Cloud Servers](/ru/computing/iaas/concepts/about#shablony_konfiguraciy).

      - **Тип виртуальной машины:** [шаблон конфигурации](/ru/computing/iaas/concepts/about#shablony_konfiguraciy) для кластера.

        Шаблоны с высокопроизводительными CPU доступны [по запросу в службу поддержки](/ru/contacts). Чтобы воспользоваться этими шаблонами, выберите опцию **Показывать только высокопроизводительные CPU**.

      - **Зона доступности:** [зона доступности](/ru/intro/start/architecture#az) для кластера.

      - **Тип диска:** [тип диска](/ru/computing/iaas/concepts/about#diski) для кластера.

      - **Размер диска, GB:** размер диска (в гигабайтах).

        Чем больше размер диска, тем выше его производительность в некоторых дисковых операциях.

      - **Сеть:** сеть, в которой будет размещаться кластер. Если нужной сети нет в списке, [создайте ее](/ru/networks/vnet/service-management/net#sozdanie_seti).

      - **Назначить внешний IP:** выберите эту опцию, чтобы назначить хостам кластера плавающий IP-адрес.

        Такой кластер будет доступен из интернета.

        <warn>

        Использование плавающего IP-адреса [тарифицируется](/ru/networks/vnet/tariffs#tarificiruetsya).

        </warn>

      - **Настройки Firewall:** список групп безопасности для кластера.

        Добавьте в список группу безопасности `ssh`, чтобы получить возможность [подключаться к хостам кластера по SSH](../../../connect/ssh).

      - **Ключ для доступа по SSH:** выберите существующий ключ или создайте новый.

        Ключ используется для [подключения к хостам кластера по SSH](../../../connect/ssh).

      - Выберите опцию **Включить мониторинг**, если необходимо осуществлять мониторинг кластера с помощью инструментов платформы VK Cloud.

   1. Нажмите кнопку **Следующий шаг**.

1. На шаге «Инициализация»:

   1. Укажите параметры инициализации баз данных. Доступные параметры зависят от выбранного **Типа создания**.

      Для Tarantool доступен только тип **Новая база данных**.

      <tabs>
      <tablist>
      <tab>Новая база данных</tab>
      </tablist>
      <tabpanel>

      Будет создана новая пустая база данных.

      Задайте имя пользователя и пароль.

      </tabpanel>
      </tabs>

   1. Нажмите кнопку **Создать базу данных**.

      Дождитесь завершения операции. Создание кластера может занять длительное время.

</tabpanel>
</tabs>

## Другие типы СУБД

<tabs>
<tablist>
<tab>Личный кабинет</tab>
</tablist>
<tabpanel>

1. [Перейдите](https://msk.cloud.vk.com/app/) в личный кабинет VK Cloud.
1. Выберите проект, где нужно создать кластер.
1. Перейдите в раздел **Базы данных → Инстансы баз данных**.
1. Нажмите кнопку **Создать базу данных** или **Добавить**.
1. На шаге «Конфигурация»:

   1. Выберите нужный тип базы данных.
   1. Выберите нужную версию.
   1. Выберите конфигурацию **Кластер**.
   1. Нажмите кнопку **Следующий шаг**.

1. На шаге «Параметры»:

   1. Задайте общие параметры кластера:

      - **Имя кластера базы данных**:

        - ClickHouse: может содержать только латинские буквы и цифры;
        - MongoDB и Redis: может содержать только латинские буквы, цифры и спецсимволы `-`, `_`;

        Имена узлов кластера будут состоять из указанного имени и суффикса. Суффикс будет различаться для разных СУБД.

      - **Сеть:** сеть, в которой будет размещаться кластер. Если нужной сети нет в списке, [создайте ее](/ru/networks/vnet/service-management/net#sozdanie_seti).

      - **Назначить внешний IP:** выберите эту опцию, чтобы назначить плавающий IP-адрес:

        - для кластера (MongoDB);
        - для хостов кластера (ClickHouse).

        Такой кластер будет доступен из интернета.

        Для Redis эта опция недоступна.

        <warn>

        Использование плавающего IP-адреса [тарифицируется](/ru/networks/vnet/tariffs#tarificiruetsya).

        </warn>

      - **Ключ для доступа по SSH:** выберите существующий ключ или создайте новый.

        Ключ используется для [подключения к хостам кластера по SSH](../../../connect/ssh).

   1. Настройте резервное копирование. При необходимости параметры резервного копирования можно [задать или изменить](/ru/storage/backups/service-management/db-backup) после создания кластера.

      <tabs>
      <tablist>
      <tab>Отключено</tab>
      <tab>Полное</tab>
      </tablist>
      <tabpanel>

      Выберите эту опцию, чтобы не использовать резервное копирование для кластера.

      </tabpanel>
      <tabpanel>

      Задайте параметры резервного копирования:

      - Укажите **Периодичность резервного копирования**.
      - При необходимости включите резервное копирование по [стратегии GFS](/ru/storage/backups/concepts/retention-policy/gfs-backup) и настройте параметры хранения.
      - Если резервное копирование по стратегии GFS не включено, задайте максимальное количество полных резервных копий.

      </tabpanel>
      </tabs>

   1. Выберите опцию **Включить мониторинг**, если необходимо осуществлять мониторинг кластера с помощью инструментов платформы VK Cloud.

      Для MongoDB эта опция недоступна.

   1. Нажмите кнопку **Следующий шаг**.

1. На шаге «Шарды» задайте настройки шардов.

   Для ClickHouse количество шардов можно изменять, добавляя и удаляя шарды (в кластере должен быть минимум один шард). Для Redis и MongoDB количество шардов фиксировано.

   1. Для каждого шарда задайте:

      - **Название шарда**.
      - **Количество реплик в шарде**.

        Для Redis количество реплик в шарде фиксировано.

      - **Категория виртуальной машины**: выберите категорию предустановленных конфигураций ВМ. Подробнее в [обзоре сервиса Cloud Servers](/ru/computing/iaas/concepts/about#shablony_konfiguraciy).

      - **Тип виртуальной машины:** [шаблон конфигурации](/ru/computing/iaas/concepts/about#shablony_konfiguraciy) для хостов шарда.

        Шаблоны с высокопроизводительными CPU доступны [по запросу в службу поддержки](/ru/contacts). Чтобы воспользоваться этими шаблонами, выберите опцию **Показывать только высокопроизводительные CPU**.

      - **Зона доступности:** [зона доступности](/ru/intro/start/architecture#az) для хостов шарда.

        <warn>

        Зона доступности всех узлов кластера должна совпадать.

        </warn>

      - **Тип диска:** [тип диска](/ru/computing/iaas/concepts/about#diski) для хостов шарда.

      - **Размер диска, GB:** размер диска для хостов шарда (в гигабайтах).

        Чем больше размер диска, тем выше его производительность в некоторых дисковых операциях.

      - **Включить автомасштабирование диска:** выберите эту опцию, чтобы размер диска автоматически увеличивался при заполнении диска данными. Поддержка функциональности зависит от [типа и версии СУБД](../../../concepts/disks-autoscaling#subd_s_podderzhkoy_avtomasshtabirovaniya). При выборе этой опции также укажите **Максимальный размер диска, GB**.

   1. Нажмите кнопку **Следующий шаг**.

1. На шаге «Инициализация»:

   1. Укажите параметры инициализации баз данных. Доступные параметры зависят от выбранного **Типа создания**:

      <tabs>
      <tablist>
      <tab>Новая база данных</tab>
      <tab>Восстановить из копии</tab>
      </tablist>
      <tabpanel>

      Будет создана новая пустая база данных.

      Для Redis параметров инициализации не предусмотрено.

      Для других типов СУБД:

      - Задайте имя базы данных.
      - Задайте имя пользователя и пароль.

      </tabpanel>
      <tabpanel>

      Эта опция неактивна, если нет резервных копий, соответствующих выбранному типу и версии СУБД.

      Базы данных будут восстановлены из резервной копии.

      <warn>

      Перед восстановлением убедитесь, что:

      - Количество шардов в новом инстансе БД такое же, как в резервной копии инстанса.
      - Размер дисков в новом инстансе БД не меньше, чем в резервной копии.
      - Названия шардов нового инстанса БД такие же, как в резервной копии.

      </warn>

      Из выпадающего списка **Бэкап** выберите резервную копию, из которой необходимо выполнить восстановление.

      </tabpanel>
      </tabs>

   1. Нажмите кнопку **Создать базу данных**.

      Дождитесь завершения операции. Создание кластера может занять длительное время.

</tabpanel>
</tabs>
