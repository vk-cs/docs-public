Быстрый старт поможет вам начать работу с сервисом Bare Metal и познакомиться с его возможностями. Настройка сервиса будет показана на примере сервера Bare Metal c установкой ОС Linux с подключением по SSH.

{note:info}

ОС Windows не поддерживается.

{/note}

Пройдя все шаги быстрого старта, вы:

1. [Создадите](#net-setup) сеть.
1. [Арендуете](#order) сервер Bare Metal.
1. [Создадите](#jump-host) отдельный промежуточный хост в виде виртуальной машины на Linux с внешним IP-адресом.
1. [Установите ОС](#os-setup) Linux на сервер Bare Metal.
1. [Подключитесь](#connect) к серверу Bare Metal по SSH через созданный ранее промежуточный хост.

## {heading(Подготовительные шаги)[id=preparings]}

1. [Зарегистрируйтесь](/ru/intro/onboarding/account) на платформе VK Cloud.
1. Убедитесь, что баланса лицевого счета хватает для:

    - Аренды желаемой конфигурации сервера Bare Metal.
    - Оплаты [виртуальной машины](/ru/computing/iaas/concepts/vm) с Linux в конфигурации с 1 vCPU, 1 ГБ RAM, 1 диском HDD на 10 ГБ и публичным IP-адресом Sprut.

      Цены на указанные ресурсы доступны в [прайс-листе](https://cloud.vk.com/pricelist/).

1. Проверьте, хватает ли [квот](/ru/tools-for-using-services/account/concepts/quotasandlimits) для:

    - аренды одного сервера Bare Metal;
    - создания виртуальной машины минимальной конфигурации: 1 vCPU, 1 ГБ RAM, 1 диск;
    - добавления одного Floating IP-адреса Sprut.

## {heading({counter(TOC-steps)}. Создайте сеть)[id=net-setup]}

1. [Перейдите](https://msk.cloud.vk.com/app/) в личный кабинет VK Cloud.
1. Перейдите в раздел **Виртуальные сети** → **Сети**.
1. Нажмите кнопку **Создать**.
1. Задайте параметры сети:

    - **Название сети**: введите значение `my-net`.
    
    - **Доступ в интернет**: включите опцию.
    - **Маршрутизатор**: выберите опцию `Создать новый`.
    
    Остальные параметры оставьте по умолчанию.

1. Нажмите кнопку **Добавить сеть**.

## {heading({counter(TOC-steps)}. Закажите сервер)[id=order]}

1. [Перейдите](https://msk.cloud.vk.com/app/) в личный кабинет VK Cloud.
1. Перейдите в раздел **Облачные вычисления** → **Bare Metal**.
1. Нажмите кнопку **Арендовать**.
1. Задайте параметры заказа:

    - **Конфигурация**: выберите желаемую конфигурацию сервера.
    - **Количество серверов**: укажите значение `1`.
    - **Операционная система**: выберите `Без OS`.
    - **Приватная подсеть**: выберите сеть `my-net` и созданную по умолчанию подсеть.

1. Нажмите кнопку **Арендовать**.

    После завершения оформления заказа в списке появится сервер в статусе `Ожидайте`.

1. Дождитесь, когда статус сервера в списке сменится на `Активный`.

## {heading({counter(TOC-steps)}. Создайте промежуточный хост)[id=jump-host]}

1. Сгенерируйте SSH ключ для промежуточного хоста:

   {tabs}

   {tab(Linux/macOS)}

   Выполните команду в терминале:

   ```bash
   ssh-keygen -t rsa -b 2048 -f ~/.ssh/my_key -N ""
   ```

   В директории `~/.ssh/` будет создано два файла: `my_key` и `my_key.pub`.

   {/tab}

   {tab(Windows 10/11)}

   В PowerShell выполните команду:

   ```ps
   ssh-keygen -t rsa -b 2048 -f "$env:USERPROFILE\.ssh\my_key" -N `"`"`"
   ```

   В директории `%USERPROFILE%\.ssh\` будет создано два файла: `my_key` и `my_key.pub`.

   {/tab}

   {/tabs}

1. [Перейдите](https://msk.cloud.vk.com/app/) в личный кабинет VK Cloud.
1. Перейдите в раздел **Облачные вычисления** → **Виртуальные машины**.
1. Нажмите кнопку **Создать инстанс** или **Добавить**.
1. Задайте параметры ВМ:

     - **Имя виртуальной машины**: введите `my-jump-host`.
     - **Тип виртуальной машины**: выберите `STD2-1-1`, минимальную конфигурацию.     
     - **Тип диска**: выберите `HDD`. Для промежуточного хоста не требуется высокая производительность накопителя.
     - **Операционная система**: выберите `Ubuntu 24.04`.

     Остальные параметры оставьте по умолчанию.

1. Нажмите кнопку **Следующий шаг**.
1. Настройте подключение ВМ к сети:

   - **Сеть**: выберите сеть `my-net` и созданную по умолчанию подсеть.
   - **Ключ виртуальной машины**: выберите `Загрузить публичный ssh ключ`.

      Откроется форма для импорта ключа. Заполните поле **Название ключа** и скопируйте свой открытый ключ в поле **Публичный ключ**. Узнать его можно, прочитав файл `my_key.pub`:

      {tabs}

      {tab(Linux/macOS)}

      Выполните команду в терминале:

      ```bash
      cat ~/.ssh/my_key.pub
      ```

      {/tab}

      {tab(Windows 10/11)}

      В PowerShell выполните команду:

      ```ps
      Get-Content "$env:USERPROFILE\.ssh\my_key.pub"
      ```

      {/tab}

      {/tabs}

   - **Настройки Firewall**: добавьте группу безопасности `ssh`.
   - **Назначить внешний IP**: включите опцию.
   - **Внешний IP**:  выберите `Выделить новый`.

   Остальные параметры оставьте по умолчанию.

1. Нажмите кнопку **Следующий шаг**.
1. Отключите настройку резервного копирования, для промежуточного хоста оно не нужно.
1. Нажмите кнопку **Создать инстанс**.
1. Дождитесь окончания создания ВМ и проверьте возможность подключения по SSH. Для этого введите команду:

   ```bash
   ssh <ИМЯ_ПОЛЬЗОВАТЕЛЯ>@<IP-АДРЕС_ПРОМЕЖУТОЧНОГО_ХОСТА>
   ```

   Здесь:

   - `<ИМЯ_ПОЛЬЗОВАТЕЛЯ>` — имя учетной записи по умолчанию, которое [используется в образах VK Cloud](/ru/computing/iaas/concepts/oper-system#default_account).
   - `<IP-АДРЕС_ПРОМЕЖУТОЧНОГО_ХОСТА>` — внешний IP-адрес промежуточного хоста.

   При первом подключении по SSH появится запрос подтверждения:

   ```txt
   The authenticity of host 'XXX.XXX.XXX.XXX (XXX.XXX.XXX.XXX)' can't be established.
   ECDSA key fingerprint is SHA256:aYZIWs9N6KRtfFOuic6eoWcluhSp6+j************
   Are you sure you want to continue connecting (yes/no)?
   ```

   Введите в терминале `yes` и нажмите ENTER.

1. Завершите SSH-сессию с помощью команды:

   ```shell
   quit
   ```

## {heading({counter(TOC-steps)}. Установите ОС)[id=os-setup]}

1. [Перейдите](https://msk.cloud.vk.com/app/) в личный кабинет VK Cloud.
1. Перейдите в раздел **Облачные вычисления** → **Bare Metal**.
1. В списке серверов Bare Metal нажмите на имя нужного сервера.
1. На странице сервера нажмите ![ ](/ru/assets/more-icon.svg "inline") и выберите пункт **Установить операционную систему**.

1. Задайте параметры сервера:

    - **Название**: введите `my-bare-metal`.
    - **Операционная система**: выберите `Выбрать OS` и образ `Ubuntu 24.04`.

1. Нажмите кнопку **Следующий шаг**.
1. Для параметра **Сеть** выберите сеть `my-net` и созданную по умолчанию подсеть.
1. Нажмите кнопку **Установить** и подтвердите действие.

    Запустится установка ОС и автоматически скачается файл приватного ключа `*.pem` от вашей ключевой пары. Сохраните его, позже он потребуется для подключения к серверу по SSH.

    Открытая часть ключа будет автоматически добавлена на сервер.

    {note:err}

    Файл приватного ключа `*.pem` нельзя восстановить. В случае его утери вы не сможете подключиться к серверу с помощью ключевой пары.

    {/note}

## {heading({counter(TOC-steps)}. Подключитесь к серверу)[id=connect]}

{tabs}

{tab(Linux/macOS)}

1. Откройте терминал и настройте права доступа к файлу ключа:

   ```bash
   chmod 400 <ФАЙЛ_КЛЮЧА>
   ```

   Здесь `<ФАЙЛ_КЛЮЧА>` — путь до `*.pem` файла с приватным ключом.

   Пример для файла ключа `MyPrivateKey.pem`, который находится в директории `/path/to/file/`:

   ```bash
   chmod 400 /path/to/file/MyPrivateKey.pem
   ```

1. Подключитесь к серверу Bare Metal.

   Сначала необходимо подключиться к промежуточному хосту через его внешний IP, а затем уже к серверу Bare Metal по его внутреннему IP. Это можно сделать одной командой:

      ```bash
      ssh -i <ФАЙЛ_КЛЮЧА> \
          -J <ИМЯ_ПОЛЬЗОВАТЕЛЯ>@<IP-АДРЕС_ПРОМЕЖУТОЧНОГО_ХОСТА> \
             <ИМЯ_ПОЛЬЗОВАТЕЛЯ>@<ВНУТРЕННИЙ_IP-АДРЕС_СЕРВЕРА>
      ```

      Здесь:

      - `<ФАЙЛ_КЛЮЧА>` — путь до `*.pem` файла с приватным ключом.
      - `<ИМЯ_ПОЛЬЗОВАТЕЛЯ>` — имя учетной записи по умолчанию, которое [используется в образах VK Cloud](/ru/computing/iaas/concepts/oper-system#default_account). И для промежуточного хоста, и для сервера Bare Metal нужно ввести имя пользователя, соответствующее используемому в них образу ОС.
      - `<IP-АДРЕС_ПРОМЕЖУТОЧНОГО_ХОСТА>` — внешний IP-адрес промежуточного хоста.
      - `<ВНУТРЕННИЙ_IP-АДРЕС_СЕРВЕРА>` — внутренний IP-адрес вашего сервера Bare Metal.

   При первом подключении по SSH появится запрос подтверждения:

   ```txt
   The authenticity of host 'XXX.XXX.XXX.XXX (XXX.XXX.XXX.XXX)' can't be established.
   ECDSA key fingerprint is SHA256:aYZIWs9N6KRtfFOuic6eoWcluhSp6+j************
   Are you sure you want to continue connecting (yes/no)?
   ```

   Введите в терминале `yes` и нажмите ENTER.

{/tab}

{tab(Windows 10/11)}

1. Настройте права доступа к файлу приватного ключа:

   1. Откройте свойства файла приватного ключа `.pem`.
   1. Перейдите на вкладку **Безопасность** и нажмите кнопку **Дополнительно**. Откроется окно **Дополнительные параметры безопасности**.
   1. Нажмите кнопку **Отключение наследования** и в открывшемся окне выберите **Удалить все унаследованные разрешения из этого объекта**.
   1. В окне **Дополнительные параметры безопасности** нажмите кнопку **Добавить**.
   1. В открывшемся окне нажмите **Выберите субъект** и укажите пользователя ОС Windows, от имени которого будет запущена командная строка для подключения к ВМ.
   1. Подтвердите изменения, последовательно нажав **ОК** в открытых окнах настроек.

1. Подключитесь к серверу Bare Metal.

   Сначала необходимо подключиться к промежуточному хосту через его внешний IP, а затем уже к серверу Bare Metal по его внутреннему IP. Это можно сделать одной командой:

      ```ps
      ssh -i <ФАЙЛ_КЛЮЧА> `
          -J <ИМЯ_ПОЛЬЗОВАТЕЛЯ>@<IP-АДРЕС_ПРОМЕЖУТОЧНОГО_ХОСТА> `
             <ИМЯ_ПОЛЬЗОВАТЕЛЯ>@<ВНУТРЕННИЙ_IP-АДРЕС_СЕРВЕРА>
      ```

      Здесь:

      - `<ФАЙЛ_КЛЮЧА>` — путь до `*.pem` файла с приватным ключом.
      - `<ИМЯ_ПОЛЬЗОВАТЕЛЯ>` — имя учетной записи по умолчанию, которое [используется в образах VK Cloud](/ru/computing/iaas/concepts/oper-system#default_account). И для промежуточного, и для сервера Bare Metal нужно ввести имя пользователя, соответствующее используемому в них образу ОС.
      - `<IP-АДРЕС_ПРОМЕЖУТОЧНОГО_ХОСТА>` — внешний IP-адрес промежуточного хоста.
      - `<ВНУТРЕННИЙ_IP-АДРЕС_СЕРВЕРА>` — внутренний IP-адрес вашего сервера Bare Metal.

   При первом подключении по SSH появится запрос подтверждения:

   ```txt
   The authenticity of host 'XXX.XXX.XXX.XXX (XXX.XXX.XXX.XXX)' can't be established.
   ECDSA key fingerprint is SHA256:aYZIWs9N6KRtfFOuic6eoWcluhSp6+j************
   Are you sure you want to continue connecting (yes/no)?
   ```

   Введите в терминале `yes` и нажмите ENTER.

{/tab}

{/tabs}

## {heading(Удалите неиспользуемые ресурсы)[id=clean-up]}

Созданные ресурсы тарифицируются и потребляют вычислительные ресурсы. Если они вам больше не нужны:

- [Остановите](/ru/computing/iaas/instructions/vm/vm-manage#start_stop_restart_vm) промежуточный хост, чтобы воспользоваться им позже, или [удалите](/ru/computing/iaas/instructions/vm/vm-manage#delete_vm) его навсегда.
- [Откажитесь](/ru/computing/bare-metal/instructions/manage-service#delete) от аренды сервера Bare Metal.
- [Удалите Floating IP-адрес](/ru/networks/vnet/instructions/ip/floating-ip#delete), назначенный промежуточному хосту. Присутствующие в проекте Floating IP-адреса тарифицируются, даже если не привязаны к какому-либо сервису.
