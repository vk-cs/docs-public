В аварийных ситуациях и при отсутствии [подключения к виртуальной машине](../vm-connect/vm-connect-nix#4_podklyuchites_k_vm) по сети используйте [VNC-консоль](#vnc-konsol) или просмотрите [логи сообщений ВМ](#logi_soobshcheniy_vm).

{note:info}

Информация о действиях пользователя с ВМ и об изменении ее состояния содержится в [журнале событий](../vm-manage#prosmotr_zhurnala_sobytiy) OpenStack.

{/note}

## VNC-консоль

VNC-консоль — инструмент диагностики и управления виртуальными машинами, который работает в браузере. Воспользуйтесь VNC-консолью, если:

- виртуальная машина не имеет внешнего IP-адреса или не подключена к интернету;
- рекомендованные способы подключения к ВМ (по [SSH](../vm-connect/vm-connect-nix) или [RDP](../vm-connect/vm-connect-win)) не работают.

Доступ к VNC-консоли появляется сразу после запуска виртуальной машины. Это позволяет обнаружить сбои во время загрузки операционной системы.

Особенности работы с VNC-консолью:

- для ввода текста можно использовать только латиницу;
- буфер обмена в VNC-консоли недоступен, скопировать и вставить текст нельзя.

Чтобы подключиться к ВМ с помощью VNC-консоли:

1. Откройте консоль в личном кабинете VK Cloud или используйте адрес, полученный через OpenStack CLI.

    <tabs>
    <tablist>
    <tab>Личный кабинет</tab>
    <tab>OpenStack CLI</tab>
    </tablist>

    <tabpanel>

    1. [Перейдите](https://msk.cloud.vk.com/app/) в личный кабинет VK Cloud.
    1. Перейдите в раздел **Облачные вычисления → Виртуальные машины**.
    1. В списке виртуальных машин нажмите на имя нужной ВМ.
    1. На странице ВМ перейдите на вкладку **Консоль**.

    </tabpanel>
    <tabpanel>

    1. Убедитесь, что клиент OpenStack [установлен](/ru/tools-for-using-services/cli/openstack-cli#1_ustanovite_klient_openstack), и [пройдите аутентификацию](/ru/tools-for-using-services/cli/openstack-cli#3_proydite_autentifikaciyu) в проекте.
    1. Получите ссылку на страницу с VNC-консолью.

    ```console
    openstack console url show <ID виртуальной машины>
    ```

    Пример вывода:

    ```console
    +-------+-------------------------------------------------------------------------------------+
    | Field | Value                                                                               |
    +-------+-------------------------------------------------------------------------------------+
    | type  | novnc                                                                                 |
    | url   | https://infra.mail.ru:6080/vnc_auto.html?token=<ЗНАЧЕНИЕ_ТОКЕНА> |
    +-------+-------------------------------------------------------------------------------------+
    ```

    1. Используйте ссылку, чтобы открыть страницу с VNC-консолью в браузере.

    {note:info}

    Если время действия ссылки закончилось, выполните команду еще раз, чтобы получить новую ссылку.

    {/note}

    </tabpanel>
    </tabs>

1. Если виртуальная машина не запущена, нажмите кнопку запуска на вкладке.
1. [Установите пароль](../vm-manage#password) для входа в ОС, если это не было сделано ранее. Запишите имя учетной записи и пароль.
1. (Опционально) Нажмите кнопку **Открыть в новом окне**, чтобы открыть консоль в отдельном окне браузера.
1. Введите логин и пароль в консоли.

В интерфейсе личного кабинета и в отдельном окне доступны кнопки управления VNC-консолью:

- **Send CtrAltDel** — действие кнопки зависит от операционной системы ВМ (перезагрузка, вызов окна блокировки и т.д.).
- **Обновить сессию** (**Update Session**) — используйте для переподключения к VNC-консоли.

## Логи сообщений ВМ

В OpenStack реализована поддержка консоли, работающей через последовательный порт ВМ. Это позволяет просмотреть логи загрузки и другую диагностическую информацию вне зависимости от состояния операционной системы и доступа к ВМ по сети.

Если виртуальная машина была создана из пользовательского образа, настройте консоль. Для этого добавьте в GRUB параметры:

```console
console=tty0 console=ttyS0,115200n8
```

<tabs>
<tablist>
<tab>OpenStack CLI</tab>
</tablist>

<tabpanel>

1. Убедитесь, что клиент OpenStack [установлен](/ru/tools-for-using-services/cli/openstack-cli#1_ustanovite_klient_openstack), и [пройдите аутентификацию](/ru/tools-for-using-services/cli/openstack-cli#3_proydite_autentifikaciyu) в проекте.

- Вывести все записи логов:

   ```console
   openstack console log show <ID виртуальной машины>
   ```

- Вывести ограниченное количество записей:

   ```console
   openstack console log show --lines <кол-во записей> <ID виртуальной машины>
  ```

</tabpanel>
</tabs>
