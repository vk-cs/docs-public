В Cloud Servers можно создавать файловые хранилища через личный кабинет, OpenStack CLI или API. Для создания файлового хранилища с помощью API воспользуйтесь [OpenAPI-спецификацией для управления файловыми хранилищами](/ru/tools-for-using-services/api/api-spec/iaas-api/manila-api).

{tabs}

{tab(Личный кабинет)}

1. [Перейдите](https://msk.cloud.vk.com/app/) в личный кабинет VK Cloud.
1. Выберите [проект](/ru/tools-for-using-services/account/concepts/projects), где нужно создать файловое хранилище.
1. Перейдите в раздел **Облачные вычисления** → **Файловое хранилище**.
1. Нажмите кнопку **Создать хранилище** или **Создать**.
1. Задайте параметры файлового хранилища:
   - **Имя файлового хранилища**: может состоять только из латинских букв, цифр и спецсимволов `-`, `_` и `.`.
   - **Размер хранилища**: размер хранилища в ГБ. Должен быть в пределах квоты, не меньше 10 ГБ и не больше 10000 ГБ.
   - **Протокол**: для доступа к хранилищу из ОС Windows выберите протокол CIFS, из Linux — NFS.
   - **Сеть**: выберите из предложенных или создайте новую. Для новой сети укажите также **Адрес подсети**.
   - **Сеть файлового хранилища**: выберите из предложенных или создайте новую.
1. Нажмите кнопку **Следующий шаг**.
1. (Опционально) Добавьте правила доступа к хранилищу:
    1. Нажмите на **Добавить новое правило**.
    1. Введите IP-адрес или адрес подсети источника.
    1. Выберите режим доступа.
    1. Нажмите кнопку **Добавить правило**.

   {note:info}

   [Добавить](/ru/computing/iaas/instructions/fs-manage/fs-access-rules#adding_an_access_rule) правила доступа можно и после создания файлового хранилища.

   {/note}

1. Нажмите **Добавить файловый сервер**.

{/tab}

{tab(OpenStack CLI)}

1. Убедитесь, что клиент OpenStack [установлен](/ru/tools-for-using-services/cli/openstack-cli#1_ustanovite_klient_openstack), и [пройдите аутентификацию](/ru/tools-for-using-services/cli/openstack-cli#3_proydite_autentifikaciyu) в проекте.
1. Убедитесь, что клиент Manila [установлен](/ru/tools-for-using-services/cli/openstack-cli#2_opcionalno_ustanovite_dopolnitelnye_pakety).
1. Выберите существующую сеть файлового хранилища или создайте новую.

    {tabs}
    
    {tab(Выбор существующей сети)}
        
    1. Получите список существующих сетей файлового хранилища, выполнив команду:

        ```console
        openstack share network list
        ```

        Запишите имя или идентификатор нужной сети.
    1. (Опционально) Просмотрите свойства выбранной сети, выполнив команду:

        ```console
        openstack share network show <СЕТЬ>
        ```

        Здесь `<СЕТЬ>` — имя или идентификатор существующей в проекте сети файлового хранилища.

    {/tab}
    
    {tab(Создание новой сети)}
    
    Выполните команду:

    ```console
    openstack share network create --neutron-net-id <ID_СЕТИ> --neutron-subnet-id <ID_ПОДСЕТИ> --name <ИМЯ_СЕТИ>
    ```

    Здесь:

    - `<ID_СЕТИ>` — идентификатор существующей в проекте приватной сети.
    - `<ID_ПОДСЕТИ>` — идентификатор ее подсети.
    - `<ИМЯ_СЕТИ>` — имя для создаваемой сети файлового хранилища.

    Запишите имя или идентификатор созданной сети.

    {/tab}
    
    {/tabs}

1. Создайте файловое хранилище с помощью команды:

    ```console
    openstack share create --name <ИМЯ_ХРАНИЛИЩА> --share-network <СЕТЬ> <ПРОТОКОЛ> <РАЗМЕР> 
    ```

    Здесь:

      - `<ИМЯ_ХРАНИЛИЩА>` — имя создаваемого файлового хранилища.
      - `<СЕТЬ>` — имя или идентификатор сети, выбранной или созданной на предыдущем шаге.
      - `<ПРОТОКОЛ>` — протокол доступа. Для доступа к хранилищу из ОС Windows укажите протокол CIFS, из Linux — NFS.
      - `<РАЗМЕР>` — желаемый размер файлового хранилища в ГБ. Должен быть в пределах квоты, не меньше 10 ГБ и не больше 10000 ГБ.

{/tab}

{/tabs}