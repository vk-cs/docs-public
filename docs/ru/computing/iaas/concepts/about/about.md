Cloud Servers — сервис облачных вычислений для управления виртуальными машинами на платформе VK Cloud.

## Виртуальные машины

Виртуальная машина (ВМ) — совокупность ресурсов, которые эмулируют поведение реального компьютера. Для своей работы виртуальная машина использует ресурсы физического сервера (хоста). На одном хосте может размещаться несколько ВМ.

При создании виртуальной машины задается ее конфигурация:

- количество процессоров (CPU);
- объем оперативной памяти (RAM);
- тип и размер диска;
- зона доступности;
- операционная система.

<info>

Виртуальные машины, созданные на платформе VK Cloud, используют эмуляцию BIOS. Эмуляция UEFI не поддерживается.

</info>

## Группа серверов

Группа серверов — совокупность серверов внутри кластера, которые объединяются в соответствии с определенной политикой. Под сервером подразумеваются ресурсы:

- виртуальные машины;
- инстансы БД;
- кластеры K8s;
- инстансы приложений из Магазина приложений.

Политика определяет размещение ресурсов на вычислительных узлах платформы (compute nodes). Поддерживаемые политики:

- `affinity` — размещать ВМ на одном вычислительном узле;
- `anti-affinity` — размещать ВМ на разных вычислительных узлах;
- `soft-affinity` — размещать ВМ по возможности на одном вычислительном узле (если места на одном узле недостаточно, вместо ошибки создания, как в случае с `affinity`, будет создан сервер на другом вычислительном узле);
- `soft-anti-affinity` — размещать ВМ по возможности на разных вычислительных узлах.

Пример использования группы серверов: развернуть несколько ВМ приложений только на одном узле, чтобы ускорить связь между этими ВМ.

## {heading(Шаблоны конфигураций)[id=flavors]}

На платформе VK Cloud количество процессоров и объем оперативной памяти ВМ задаются с помощью шаблонов конфигураций.

### Категории виртуальных машин

В личном кабинете шаблоны ВМ сгруппированы по категориям:

[cols="1,2,2", options="header"]
|===
| Категория
| Описание
| Условие отображения

| Intel Cascade Lake (Intel Xeon Gen 2)
| ВМ на серверах с CPU Intel Cascade Lake
| Доступны по умолчанию

| Intel Ice Lake (Intel Xeon Gen 3)
| ВМ на серверах с CPU Intel Ice Lake
| Доступны по умолчанию

| Архивные типы ВМ (legacy)
| Старые шаблоны конфигураций ВМ
| При фильтрации по умолчанию не отображаются

| Высокопроизводительные CPU
| ВМ на [серверах](#cpu_generations) с увеличенной тактовой частотой CPU
| Отображаются при заказе соответствующих типов ВМ через [техническую поддержку](/ru/contacts)

| Виртуальные машины с GPU
| ВМ с подключенной [графической картой](../../../gpu/about/)
| Отображаются при заказе соответствующих типов ВМ через сервис [Cloud GPU](https://cloud.vk.com/cloud-gpu/)

| ВМ с локальными дисками
| ВМ с возможностью использования локальных дисков гипервизора
| Отображаются при заказе соответствующих типов ВМ через [техническую поддержку](/ru/contacts)

| ВМ на выделенных серверах
| ВМ на гипервизорах, выделенных под нужды одного клиента
| Отображаются при заказе соответствующих типов ВМ через вашего менеджера
|===

По умолчанию отображаются только актуальные шаблоны конфигурации: на серверах с CPU Intel Cascade Lake и Intel Ice Lake, а также ВМ с подключенной графической картой, на высокопроизводительных или выделенных серверах, если они были добавлены в проект.

Чтобы добавить в список индивидуальные конфигурации ВМ, включая ВМ с объемом ресурсов более 16 vCPU и 64 ГБ RAM, обратитесь в [техническую поддержку](/ru/contacts).

Старые шаблоны конфигурации ВМ доступны при выборе категории **Архивные типы ВМ**. Сервер для создания ВМ старой конфигурации выбирается случайным образом: Intel Cascade Lake или Intel Ice Lake, но [тарифицируются](../../tariffication/) по цене Intel Ice Lake. В случае недоступности сервера (например, при профилактических работах) эти ВМ могут переехать на сервер другого поколения.

<details>
   <summary>Архивные типы ВМ</summary>

| Название | Параметры конфигурации | Описание |
| --- | --- | --- |
| Basic | До 2 vCPU <br/> До 4 ГБ RAM | Базовые конфигурации для создания ВМ с невысокой производительностью |
| Standard | От 2 до 4 vCPU <br/> От 4 ГБ до 16 ГБ RAM | Конфигурации с увеличенным количеством CPU и объемом RAM |
| Advanced | От 8 до 16 vCPU <br/> От 16 ГБ до 64 ГБ RAM | Конфигурации для создания высокопроизводительных ВМ |
| Heavy | От 16 vCPU <br/> От 64 ГБ RAM | Индивидуальные конфигурации для создания высокопроизводительных ВМ |
| Custom | Не ограничено | Индивидуальные конфигурации |

</details>

Для создания дополнительных шаблонов ВМ (например, с большим объемом ресурсов) [обратитесь в техническую поддержку](/ru/contacts). Стоимость ВМ в этом случае рассчитывается индивидуально для каждого запроса.

<info>

Количество и тип CPU, а также объем RAM уже созданной виртуальной машины можно изменить через смену шаблона ВМ. Этот процесс потребует перезагрузки ВМ.

</info>

### Название шаблонов конфигурации ВМ

Название шаблона ВМ на серверах с CPU Intel Cascade Lake, Intel Ice Lake и ВМ с подключенной графической картой формируется следующим образом:

```bash
<категория><поколение CPU>-<число CPU>-<объем RAM>-<опции>-<модель GPU>-<число GPU>
```

Примеры:

|Название шаблона ВМ | Описание |
| --- | --- |
| STD2-2-4 | ВМ с процессором Intel Cascade Lake, 2 vCPU и 4 ГБ оперативной памяти |
| STD3-4-8 | ВМ с процессором Intel Ice Lake, 4 vCPU и 8 ГБ оперативной памяти |
| GPU1A-32-96-A100-1 | ВМ с процессором AMD EPYC 7662 и одной подключенной графической картой Nvidia Tesla A10040GB |

## {heading(Поколения процессоров)[id=cpu_generations]}

Производительность виртуальной машины зависит от ресурсов хоста, на котором она размещена. Платформа VK Cloud предоставляет серверное оборудование, которое позволяет сконфигурировать ВМ разных уровней производительности.

На платформе VK Cloud для размещения ВМ используются процессоры:

| Процессор | Тип и поколение процессора | Доступность |
| --- | --- | --- |
| Intel(R) Xeon(R) Gold 6230 CPU @ 2.10GHz <br> Intel(R) Xeon(R) Gold 6238R CPU @ 2.20GHz | Intel Cascade Lake (Intel Xeon Gen 2) | По умолчанию |
| Intel Xeon Gold 6338 @ 2.0GHz <br> Intel Xeon Platinum 8380 CPU @ 2.3GHz | Intel Ice Lake (Intel Xeon Gen 3) | По умолчанию |
| Intel(R) Xeon(R) Gold 6230 CPU @ 3.40GHz  <br> Intel(R) Xeon(R) Gold 6238R CPU @ 3.70GHz <br> Intel(R) Xeon(R) Platinum 8380 CPU @ 3.4GHz | Высокопроизводительные процессоры | По запросу |
| AMD EPYC 7662 | Только для некоторых виртуальных машин с GPU | По запросу |

Конфигурации, доступные по умолчанию, позволяют создавать ВМ на серверах со стандартными процессорами.

Для получения доступа к высокопроизводительным процессорам [обратитесь в техническую поддержку](/ru/contacts). Стоимость виртуальной машины с высокопроизводительным процессором рассчитывается индивидуально для каждого запроса.

## Диски

Диск на платформе VK Cloud — сетевое блочное устройство хранения данных, которое подключается к ВМ. От размера и типа диска зависит объем хранимых данных и скорость доступа к ним.

В дисковой подсистеме VK Cloud используются сетевые диски. Отказоустойчивость дисков, непрерывный доступ к данным и их сохранность обеспечиваются репликацией.

Сетевые диски можно разбивать на разделы и форматировать так же, как и обычные накопители, подключенные локально. Преимущество сетевых дисков: их можно «перемещать» между ВМ, находящимися в одном центре обработки данных.

Локальные диски Low Latency NVME доступны в высокопроизводительных конфигурациях. Для создания такой конфигурации [обратитесь в техническую поддержку](/ru/contacts).

После создания диска можно изменить его размер, тип, зону доступности. Диск можно переименовать, подключить или отключить от ВМ, клонировать или удалить. Загрузочный диск можно сделать не загрузочным и наоборот.

К виртуальной машине может быть подключено несколько дисков, но хотя бы один из них должен быть загрузочным и содержать установленную операционную систему.

<info>

Если виртуальная машина и диск находятся в разных зонах доступности, скорость доступа к диску может быть снижена.

</info>

### {heading(Типы дисков)[id=disk_types]}

Платформа VK Cloud поддерживает различные типы дисков:

[cols="1,1,1,3", options="header"]
|===
| Тип диска
| Название в API
| Зоны доступности
| Описание

| Сетевой HDD
| ceph-hdd
| MS1, GZ1, ME1
| Обычный магнитный жесткий диск. Подходит для хранения больших объемов информации. Тройная репликация на разные серверы СХД (системы хранения данных)

| Сетевой SSD
| ceph-ssd
| MS1, GZ1, ME1
| Твердотельный накопитель. Высокая скорость считывания и записи информации. Производительность выше, чем у HDD. Тройная репликация на разные серверы СХД

| Сетевой <br/>High-IOPS SSD
| high-iops
| MS1, GZ1, ME1
| SSD с повышенной скоростью работы. Двойная репликация: обе копии находятся на одном сервере СХД. В случае сбоя сервера СХД потребуется подготовка нового сервера и перенос в новый сервер физических дисков с данными пользователей. Время восстановления не регламентировано

| Локальный <br/>Low Latency NVME
| ef-nvme
| nova
| SSD, который находится на одном гипервизоре с ВМ. Высокая скорость работы и быстрый отклик. Двойная репликация: обе копии находятся на одном гипервизоре

| Сетевой <br/>High-IOPS HA SSD
| high-iops-ha
| ME1
| SSD с повышенной скоростью работы. Двойная репликация на разные серверы СХД. Время переключения при сбое сервера СХД от 30 с до 5 мин.

По протоколу ISCSI ожидание диска при потере доступности — 300 с. За это время операционная система ВМ переключится на резервный сервер СХД. Проведите дополнительное тестирование с эмуляцией отказа диска, если вы будете использовать диск для размещения высоконагруженных СУБД
|===

<details>
   <summary>Информация об устаревших названиях ресурсов</summary>

Некоторые названия типов дисков и зон доступности являются устаревшими, но отображаются в выводе команд.

Соответствие устаревших и актуальных названий:

|Тип диска| Устаревшее<br/>название в API   | Зона<br/>доступности | Актуальное<br/>название в API | Актуальная зона<br/>доступности |
|---------|-----------------------------|------------------|---------------------------|-----------------------------|
| Сетевой HDD | dp1                     | DP1              | ceph-hdd                  | GZ1                         |
|             | ms1                     | MS1              | ceph-hdd                  | MS1                         |
| Сетевой SSD | dp1-ssd                 | DP1              | ceph-ssd                  | GZ1                         |
|             | ko1-ssd                 | MS1              | ceph-ssd                  | MS1                         |
| Сетевой High-IOPS SSD | dp1-high-iops | DP1              | high-iops                 | GZ1                         |
|                       | ko1-high-iops | MS1              | high-iops                 | MS1                         |

Недоступные типы дисков:

|Тип диска| Название в API     | Зона доступности |
|---------|--------------------|------------------|
| Сетевой HDD с георепликацией | ceph   | nova    |
| Сетевой SSD с георепликацией | ssd    | nova    |

</details>

## Зона доступности

Зона доступности — это один или несколько центров обработки данных (ЦОД), в которых могут быть размещены компоненты облачной инфраструктуры.

Каждая зона изолирована от сбоев в других зонах доступности. Размещение виртуальных ресурсов в нескольких зонах обеспечивает отказоустойчивость и снижает вероятность потери данных.

VK Cloud распределяет по [поддерживаемым зонам доступности](/ru/intro/start/architecture) следующие виртуальные ресурсы:

- виртуальные машины;
- диски: размещаются в сетевом блочном хранилище и автоматически реплицируются внутри своей зоны доступности;
- балансировщики нагрузки.

Существуют ресурсы, для которых нет зон доступности, например, бакет Cloud Storage или виртуальная сеть. Для проектов региона Москва эти ресурсы являются глобальными (не привязаны к зоне).

<info>

Сеть, созданную в зоне доступности QAZ, невозможно объединить стандартными способами с сетями из других зон доступности, так как зона QAZ находится в другом [регионе](../../../../tools-for-using-services/account/concepts/regions). В этом случае сетевую связность можно обеспечить средствами [VPN](/ru/networks/vnet/how-to-guides/vpn-tunnel).

</info>

## Операционная система

На платформе VK Cloud при создании виртуальной машины можно выбрать операционную систему семейства Microsoft Windows или Linux. Для создания ВМ с операционной системой, которой нет в списке платформы, используйте файл образа виртуальной машины с нужной ОС.

В VK Cloud поддерживается миграция ОС Windows серверных версий:

- Windows Server 2008 / 2008 R2;
- Windows Server 2012 / 2012 R2;
- Windows Server 2016;
- Windows Server 2019;
- Windows Server 2022.

<warn>

В облаке VK Cloud невозможно использовать операционные системы Windows 7 / 8 / 8.1 / 10 / 11. Это ограничение установлено для всех проектов и не может быть снято.

</warn>

## Образ

Конфигурация и данные виртуальной машины хранятся в виде одного или нескольких файлов. Эти файлы могут использоваться как образ для запуска ВМ в локальной среде или для создания новой ВМ.

На платформе VK Cloud можно создать образ на основе диска ВМ или загрузить файл образа. Полученный образ можно использовать для создания новой виртуальной машины.

Образ, источником которого является диск, позволяет создать копию виртуальной машины с установленной и настроенной операционной системой и приложениями.

Образ, загруженный из файла, можно использовать для миграции ВМ или для создания виртуальной машины с вашей операционной системой.

<info>

Cloud Servers поддерживает образы в формате `raw`.

</info>

## Файловое хранилище

Файловое хранилище — это виртуальная файловая система, которую можно подключить к нескольким виртуальным машинам и использовать для совместного доступа к данным. При создании файлового хранилища указывается протокол сетевого доступа к нему (NFS или CIFS).

<info>

Доступ к файловым хранилищам осуществляется только из виртуальных машин внутри проекта VK Cloud.

</info>

Размер файлового хранилища задается на этапе создания. При необходимости размер файлового хранилища может быть увеличен, уменьшить файловое хранилище нельзя.

Для файловых хранилищ доступны операции создания снимка и восстановления из снимка.

## Резервная копия

Резервная копия ВМ необходима, чтобы восстановить состояние виртуальной машины, сохраненное в определенный момент времени. Платформа VK Cloud предоставляет сервис для создания резервных копий ВМ в ручном или автоматическом режиме.

В ручном режиме создание резервных копий запускается пользователем. При этом создаются полные резервные копии ВМ.

Автоматический режим поддерживает [стратегию GFS](/ru/storage/backups/concepts/retention-policy/gfs-backup) и позволяет настроить расписание резервного копирования для создания полных и инкрементальных резервных копий.

## Лицензии

VK Cloud обладает правом лицензировать программное обеспечение на основании соглашений с компаниями:

- Microsoft (Microsoft Services Provider License Agreement — SPLA);
- РЕД СОФТ;
- BaseALT;
- Астра Линукс.

Подробнее — в разделе [Лицензии для ВМ](/ru/computing/vm-licenses).
