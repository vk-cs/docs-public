Технология *vGPU* позволяет гипервизору использовать специальный драйвер, чтобы распределять ресурсы физического GPU между несколькими ВМ, которые поддерживают [Cloud GPU](/ru/computing/gpu/concepts/about).

Эта технология будет полезна для пользователей, которым не требуется полный ресурс физического GPU.

## {heading(Сравнение c физическими GPU)[id=comparison]}

[cols="1,2,2", options="header"]
|===
|Характеристика
|Физический GPU
|vGPU
|Гибкость и экономия
|Оплачивается полный ресурс физического GPU, нельзя уменьшить стоимость такой конфигурации за счет ограничения доступной мощности
|Есть конфигурации с меньшей стоимостью за счет частичного выделения ресурса физического GPU, позже эту конфигурацию можно поменять
|Доступная доля GPU на одной ВМ
|100% от общего ресурса физического GPU
|До 100%, выделяется динамически согласно внутренним политикам распределения ресурсов физического GPU
|Доступная VRAM
|100% от общего количества памяти физического GPU
|До 100%, в зависимости от выбранного [профиля](#profiles)
|Необходимые настройки ОС
|Достаточно установки графического драйвера
|Помимо установки драйвера, необходимо настроить ОС для работы с [сервером лицензирования](#licensing)
|===

## {heading(Профили)[id=profiles]}

Помимо стандартных характеристик (CPU, RAM и др.), в [названиях шаблонов конфигураций ВМ](/ru/computing/iaas/concepts/vm/flavor#flavor_names) (flavor) с vGPU также указывается *профиль vGPU*.

Профиль vGPU состоит из двух частей:

* Тип профиля — определяет, для каких задач будет использоваться GPU. Представляет собой букву латинского алфавита. В Cloud GPU используются универсальные профили серии Q. Они подходят для любых задач, в которых используется GPU, например для рендеринга интерфейсов приложений и сложных 3D проектов или для сложных вычислений (AI, ML, HPC) на базе CUDA.
* Количество видеопамяти (VRAM) — представляет собой число ГБ, которое доступно в рамках профиля.

Например, шаблон конфигурации ВМ с 2 CPU, 8 ГБ RAM, моделью физического GPU L4 и 1 ГБ VRAM будет иметь название `vGPU-2-8-L4-1Q`.

## {heading(Шаблоны конфигураций)[id=flavors]}

В Cloud GPU доступны шаблоны конфигураций (flavors) с vGPU на базе NVIDIA® L4:

| Шаблон конфигурации ВМ | CPU | RAM | Модель GPU | Профиль | VRAM, МБ |
| :--- | :--- | :--- | :--- | :--- | :--- |
| vGPU-2-8-L4-1Q | 2   | 8   | L4  | 1Q  | 1024 |
| vGPU-2-8-L4-2Q | 2   | 8   | L4  | 2Q  | 2048 |
| vGPU-4-8-L4-2Q | 4   | 8   | L4  | 2Q  | 2048 |
| vGPU-4-16-L4-4Q | 4   | 16  | L4  | 4Q  | 4096 |
| vGPU-8-16-L4-8Q | 8   | 16  | L4  | 8Q  | 8192 |
| vGPU-16-32-L4-12Q | 16  | 32  | L4  | 12Q | 12288 |
| vGPU-32-64-L4-24Q | 32  | 64  | L4  | 24Q | 24576 |

## {heading(Лицензирование)[id=licensing]}

Для работы vGPU требуется лицензия NVIDIA® vGPU Software. Cloud GPU использует лицензию NVIDIA® vGPU Virtual Workstation, созданную специально для профилей серии Q.

Проверка лицензии в VK Cloud выполняется через локальный NVIDIA® License Server. В зависимости от используемого образа ОС может потребоваться дополнительная настройка:

- Образ от VK Cloud: дополнительные действия не требуются, сервер лицензирования уже настроен.
- Собственный образ: необходимо настроить систему для работы с vGPU.

При неудачной проверке ВМ работает в пробном режиме до 20 минут.