Платформа VK Cloud позволяет развертывать пулы [виртуальных рабочих столов](/ru/computing/cloud-desktops/concepts/about) на базе графических процессоров NVIDIA® Tesla®.

Возможности таких рабочих столов:

* машинное обучение нейронных сетей с высокой производительностью и решение других задач, связанных с использованием ИИ;
* высокоскоростная визуализация графики на стороне сервера;
* решение любых задач, требующих больших вычислительных мощностей.

За счет использования графических процессоров время на решение подобных задач можно сократить с дней до часов. Подробнее — в [обзоре сервиса Cloud GPU](../../concepts/about).

Развертывание виртуальных рабочих столов с процессорами NVIDIA® Tesla® описано далее на примере.

## Подготовительные шаги

1. [Подключите](/ru/computing/gpu/connect) сервис Cloud GPU.
1. Запросите в [технической поддержке](/ru/contacts) квоты на шаблон конфигурации ВМ на базе GPU. В примере используется шаблон `GPU2-24-96-T4-1`.
1. Создайте и настройте службу каталогов пользователей OpenLDAP, как описано [в официальной документации OpenLDAP](https://www.openldap.org/devel/admin/guide.htm#A%20Quick-Start%20Guide).
1. Узнайте реквизиты настроенного каталога:

   * IP-адрес или FQDN сервера OpenLDAP;
   * уникальное имя учетной записи;
   * пароль от учетной записи.

1. (Опционально) [Настройте](/ru/networks/vnet/how-to-guides/vpn-tunnel) VPN на маршрутизаторе, который будет использоваться в сервисе.
1. Убедитесь, что в [личном кабинете](https://msk.cloud.vk.com/app/) подключен сервис Cloud Desktop: в меню слева доступен раздел **Cloud Desktop**.

## 1. Настройте внешнюю инфраструктуру

1. [Перейдите](https://msk.cloud.vk.com/app/) в личный кабинет VK Cloud.
1. Выберите [проект](/ru/tools-for-using-services/account/concepts/projects), где будут размещены рабочие столы.
1. Перейдите в раздел **Cloud Desktop** → **Настройки сервиса**.
1. На вкладке **Настройка сети** задайте [сетевые параметры](/ru/computing/cloud-desktops/service-management/config/setup-net):

   * **Роутер**: маршрутизатор из списка.
   * **Пространство IP-адресов**: диапазон IP-адресов для тех подсетей, в которых будут развернуты ресурсы сервиса.
   * **Адрес DNS сервера вашего домена**: IP-адрес DNS-сервера домена, который будет использоваться для авторизации на удаленных рабочих столах.
   * **Режим доступа к рабочим столам**: например, `Внешний доступ`.
   * **Зона доступности**: например, `Москва (MS1)`.

1. Нажмите кнопку **Сохранить**.
1. На вкладке **Настройка каталога** укажите [параметры подключения к каталогу пользователей](/ru/computing/cloud-desktops/service-management/config/setup-ldap):

    * **Хост**: IP-адрес или FQDN сервера OpenLDAP.
    * **Порт**: номер порта для доступа по протоколу LDAP — `389`.
    * **Base DN**: корневой каталог для поиска объектов в AD или LDAP.
    * **DN пользователя для подключения к каталогу LDAP**: полный путь к учетной записи в базе OpenLDAP, который будет использоваться для синхронизации с каталогом учетных записей.
    * **Пароль**: пароль от учетной записи OpenLDAP, указанной в **DN пользователя для подключения к каталогу LDAP**.
    * **Поле для выборки**: например, `UID`.

1. Нажмите кнопку **Сохранить**.
1. На вкладке **Подсистема** [выберите](/ru/computing/cloud-desktops/service-management/config/setup-provider) один из вариантов на свое усмотрение.
1. (Опционально) На вкладке **SAML** [настройте](/ru/computing/cloud-desktops/service-management/config/setup-saml) двухфакторную аутентификацию.

## 2. Создайте пул рабочих столов

1. Перейдите в раздел **Cloud Desktop** → **Пулы рабочих столов**.
1. Нажмите кнопку **Добавить**.
1. На шаге **Конфигурация** задайте [параметры пула](/ru/computing/cloud-desktops/service-management/desktops-pool/add#setup_pool_configuration):

    * **Имя пула**: например, `vk-cloud-desktops-pool-gpu`.
    * **Тип пула**: например, `Сессионный`.
    * **Группа пользователей**: укажите одну группу из каталога OpenLDAP.
    * **Мин. кол-во рабочих столов**: например, `1`.

    Остальные параметры выберите на свое усмотрение.

1. Нажмите кнопку **Следующий шаг**.

1. На шаге **Настройки виртуальных машин** задайте [конфигурацию ВМ пула](/ru/computing/cloud-desktops/service-management/desktops-pool/add#configure_pool_vms):

    * **Тип инстанса**: имя шаблона конфигурации ВМ, полученного в технической поддержке — `GPU2-24-96-T4-1`.
    * **Образ**: например, `Windows Server 2019 Standard (ru)`.

    Остальные параметры выберите на свое усмотрение.

1. Нажмите кнопку **Следующий шаг**.
1. На шаге **Настройка периферии** выберите параметры на свое усмотрение.
1. Нажмите кнопку **Создать пул**.

   Начнется создание пула рабочих столов. Этот процесс может занять длительное время.

## 3. Убедитесь, что в пуле развернуты рабочие столы

1. Перейдите в раздел **Cloud Desktop** → **Пулы рабочих столов**.

1. В списке пулов нажмите на имя пула `vk-cloud-desktops-pool-gpu`.

1. Перейдите на вкладку **Рабочие столы**.

   В блоке **Развернуто** должно отображаться значение, указанное для параметра **Мин. кол-во рабочих столов**. В примере: `1`.

## 4. Проверьте подключение к рабочему столу

1. Запишите внешний IP-адрес для подключения к пулу:

   1. Перейдите в раздел **Cloud Desktop** → **Пулы рабочих столов**.
   1. В списке пулов нажмите **IP-адрес подключения**.
   1. В открывшемся списке скопируйте значение **Внешний IP-адрес**.

   В примере используется IP-адрес `99.166.240.100`.

1. Скачайте и установите клиент для доступа к удаленным рабочим столам:

   * [Termidesk](/ru/computing/cloud-desktops/service-management/assets/Termidesk_user_guide_v_1_0.pdf "download") — если вы выбрали подсистему Termidesk;
   * [Cloud Desktop Client](/ru/computing/cloud-desktops/service-management/assets/Cloud_Desktop_user_guide_v_1_0.pdf "download") — если вы выбрали подсистему VK.

1. Подключитесь к пулам:

   1. Откройте установленный клиент.
   1. Нажмите кнопку **Добавить сервер**.
   1. В открывшемся окне укажите адрес `99.166.240.100` и нажмите кнопку **Ок**.
   1. Укажите логин и пароль пользователя AD, нажмите кнопку **Ок**. При успешном подключении отобразится список пулов.

1. Подключитесь к пулу `vk-cloud-desktops-pool-gpu`.

1. В открывшемся окне подключения по RDP повторно введите логин и пароль пользователя AD.

   При успешном подключении к рабочему столу откроется интерфейс операционной системы Windows.

## Удалите неиспользуемые ресурсы

Работающий сервис потребляет вычислительные ресурсы. Если он вам больше не нужен, [удалите](/ru/computing/cloud-desktops/service-management/desktops-pool/manage#delete_pool) пул рабочих столов.
