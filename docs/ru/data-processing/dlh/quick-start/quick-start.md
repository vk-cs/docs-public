Быстрый старт включает базовый сценарий развертывания сервиса Data LakeHouse (DLH) на основе трех компонентов:

* [Cloud Storage](/ru/storage/s3) — S3-хранилище, которое используется в качестве недорогого бесконечно расширяемого хранилища неструктурированных данных, получаемых из различных БД, например PostgreSQL.
* [Iceberg Metastore]() — используется для организации каталога метаданных на базе Apache Iceberg. Обеспечивает согласованность операций между различными компонентами сервиса DLH.
* [Cloud Trino](/ru/data-processing/trino) — в связке с Iceberg Metastore обеспечивает клиентам привычный SQL-интерфейс для выполнения следующих операций:

   * перенос данных (ETL);
   * манипуляции с захваченными данными (ELT);
   * комбинирование данных из разных источников (Data Mesh);
   * прочие операции с каталогом и данными.

Пройдя все шаги быстрого старта, вы:

1. Создадите экземпляры сервисов Iceberg Metastore и Cloud Trino.
1. Создадите инстанс БД PostgreSQL и настроите подключение к нему в Cloud Trino.

Бакет S3-объектного хранилища будет создан автоматически при настройке подключений для экземпляра сервиса Cloud Trino.

## {heading(1. Создайте экземпляр сервиса Iceberg Metastore)[id=create_iceberg_instance]}

1. Перейдите в раздел **Data Platform → Экземпляры сервисов**.
1. Нажмите кнопку **Создать экземпляр**.
1. На шаге **Конфигурация**:

   1. Выберите тип сервиса `Iceberg Metastore`.
   1. Выберите версию `16.2.0`.
   1. Выберите конфигурацию `Кластер`.

1. Нажмите кнопку **Следующий шаг**.
1. На шаге **Параметры**:

   1. Запишите имя базы данных, сгенерированное автоматически. Оно понадобится для подключения к Cloud Trino.
   1. Включите опцию **Назначить внешний IP**.
   1. Выберите пункт **Создать новый кластер**.
   1. Выберите одну из доступных сетей в списке или создайте новую, нажав **Создать новую сеть**. При создании новой подсети укажите [SDN](/ru/networks/vnet/concepts/sdn) и адрес подсети.
   1. Выберите [зону доступности](/ru/intro/start/concepts/architecture#az), например: `Москва (ME1)`.
   1. Выберите вариант настройки `Базовая`, шаблон кластера `Малый`.

1. Нажмите кнопку **Следующий шаг**.
1. На шаге **Обслуживание**:

   1. Выберите дни недели и время начала проведения технических работ. В это время на сервере могут выполняться технические работы, в том числе создание резервных копий — сервис может быть временно недоступен.

   <info>

   Длительность технических работ — 4 часа. Временная зона определяется автоматически по вашему текущему местоположению.

   </info>

   1. Для остальных полей оставьте значения по умолчанию.

1. Нажмите кнопку **Следующий шаг**.
1. На шаге **Учетные данные**:

   1. В поле **Логин** оставьте значение по умолчанию. Запишите логин администратора для доступа к Iceberg Metastore, он понадобится вам позже.
   1. В поле **Пароль** нажмите кнопку **Сгенерировать**, чтобы сгенерировать пароль администратора. Сохраните пароль, он понадобится вам позже.

      <info>

      Утерянный пароль невозможно восстановить, но можно [поменять]() на новый.

      </info>

1. Нажмите кнопку **Создать**.

Дождитесь окончания процесса создания экземпляра сервиса Iceberg Metastore.

## {heading(2. Создайте инстанс БД PostgreSQL)[id=create_postgresql_instance]}

БД PostgreSQL в базовой конфигурации сервиса DLH выступает в качестве внешнего источника данных. Чтобы развернуть инстанс PostgreSQL:

1. Перейдите в раздел **Базы данных → Инстансы баз данных**.
1. Если в выбранном проекте нет ни одного инстанса БД, нажмите кнопку **Создать базу данных**.

   Иначе нажмите кнопку **Добавить**.

1. На шаге **Конфигурация**:

   1. Выберите тип базы данных `PostgreSQL`.
   1. В поле **Версия** оставьте значение по умолчанию.
   1. Выберите конфигурацию `Single`.

1. Нажмите кнопку **Следующий шаг**.
1. На шаге **Создание инстанса** задайте:

   - **Тип виртуальной машины**: `STD3-2-8`.
   - **Зону доступности:** `Москва (ME1)`.
   - **Тип диска:** `SSD`.
   - **Размер диска, GB:** `10`.
   - **Включить автомасштабирование диска:** убедитесь, что эта опция не выбрана.
   - **Сеть**: выберите сеть, которую указывали при [создании экземпляра сервиса Iceberg Metastore](#create_iceberg_instance) на этапе развертывания базовой конфигурации.
   - **Назначить внешний IP:** убедитесь, что эта опция включена.
   - **Настройки Firewall:** выберите `ssh` из выпадающего списка.

      Итоговый список групп безопасности должен иметь вид: `default`, `ssh`.

   - **Создать реплику:** убедитесь, что эта опция не выбрана.
   - **Ключ для доступа по SSH:** `Создать новый ключ`.

      <info>

      При выборе этой опции на ваш компьютер будет загружен приватный SSH-ключ. Сохраните его. Этот ключ понадобится при подключении к инстансу по SSH.

      </info>

   - **Резервное копирование:** `Отключено`.

1. Нажмите кнопку **Следующий шаг**.

1. На шаге **Инициализация** задайте:

   - **Тип создания:** `Новая база данных`.
   - **Имя пользователя:** оставьте значение по умолчанию или придумайте свое, например: `tsuser1`.
   - **Пароль пользователя:** сгенерируйте пароль.

   Сохраните полученные значения логина и пароля. Они понадобится вам позже.

   Имя базы данных для создания будет сгенерировано автоматически.


1. Нажмите кнопку **Создать базу данных**.

   Дождитесь завершения создания инстанса БД.

## {heading(3. Создайте экземпляр сервиса Cloud Trino)[id=create_trino_instance]}

Cloud Trino используется в качестве горизонтально масштабируемого движка SQL-запросов к внешнему источнику (PostgreSQL).

Чтобы развернуть экземпляр сервиса Cloud Trino и настроить для него подключения к PostgreSQL:

1. Перейдите в раздел **Data Platform → Экземпляры сервисов**.
1. Нажмите кнопку **Создать экземпляр**.
1. На шаге **Конфигурация**:

   1. Выберите тип сервиса `Cloud Trino`.
   1. Выберите версию `0.468.0`.
   1. Выберите конфигурацию `Single`.

1. Нажмите кнопку **Следующий шаг**.
1. На шаге **Параметры**:

   1. В поле **Название экземпляра** задайте имя экземпляра или используйте значение по умолчанию.
   1. Включите опцию **Назначить внешний IP**.
   1. Выберите кластер, который указывали при [создании экземпляра сервиса Iceberg Metastore](#create_iceberg_instance) на этапе развертывания базовой конфигурации.
   1. Выберите вариант настройки `Базовая`, шаблон кластера `Малый`.
   1. Нажмите кнопку **Следующий шаг**.

1. На шаге **Обслуживание**:

   1. **Техническое окно**: оставьте значение по умолчанию. В это время на сервере могут выполняться технические работы, в том числе создание резервных копий — сервис может быть временно недоступен.

      <info>
      
      Длительность технических работ — 4 часа. Временная зона определяется автоматически по вашему текущему местоположению.
      
      </info>
   
   1. Для остальных полей оставьте значения по умолчанию.

1. Нажмите кнопку **Следующий шаг**.
1. На шаге **Подключения**:

   1. Добавьте к экземпляру сервиса Cloud Trino источник данных PostgreSQL:
  
      1. Нажмите кнопку **Добавить подключение**.
      1. Выберите тип подключение `PostgreSQL` и укажите:
         
         * **Название**: придумайте название подключения, например: `postgres_trino`.
         * **Название базы данных**: имя базы данных внутри инстанса, например: `ad_db`. Доступен на вкладке **Список баз данных** после создания инстанса PostgreSQL.
         * **hostname:port**: адрес подключения к созданному инстансу PostgreSQL в формате: `<IP-АДРЕС>:<ПОРТ>`. Например `10.0.1.2:5432`. Адрес подключения к БД можно [посмотреть](/ru/dbs/dbaas/service-management/manage-instance/postgresql#poluchenie_informacii_ob_instanse_bd) в карточке инстанса.
      
      1. **Логин**: значение, указанное при создании инстанса БД PostgreSQL. В этом примере: `tsuser1`.
      1. **Пароль**: пароль учетной записи пользователя базы данных, указанный при создании инстанса БД PostgreSQL.

   1. Добавьте к экземпляру сервиса Cloud Trino источник данных Apache Iceberg с S3 VK Cloud:

      1. Нажмите кнопку **Добавить подключение**.
      1. Выберите подключение `Apache Iceberg с S3 VK Cloud`.
      1. Укажите параметры подключения:
         
         * **Название**: придумайте название подключения, например: `iceberg_s3`.
         * **hostname:port сервиса Iceberg Metastore**: адрес подключения к созданному инстансу Iceberg Metastore в формате `<IP-АДРЕС>:<ПОРТ>`. Адрес сервиса Iceberg Metastore можно посмотреть в карточке инстанса на вкладке **Общая информация** в поле **Postgres primary connection string**.
         * **Логин сервиса Iceberg Metastore**: логин администратора, указанный при [создании экземпляра сервиса Iceberg Metastore](#create_iceberg_instance) на этапе развертывания базовой конфигурации. В этом примере: `vkdata`.
         * **Пароль сервиса Iceberg Metastore**: пароль учетной записи пользователя базы данных, указанный при создании инстанса Iceberg Metastore.
         * **Bucket**: задайте имя бакета для создания S3-объектного хранилища, следуя [правилам](/ru/storage/s3/concepts/about#bucket_naming) именования бакетов.

1. Нажмите кнопку **Следующий шаг**.
1. На шаге **Учетные данные**:

   1. В поле **Логин** оставьте значение по умолчанию. Запишите логин администратора для доступа к Cloud Trino, он понадобится вам позже.
   1. В поле **Пароль** нажмите кнопку **Сгенерировать**, чтобы сгенерировать пароль администратора. Сохраните пароль, он понадобится вам позже.

      <info>

      Утерянный пароль невозможно восстановить, но можно [поменять](/ru/data-processing/trino/service-management/management#change_password) на новый.

      </info>

1. Нажмите кнопку **Создать**.

Дождитесь окончания процесса создания экземпляра сервиса Cloud Trino.

После развертывания сервиса Trino в конфигурацию будут автоматически добавлены два подключения к виртуальным БД для генерации наборов синтетических данных большого объема и тестирования: `otpcds` и `otpch`.

## Что дальше?

1. [Подключите](/ru/data-processing/dlh/how-to-guides/connect-adb) аналитическую БД на базе ClickHouse, чтобы выполнять быструю обработку части данных до их попадания в S3-хранилище.
1. [Подключите](/ru/data-processing/dlh/how-to-guides/connect-spark) сервис Spark для работы со сложными ETL и ELT задачами.
