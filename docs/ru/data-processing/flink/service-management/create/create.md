Вы можете создать экземпляр Cloud Flink в одной из двух конфигураций:

- [Single](#single): конфигурация запускает компоненты Job Manager и Task Manager на одном узле. Решение подходит для разработки и тестирования, снижает расходы на развертывание тестовой инфраструктуры. Не обеспечивает отказоустойчивость: сбой узла приводит к остановке всей работы. 
- [Кластер](#cluster): отказоустойчивая конфигурация из нескольких узлов. Решение подходит для обработки больших объемов данных и обеспечивает высокую производительность и отказоустойчивость (сбой одного узла не приводит к остановке всей работы).

## {heading(Создание экземпляра в конфигурации Single)[id=single]}

<tabs>
<tablist>
<tab>Личный кабинет</tab>
</tablist>
<tabpanel>

1. [Перейдите](https://msk.cloud.vk.com/app/) в личный кабинет VK Cloud.
1. Выберите проект, где нужно создать экземпляр сервиса.
1. Перейдите в раздел **Data Platform → Экземпляры сервисов**.
1. Нажмите кнопку **Добавить инстанс** или **Создать экземпляр**.
1. На шаге **Конфигурация**:

   1. Выберите тип сервиса **Flink**.
   1. Выберите нужную версию сервиса.
   1. Выберите конфигурацию **Single**.
   1. Нажмите кнопку **Следующий шаг**.

1. На шаге **Параметры**:

   1. Задайте для экземпляра название и описание.
   1. Выберите кластер Kubernetes. В этот кластер [Cloud Containers](/ru/kubernetes/k8s) будет добавлен [worker-узел](/ru/kubernetes/k8s/concepts/architecture#topologii_klastera) для размещения экземпляра Cloud Flink.

      Если нужного кластера нет в списке:

      1. Выберите пункт **Создать новый кластер**.
      1. Выберите сеть и подсеть для кластера из выпадающего списка **Сеть**.

         Если нужной сети нет в списке:

         1. Выберите пункт **Создать новую сеть**.
         1. Выберите нужную [SDN](/ru/networks/vnet/concepts/sdn): `Neutron` или `Sprut`.
         1. Задайте адрес подсети, например, `10.0.1.0/24`.

      1. Выберите [зону доступности](/ru/intro/start/concepts/architecture#az), где будет размещен узел кластера Cloud Containers.
   1. Выберите [тип виртуальной машины](/ru/computing/iaas/concepts/about#flavors), на которой будет развернут Cloud Flink.
   1. Нажмите кнопку **Следующий шаг**.

1. На шаге **Учетные данные**:

   1. Задайте логин администратора для доступа к Flink.
   1. Придумайте или сгенерируйте пароль администратора.

      Требования к паролю:

      - Минимальная длина пароля — 8 символов.
      - Может содержать только цифры, заглавные и строчные латинские буквы, символы `!`, `"`, `#`, `$`, `%`, `&`, `(`, `)`, `*`, `+`, `,`, `.`, `:`, `;`, `<`, `=`, `>`, `?`, `@`, `[`, `]`, `^`, `_`, `{`, `}`, `~`, `-`.
      - Должен содержать хотя бы одну заглавную и одну строчную букву латинского алфавита, хотя бы одну цифру, хотя бы один символ из диапазона выше.

      <info>

      Утерянный пароль невозможно восстановить, но можно [поменять](../manage#change_password) на новый.

      </info>

   1. Нажмите кнопку **Создать**.

      Дождитесь завершения операции. Создание экземпляра Cloud Flink может занять до 40 минут.

</tabpanel>
</tabs>

## {heading(Создание экземпляра в конфигурации Кластер)[id=cluster]}

<tabs>
<tablist>
<tab>Личный кабинет</tab>
</tablist>
<tabpanel>

1. [Перейдите](https://msk.cloud.vk.com/app/) в личный кабинет VK Cloud.
1. Выберите проект, где нужно создать экземпляр сервиса.
1. Перейдите в раздел **Data Platform → Экземпляры сервисов**.
1. Нажмите кнопку **Создать инстанс** или **Создать экземпляр**.
1. На шаге **Конфигурация**:

   1. Выберите тип сервиса **Flink**.
   1. Выберите нужную версию сервиса.
   1. Выберите конфигурацию **Кластер**.
   1. Нажмите кнопку **Следующий шаг**.

1. На шаге **Параметры**:

   1. Задайте для экземпляра название и описание.
   1. Выберите кластер Kubernetes. В этот кластер [Cloud Containers](/ru/kubernetes/k8s) будет добавлен [worker-узел](/ru/kubernetes/k8s/concepts/architecture#topologii_klastera) для размещения экземпляра Cloud Flink.

      Если нужного кластера нет в списке:

      1. Выберите пункт **Создать новый кластер**.
      1. Выберите сеть и подсеть для кластера из выпадающего списка **Сеть**.

         Если нужной сети нет в списке:

         1. Выберите пункт **Создать новую сеть**.
         1. Выберите нужную [SDN](/ru/networks/vnet/concepts/sdn): `Neutron` или `Sprut`.
         1. Задайте адрес подсети, например, `10.0.1.0/24`.

      1. Выберите [зону доступности](/ru/intro/start/concepts/architecture#az), где будет размещен узел кластера Cloud Containers.
   1. Настройте параметры узлов кластера, выбрав одну из опций:

      <tabs>
      <tablist>
      <tab>Базовая</tab>
      <tab>Продвинутая</tab>
      </tablist>
      <tabpanel>

      Выберите один из готовых шаблонов кластера. [Шаблон конфигурации](/ru/computing/iaas/concepts/about#flavors) и [тип диска](/ru/computing/iaas/concepts/about#disk_types) для узлов кластера уже выбраны.

      При выборе любого шаблона экземпляр Cloud Flink будет состоять из одного узла Job Manager и нескольких узлов Task Manager.

      </tabpanel>
      <tabpanel>

      Настройте параметры самостоятельно:

      1. В блоке **Job Manager** задайте [шаблон конфигурации](/ru/computing/iaas/concepts/about#flavors) для master-узла. Количество master-узлов не редактируется.
      1. В блоке **Task Manager** задайте параметры worker-узлов:

         - **Тип виртуальной машины:** шаблон конфигурации для узлов.
         - **Количество task:** общее количество worker-узлов.

      </tabpanel>
      </tabs>

   1. Нажмите кнопку **Следующий шаг**.

1. На шаге **Учетные данные**:

   1. Задайте логин администратора для доступа к Flink.
   1. Придумайте или сгенерируйте пароль администратора.

      Требования к паролю:

      - Минимальная длина пароля — 8 символов.
      - Может содержать только цифры, заглавные и строчные латинские буквы, символы `!`, `"`, `#`, `$`, `%`, `&`, `(`, `)`, `*`, `+`, `,`, `.`, `:`, `;`, `<`, `=`, `>`, `?`, `@`, `[`, `]`, `^`, `_`, `{`, `}`, `~`, `-`.
      - Должен содержать хотя бы одну заглавную и одну строчную букву латинского алфавита, хотя бы одну цифру, хотя бы один символ из диапазона выше.

      <info>

      Утерянный пароль невозможно восстановить, но можно [поменять](../manage#change_password) на новый.

      </info>

   1. Нажмите кнопку **Создать**.

      Дождитесь завершения операции. Создание экземпляра Cloud Flink может занять 40 минут.

</tabpanel>
</tabs>
