Архитектура Cloud Flink построена вокруг концепции распределенного потокового вычисления и состоит из нескольких компонентов: 

- *Job Manager* — master-узел, который координирует все процессы обработки данных в сервисе:

  - Отвечает за планирование задач, распределение ресурсов и координацию работы узлов Task Manager.
  - Следит за состоянием выполнения задач и обеспечивает отказоустойчивость.
  - Контролирует выполнение запросов и следит за их прогрессом.

  Узел Job Manager в кластере один, вне зависимости от конфигурации.

- *Task Manager* — worker-узел, который выполняет конкретные задачи (tasks) обработки данных:

  - Обрабатывает задачи, полученные от узла Job Manager.
  - Отвечает за выполнение операторов в потоке данных и хранение состояния (state).
  - Обменивается данными с узлом Job Manager для получения задач и отчетов.

  В кластере может быть от 1 до 10 узлов Task Manager, которые параллельно обрабатывают разные задачи. 

- *DataStream API/DataSet API* — API для программирования потоковой и пакетной обработки соответственно. Предоставляют набор операторов для фильтрации, преобразования, агрегирования данных.

- *Потоки данных (Data Streams)* — упорядоченные последовательности событий, которые обрабатываются и преобразуются через цепочки операторов. Поддерживают различные типы данных.

- *Состояние (State)* — это слепок промежуточных результатов и данных на конкретный момент времени.

- *Операторы (Operators)* — элементы, выполняющие преобразования и операции над потоками данных: фильтры, агрегации, объединения, сортировки и т.д. Оптимизированы для выполнения на узлах Task Manager.

- *Распределенное хранение* — в зависимости от задачи Cloud Flink может взаимодействовать с различными хранилищами данных (например, файловые системы, базы данных). Обеспечивает устойчивость к проблемам с дисками или узлами.

- *Планировщик задач (Task Scheduler)* — отвечает за распределение задач (tasks) между узлами Task Manager для оптимального использования ресурсов.

Архитектура Cloud Flink представляет собой распределенную систему, где узел Job Manager координирует работу узлов Task Manager. Каждый узел Task Manager обрабатывает потоки данных, используя операторы. Это обеспечивает масштабируемость и высокую производительность. Распределенное хранение состояния позволяет Cloud Flink продолжать работу при частичных сбоях системы.
