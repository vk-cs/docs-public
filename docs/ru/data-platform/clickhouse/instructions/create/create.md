{tabs}

{tab(Личный кабинет)}

1. [Перейдите](https://msk.cloud.vk.com/app/) в личный кабинет VK Cloud.
1. Выберите проект, где нужно создать экземпляр сервиса.
1. Перейдите в раздел **Data Platform** → **Экземпляры сервисов**.
1. Нажмите кнопку **Добавить инстанс** или **Создать экземпляр**.
1. На шаге **Конфигурация**:

   1. Выберите тип сервиса: `Cloud ClickHouse`.
   1. Выберите нужную версию сервиса.
   1. Выберите конфигурацию экземпляра сервиса:

        - `Single`: в этой конфигурации экземпляр сервиса будет расположен на одном сервере.

            Решение подходит для разработки и тестирования, снижает расходы на развертывание тестовой инфраструктуры. Не обеспечивает отказоустойчивость: сбой узла приводит к остановке всей работы.

        - `Кластер`: в этой конфигурации будет создан отказоустойчивый кластер с максимальной доступностью, автоматическим восстановлением и переключением после сбоев.

            Решение подходит для хранения баз данных большинства проектов, в том числе высоконагруженных, с высокими требованиями к сохранности информации.

   1. Нажмите кнопку **Следующий шаг**.

1. На шаге **Параметры**:

   1. Задайте параметры экземпляра:

      - **Название**: укажите имя для экземпляра сервиса.
      - **Описание**: при необходимости добавьте описание.
      - **Название базы данных**: укажите имя базы данных, к которой Cloud ClickHouse будет подключаться.
      - **Назначить внешний IP**: включите опцию, чтобы экземпляр Cloud ClickHouse был доступен через интернет.
      - **Кластер Kubernetes**: выберите из выпадающего списка нужный кластер или создайте новый, выбрав в списке `Создать новый кластер`. При создании нового кластера задайте параметры:

         - **Сеть**: выберите из списка подсеть, в которой будет доступен кластер, или создайте новую, выбрав в списке `Создать новую сеть`. При создании новой подсети укажите [SDN](/ru/networks/vnet/concepts/sdn) и адрес подсети.
         - **Зона доступности**: выберите из списка [зону доступности](/ru/start/concepts/architecture#az) кластера.

   1. Выберите конфигурацию кластера: `Базовая` или `Продвинутая`.

        {tabs}
        
        {tab(Базовая)}
                
        Выберите один из готовых шаблонов кластера. Шаблоны различаются:

        - в конфигурации экземпляра `Single` — количеством CPU и RAM на узлах Cloud ClickHouse;
        - в конфигурации экземпляра `Кластер` — количеством CPU и RAM на узлах Cloud ClickHouse, а также количеством шардов базы данных.

        {/tab}
        
        {tab(Продвинутая)}
        
        1. В блоке **Clickhouse Keeper** укажите количество узлов Clickhouse Keeper и параметры каждого узла: количество CPU, объем RAM, тип и размер диска.

           Узлы ClickHouse Keeper предназначены для управления репликацией и синхронизацией данных между узлами кластера. Необходимы, чтобы обеспечить отказоустойчивость базы данных, целостность и высокую доступность данных.

        1. В блоке **Clickhouse** укажите количество узлов ClickHouse и параметры каждого узла: количество CPU, объем RAM, тип и размер диска.

           Узлы ClickHouse предназначены для хранения и обработки больших объемов данных в реальном времени. Необходимы, чтобы обеспечить высокую производительность запросов и эффективное использование ресурсов.

        1. (Опционально) Чтобы добавить еще один шард базы данных в конфигурации экземпляра `Кластер`, нажмите кнопку **Добавить шард**.

        {/tab}
        
        {/tabs}

   1. Нажмите кнопку **Следующий шаг**.

1. На шаге **Обслуживание**:

    {include(/ru/_includes/_clickhouse.md)[tags=maintenance]}

    1. Нажмите кнопку **Следующий шаг**.

1. На шаге **Учетные данные**:

    1. Укажите логин администратора для доступа к Cloud ClickHouse. Требования к логину:

        - допустимы только цифры, латинские буквы и символ `_`;
        - первый символ — латинская буква любого регистра или `_`;
        - недопустимые имена: `os_admin`, `root`, `dataplatform_moth`.

    1. Укажите пароль администратора для доступа к Cloud ClickHouse. Чтобы задать пароль, нажмите кнопку **Сгенерировать** или укажите собственный. 

        {include(/ru/_includes/_clickhouse.md)[tags=password]}

    1. (Опционально) Чтобы добавить еще одну учетную запись, нажмите кнопку **Добавить учетную запись**.

    1. Нажмите кнопку **Создать**.

1. Когда экземпляр перейдет в статус `Активно`, [проверьте подключение](/ru/data-platform/clickhouse/instructions/connect-to-instance) и убедитесь, что экземпляр успешно создан, а настройки доступа корректны.

{/tab}

{/tabs}