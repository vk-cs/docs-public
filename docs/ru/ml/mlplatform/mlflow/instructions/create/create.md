В статье описано, как создать инстанс MLflow через личный кабинет VK Cloud.

Создать инстанс можно также с помощью следующих инструментов:

- [Terraform](/ru/tools-for-using-services/terraform/how-to-guides/mlplatform/mlflow);
- библиотека Cloud ML Platform, метод [create_mlflow](../../../mlplatform-lib/lib-reference#create_mlflow).

Инстанс MLflow может работать в двух режимах: в [связке с JupyterHub](../../../concepts/mlflow-modes#with_jh) или отдельно, в [режиме Standalone](../../../concepts/mlflow-modes#standalone).

Если вам нужен инстанс MLflow, работающий совместно с JupyterHub, и инстанс JupyterHub еще не создан, [создайте](../../../jupyterhub/instructions/create) его.

Чтобы создать инстанс MLflow:

1. [Перейдите](https://msk.cloud.vk.com/app) в личный кабинет VK Cloud.
1. Перейдите в раздел **ML Platform**.
1. Нажмите кнопку **Создать инстанс** в карточке **MLflow**.
1. На шаге **Конфигурация** укажите параметры инстанса:

    - **Имя инстанса**: задайте имя инстанса, оно также будет именем хоста (hostname) в ОС. Имя может содержать только латинские буквы, цифры и спецсимволы `-`, `_` и `.`.
    - **Категория виртуальной машины**: выберите [категорию](/ru/computing/iaas/concepts/vm/flavor) предустановленных конфигураций ВМ.
    - **Тип виртуальной машины**: выберите предустановленную конфигурацию ВМ.
    - **Зона доступности**: выберите [дата-центр](/ru/start/concepts/architecture#az), где будет запущен инстанс.
    - **Включить демо-версию MLflow**: если опция включена, все данные будут храниться на ВМ инстанса, если отключена — для хранения данных будет подключен бакет VK Object Storage с базой данных DBaaS PostgreSQL. Чтобы сохранить рабочие данные, рекомендуется использовать деморежим только для ознакомления с функциональностью.
    - **Размер диска**: задайте размер диска ВМ в ГБ. Минимальное значение — 20 ГБ. В деморежиме используется только один диск. В обычном режиме при создании инстанса ему подключается root-диск и дополнительный диск данных (data-диск). Размер root-диска фиксированный — 25 ГБ. Вы можете изменить только размер data-диска.
    - **Тип диска**: выберите [тип](/ru/computing/iaas/concepts/data-storage/disk-types#disk_types) создаваемого диска.
    - **Подключить инстанс JupyterHub для совместной работы**: по умолчанию каждый инстанс MLflow работает [в связке с инстансом JupyterHub](../../../concepts/mlflow-modes#with_jh). Чтобы инстанс MLflow работал [отдельно](../../../concepts/mlflow-modes#standalone) от инстанса JupyterHub VK Cloud, отключите опцию.
    - **Инстанс JupyterHub**: выберите инстанса JupyterHub для совместной работы. Доступно, если включена опция **Подключить инстанс JupyterHub для совместной работы**.
    - **Выбор доменного имени**: выберите DNS-имя инстанса. Доступно, если отключена опция **Подключить инстанс JupyterHub для совместной работы**. Чтобы подключить свой домен, выберите в списке **Подключение своего домена** и задайте имя в поле ниже.
    - **Имя**: укажите DNS-имя инстанса. Доступно, если выбрано **Подключение своего домена**. Требования к DNS-имени:

      - Максимальная длина — 63 символа.
      - Допустимы только цифры, строчные латинские буквы, спецсимволы `.` и `-`.
      - Не может начинаться и заканчиваться на `-`.
    - **Имя пользователя**: задайте имя пользователя для авторизации в ОС инстанса. Доступно, если отключена опция **Подключить инстанс JupyterHub для совместной работы**.
    - **Пароль пользователя**: задайте пароль пользователя для авторизации в ОС инстанса. Доступно, если отключена опция **Подключить инстанс JupyterHub для совместной работы**. Пароль должен содержать:

        - 8 символов и более;
        - одну или более заглавную букву латинского алфавита;
        - одну или более строчную букву латинского алфавита;
        - одну или более цифру;
        - один или более спецсимвол из диапазона: `!`, `#`, `$`, `%`, `&`, `(`, `)`, `*`, `+`, `,`, `.`, `:`, `;`, `<`, `=`, `>`, `?`, `@`, `[`, `]`, `^`,`_`, `{`,`|`, `}`,`~`,`-`.

    {note:err}

    Сохраните пароль. Восстановить пароль невозможно.

    {/note}

1. Нажмите кнопку **Следующий шаг**.

1. На шаге **Выбор сети** укажите параметры сети, в которой будет размещен инстанс:

    - **Сеть**: выберите сеть или создайте новую.
    - **Адрес подсети**: укажите адрес подсети, если выбрано создание новой сети.

   {note:info}

   Если инстанс MLflow создается в связке с JupyterHub, разместите их в одной сети.

   {/note}

1. Нажмите кнопку **Создать инстанс**.

Создание инстанса обычно занимает 10–15 минут. За это время на диске инстанса будет развернута операционная система и ВМ инстанса будет настроена в соответствии с выбранными параметрами.

Когда инстанс будет создан, откроется страница с его характеристиками.
