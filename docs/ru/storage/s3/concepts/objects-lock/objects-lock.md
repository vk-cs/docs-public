VK Object Storage позволяет защитить объекты, заблокировав их удаление или перезапись (object lock). Блокировка объектов в VK Object Storage призвана обеспечивать:

- Устойчивость к киберугрозам. Неизменяемые резервные копии позволят восстановить нескомпрометированное состояние объектов.
- Целостность данных и защита от ошибок. Неизменяемость объектов защищает критически важную информацию от случайного или злонамеренного удаления или повреждения, вызванного человеческим фактором или программными сбоями.
- Соблюдение нормативных требований. Для обеспечения аудита и юридической значимости закон может требовать, чтобы данные сохранялись без изменений в течение заданного времени.

Использовать блокировку объектов можно только в бакетах, созданных с явным указанием такой возможности, например [через AWS CLI](../../instructions/buckets/create-bucket#ways_to_create_bucket).

## Типы блокировки

В VK Object Storage поддерживается два типа блокировки: временная (retention period) и бессрочная (legal hold). Эти типы могут применяться как по отдельности, так и совместно для одного объекта, обеспечивая гибкие сценарии защиты.

### {heading(Временная блокировка)[id=temporary_lock]}

Временная блокировка действует фиксированное время. Поддерживаются два режима временной блокировки: управляемый режим (`GOVERNANCE`) и строгий режим (`COMPLIANCE`).

В обоих режимах:

- Объект не может быть удален до истечения установленного срока.
- Срок блокировки не может быть сокращен, только увеличен.

#### {heading(Управляемый режим временной блокировки)[id=governance-lock]}

Управляемый режим (`GOVERNANCE`) подходит для реализации внутренних политик защиты данных. Он предотвращает случайное удаление критических файлов разработчиками или автоматизированными скриптами, но оставляет возможность администраторам выполнять необходимые операции по управлению данными.

В режиме `GOVERNANCE` пользователь, обладающий [правами на запись](../access/s3-acl#permissons) (`WRITE`), может обойти блокировку:

- удалить объект до истечения установленного срока;
- сократить срок блокировки;
- изменить режим на `COMPLIANCE`.

#### {heading(Строгий режим временной блокировки)[id=compliance-lock]}

Строгий режим блокировки (`COMPLIANCE`) обеспечивает максимальный уровень защиты. Заблокированный в этом режиме объект не может быть перезаписан или удален ни одним пользователем, включая администратора проекта, до истечения срока хранения.

Строгий режим подходит для выполнения строгих нормативных или законодательных требований (например, 152-ФЗ), где неизменяемость данных должна быть гарантирована на техническом и процедурном уровне.

### {heading(Бессрочная блокировка)[id=legal-hold-lock]}

Бессрочная блокировка не имеет срока истечения и действует, пока не будет снята явно. Такую блокировку может в любой момент применить к объекту или снять с объекта пользователь, обладающий [правами на запись](../access/s3-acl#permissons) (`WRITE`).

Бессрочная блокировка действует независимо от установленного для объекта периода временной блокировки и имеет приоритет над ней.

Бессрочная блокировка применяется в ситуациях с неопределенным сроком хранения данных, таких как судебные разбирательства, внутренние аудиты или расследования. Данные остаются защищенными до завершения соответствующего процесса, после чего блокировка может быть снята.

## Сравнение типов блокировки

[cols="1,1,1,1"]
|===
.2+|**Характеристика**
2+|**Временная блокировка**
.2+|**Бессрочная блокировка**

|**Управляемый режим**
|**Строгий режим**

|Тип защиты
|Временная (на заданный период)
|Временная (на заданный период)
|Бессрочная (требуется явное снятие)

|Возможность обхода или снятия
|Да (при наличии прав)
|Нет
|Да (при наличии прав)

|Изменение срока блокировки
|Можно изменить (при наличии прав)
|Можно только продлить
|Неприменимо

|Основной сценарий
|Защита от случайных удалений, внутренние политики
|Нормативные и законодательные требования
|Судебные и аудиторские требования
|===
