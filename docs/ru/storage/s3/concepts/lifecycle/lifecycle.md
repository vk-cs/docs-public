Object Storage позволяет настроить жизненный цикл (lifecycle) объектов в бакете. Жизненный цикл — это автоматизированное удаление объектов из бакета по заданным правилам.

Правила устанавливаются на уровне одного бакета. Настроить жизненный цикл для группы бакетов или проекта нельзя.

[В личном кабинете](../../instructions/buckets/manage-bucket#manage_lifecycle) можно задать каждое правило по отдельности, а с помощью [API](/ru/tools-for-using-services/api/api-spec/s3-rest-api/lifecycle-api) и AWS CLI — настроить конфигурацию правил жизненного цикла. Под настройкой [конфигурации правил](#lifecycle_config) подразумевается, что все правила задаются в одном файле формата XML или JSON, который передается в Object Storage с помощью [API](/ru/tools-for-using-services/api/api-spec/s3-rest-api/lifecycle-api) или AWS CLI.

Каждое правило жизненного цикла включает в себя:

- Фильтр для выбора объектов.

  Поддерживается фильтрация по [префиксу](/ru/storage/s3/concepts/about#object_key) ключа объекта. Примеры префиксов для ключа: `image`, `image/`, `image/photo`. Фильтр может содержать только один префикс. Для каждого префикса необходимо создавать отдельное правило.

- Время жизни объекта (параметр `Expiration`). Определяет, когда объект должен быть удален: 

   - через заданное количество дней после загрузки;
   - в заданное время (только с помощью API и AWS CLI).

Правило автоматически применяется к соответствующим объектам в бакете при его добавлении. Объекты удаляются в фоновом режиме: они становятся недоступны по истечении времени жизни, затем удаляются в порядке очереди. Объекты могут быть удалены не сразу, а в течение следующих 24 часов после применения правила.

Ограничения:

- Для каждого бакета можно установить не более 50 правил.
- При создании правил через API размер XML-файла с правилами не должен превышать 512 КБ.

Правила жизненного цикла обычно не влияют на производительность сервиса Object Storage, так как работают в фоновом режиме.

## {heading(Конфигурация правил жизненного цикла)[id=lifecycle_config]}

Конфигурация жизненного цикла описывается в файле в формате JSON (для AWS CLI) или в формате XML (для API).

Пример файла конфигурации в формате JSON:

```json
{
  "Rules": [
    {
      "Expiration": {
        "Days": 1
      },
      "ID": "string",
      "Status": "string",
      "Filter": {
        "Prefix": "string",
        "And": {
          "Prefix": "string"
        }  
      }
    }
  ]
}
```

[cols="2,1,3", options="header"]
|===

|Параметр
|Тип
|Описание

|`Rules`
|array of objects
|Список правил жизненного цикла

|`Rules.Expiration`
|object
|Срок жизни объекта

|`Rules.Expiration.Days`
|integer
|Количество дней, через которое объект будет удален

|`Rules.ID`
|string
|Уникальный идентификатор правила

|`Rules.Status`
|string
|Статус правила. Возможные значения: 

- `Enabled` — правило применяется; 
- `Disabled` — правило не применяется

|`Rules.Filter`
|object
|Фильтр по объектам, к которым должно применяться правило

|`Rules.Filter.Prefix`
|string
|[Префикс объекта](/ru/storage/s3/concepts/about#object_key). Укажите префикс, если вас интересует только список объектов с определенным префиксом

|`Rules.Filter.And`
|object
|Логический оператор «И». Применяется для сочетания в одном правиле фильтрации по разным префиксам

|`Rules.Filter.And.Prefix`
|string
|[Префикс объекта](/ru/storage/s3/concepts/about#object_key). Укажите префикс, если вас интересует только список объектов с определенным префиксом

|===