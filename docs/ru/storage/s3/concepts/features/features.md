## {heading(Стандартная и составная загрузка объектов)[id=object_uploading]}

В бакет Cloud Storage можно загружать файлы любого типа, например, изображения, резервные копии, видео.

В зависимости от объема файла рекомендованы различные способы загрузки:

- До 1 ГБ — [стандартная загрузка](../../instructions/objects/upload-object#standard_upload) любым удобным способом: через личный кабинет, файловые менеджеры, CLI, SDK или API.
- Свыше 1 ГБ — CLI, SDK или API.
- Свыше 32 ГБ — только [составная загрузка](../../instructions/objects/upload-object#multipart_upload) через CLI, SDK или API.

При составной загрузке данные разделяются на несколько частей и загружаются по отдельности. Если передача какой-либо части не удалась, ее можно передать повторно, не затрагивая другие части. Когда все части загружены, хранилище собирает их вместе в заданном порядке и создает объект.

Преимущества составной загрузки:

- Части большого файла можно загружать параллельно, тем самым сокращая время загрузки.
- Если какая-то часть не была загружена из-за ошибки сети, ее быстрее перезагрузить, чем большой файл.
- Можно приостановить загрузку и продолжить ее позднее.
- Начать загрузку можно до того, как будет известен окончательный размер файла, т.е. можно загружать файл по мере его создания.

{note:info}

Ограничения на размер загружаемых файлов:

- Максимальный размер несоставного объекта или части составного объекта — 32 ГБ.
- Максимальный размер составного объекта — 320 ТБ.
- Количество частей составной загрузки — от 1 до 10000.

{/note}

## {heading(Блокировка объектов от удаления и перезаписи)[id=object_lock]}

Cloud Storage позволяет защитить объекты, заблокировав их удаление или перезапись (object lock).

Поддерживаются два типа блокировки: бессрочная и временная. Они независимы друг от друга: для объекта можно установить только временную блокировку, только бессрочную или обе сразу.

### Бессрочная блокировка

Бессрочная блокировка (legal hold) действует, пока не будет снята явно. Такую блокировку может в любой момент применить к объекту или снять с объекта пользователь, обладающий [правами на запись WRITE](../../instructions/access-management/s3-acl#permissons).

### {heading(Временная блокировка)[id=temporary_lock]}

Временная блокировка (retention period) действует фиксированный период времени. Поддерживаются два режима временной блокировки: управляемый режим (`GOVERNANCE`) и строгий режим (`COMPLIANCE`).

В обоих режимах:

- Объект не может быть удален до истечения установленного срока.
- Срок блокировки не может быть сокращен, только увеличен.

В режиме `GOVERNANCE` пользователь, обладающий [правами на запись WRITE](../../instructions/access-management/s3-acl#permissons), может обойти блокировку:

- удалить объект до истечения установленного срока;
- сократить срок блокировки;
- изменить режим на `COMPLIANCE`.

В режиме (`COMPLIANCE`) пользователь не может переопределить параметры блокировки или удалить объект.

{note:warn}

Блокировка может устанавливаться только для объектов в бакетах, созданных с [явным указанием](../../instructions/buckets/create-bucket#ways_to_create_bucket) такой возможности.

{/note}

## {heading(Настройка автоматической очистки бакета)[id=automatic_bucket_cleaning]}

Cloud Storage позволяет настроить жизненный цикл (lifecycle) объектов в бакете. Жизненный цикл — это автоматизированное удаление объектов из бакета по заданным правилам.

Правила устанавливаются на уровне одного бакета [через личный кабинет](../../instructions/buckets/manage-bucket#manage_lifecycle) или [с помощью API](/ru/tools-for-using-services/api/api-spec/s3-rest-api/lifecycle-api). Настроить жизненный цикл для группы бакетов, директории или проекта нельзя.

Каждое правило жизненного цикла включает в себя:

- Фильтр для выбора объектов.

  Поддерживается фильтрация по [префиксу](../about#object_key) ключа объекта. Примеры префиксов для ключа: `image`, `image/`, `image/photo`. Фильтр может содержать только один префикс. Для каждого префикса необходимо создавать отдельное правило.

- Параметр `Expiration`.

  Этот параметр определяет, когда объект должен быть удален: в заданное время или через заданное количество дней после загрузки.

После установки правила автоматически применяются к соответствующим объектам в бакете.

Ограничения:

- Для каждого бакета можно установить не более 50 правил.
- При создании правил через API размер XML-файла с правилами не должен превышать 512 КБ.

Правила жизненного цикла обычно не влияют на производительность сервиса Cloud Storage, так как работают в фоновом режиме.

## {heading(Копирование объектов)[id=objects_copying]}

Cloud Storage позволяет создавать копии хранимых объектов. Копирование выполняется [с помощью CLI, SDK, файлового менеджера](../../instructions/objects/manage-object#copy_object) или [API](/ru/tools-for-using-services/api/api-spec/s3-rest-api/object-api#copy).

С помощью копирования вы можете:

- Создавать дополнительные копии объектов в том же самом или другом бакете.
- Переименовывать объекты.

  Прямое переименование объектов в бакете не поддерживается. Обойти это ограничение можно, создав копию объекта с новым именем и затем удалив исходный объект.

- Изменять метаданные объекта.

  Метаданные объекта устанавливаются при его загрузке в бакет. Единственный способ изменить их после загрузки — создать копию объекта с тем же именем, указав новые метаданные в запросе на копирование. Таким способом можно изменить пользовательские метаданные и некоторые системные метаданные, например [класс хранения](../about#storage_class).

## {heading(Уведомления о событиях в бакете)[id=bucket_event_notifications]}

Cloud Storage позволяет настроить отправку уведомлений о событиях в бакете с помощью вебхуков (webhooks). В каждом вебхуке указывается тип события и URL-адрес, на который приходит сообщение или HTTP/HTTPS-запрос, когда в бакете происходит событие указанного типа. Можно создать вебхуки для следующих типов событий:

- создание объекта;
- копирование объекта;
- удаление объекта;
- завершение составной загрузки.

Использование вебхуков позволяет:

- информировать пользователя о произошедшем в бакете событии;
- настроить обработку и конвертирование файлов после загрузки;
- настроить взаимодействие с внешними системами;
- подключить логирование для объектного хранилища.

Конфигурация вебхуков для бакета создается [через личный кабинет](../../instructions/buckets/manage-bucket#manage_webhooks) или [с помощью API](/ru/tools-for-using-services/api/api-spec/s3-rest-api/webhook-api).
