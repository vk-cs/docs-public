Стратегия резервного копирования с ограничением количества резервных копий (Forward Incremental Backup) позволяет задать максимальное количество полных резервных копий для хранения. При превышении максимального количества резервных копий VK Cloud автоматически удалит самые старые из них.

<info>

Резервные копии могут быть созданы успешно или с ошибкой. Созданные с ошибкой резервные копии не тарифицируются и не могут быть использованы для восстановления.

</info>

Резервные копии удаляются согласно следующему алгоритму:

1. Проверяется количество успешно созданных копий. Если оно превысило разрешенное в плане, самые старые из этих копий удаляются. Количество удаленных копий будет равно разнице между общим количеством успешно созданных резервных копий и установленным максимальным количеством.
2. Проверяется общее количество резервных копий. Если оно превысило разрешенное в плане, удаляются все созданные с ошибкой резервные копии, созданные до самой старой успешной.
3. Если успешно созданных резервных копий нет, удаляются самые старые созданные с ошибкой резервные копии. Количество удаленных копий будет равно разнице между количеством созданных с ошибкой резервных копий и установленным максимальным количеством.

Процесс удаления запускается после создания резервной копии и через час после изменения настроек плана резервного копирования.

<details>
    <summary>Пример работы алгоритма</summary>

Для параметра **Макс. количество полных бэкапов** установлено значение: `2`.

По плану резервного копирования создаются резервные копии:

- **Копия 1**, создана с ошибкой.<br>
Количество успешно созданных копий: 0, не превышает максимум.<br>
Общее количество резервных копий: 1, не превышает максимум.
- **Копия 2**, создана успешно.<br>
Количество успешно созданных копий: 1, не превышает максимум.<br>
Общее количество резервных копий: 2, не превышает максимум.
- **Копия 3**, создана успешно.<br>
Количество успешно созданных копий: 2, не превышает максимум.<br>
Общее количество резервных копий: 3, превышает максимум. Есть копии, созданные с ошибкой раньше самой старой успешно созданной копии. Будет удалена **Копия 1**.
- **Копия 4**, создана с ошибкой.<br>
Количество успешно созданных копий: 2, не превышает максимум.<br>
Общее количество резервных копий: 3, превышает максимум. Нет копий, созданных с ошибкой раньше самой старой успешно созданной копии. Резервные копии удаляться не будут.
- **Копия 5**, создана с ошибкой.<br>
Количество успешно созданных копий: 2, не превышает максимум.<br>
Общее количество резервных копий: 4, превышает максимум. Нет копий, созданных с ошибкой раньше самой старой успешно созданной копии. Резервные копии удаляться не будут.
- **Копия 6**, создана успешно.<br>
Количество успешно созданных копий: 3, превышает максимум. Будет удалена **Копия 2**.<br>
Общее количество резервных копий: 5, превышает максимум. Нет копий, созданных с ошибкой раньше самой старой успешно созданной копии. Созданные с ошибкой резервные копии удаляться не будут.

Останутся резервные копии:

- **Копия 3**, создана успешно.
- **Копия 4**, создана с ошибкой.
- **Копия 5**, создана с ошибкой.
- **Копия 6**, создана успешно.

</details>

<err> При удалении полных резервных копий инкрементальные также будут удалены. </err>
